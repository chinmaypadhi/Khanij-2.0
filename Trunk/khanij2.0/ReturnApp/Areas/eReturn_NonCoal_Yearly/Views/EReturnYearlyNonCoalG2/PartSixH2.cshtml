@*// *********************************************************************************************************
    //  View Name                : PartSixH2
    //  Desciption               : To be used for minerals Copper, Gold, Lead, Pyrites, Tin, Tungsten and Zinc
    //  Created By               : Akshaya Dalei
    //  Created On               : 26 July 2021
    // ********************************************************************************************************
*@
@{
    ViewData["Title"] = "PartSixH2";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    if (ViewBag.msg != null)
    {
        <script>
                alert('@ViewBag.msg');
        </script>
    }
}
@model ReturnEF.FormF2PartTwoViewModel
<section class="wrapper main-wrapper row">
    <div class="col-12">
        @Html.Partial("_CMSnavigation")
        <!-- MAIN CONTENT AREA STARTS -->
        <div class="row">
            <div class="col-12">
                <div class="main-tab">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link" href="/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/PartOneH2?Financial_Year=@ViewBag.FinancialYear">
                                Part 1
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/PartTwoH2?Financial_Year=@ViewBag.FinancialYear">
                                Part 2
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/PartThreeH2?Financial_Year=@ViewBag.FinancialYear">
                                Part 3
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/PartFourH2?Financial_Year=@ViewBag.FinancialYear">
                                Part 4
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/PartFiveH2?Financial_Year=@ViewBag.FinancialYear">
                                Part 5
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/PartSixH2?Financial_Year=@ViewBag.FinancialYear">
                                Part 6
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/PartSevenH2?Financial_Year=@ViewBag.FinancialYear">
                                Part 7
                            </a>
                        </li>
                    </ul>
                    @Html.Partial("_CMSutil")
                </div>

                <section class="box form-container">
                    <div class="content-body">
                        <div class="text-center text-dark">

                            <h6 class="font-weight-bold">Annual Return <small>(FORM G-2)</small></h6>
                            <p class="font-weight-normal mb-0">
                                To be used for minerals Copper, Gold, Lead, Pyrites, Tin, Tungsten and Zinc
                            </p>
                            <h6 class="font-weight-bold">(PRODUCTION, DESPATCHES AND STOCKS)<small> (Part – VI)</small></h6>
                        </div>



                        <ul class="nav nav-tabs progressbar border-0" id="myTab" role="tablist">
                            <li class="startstep activestep1" role="presentation">
                                <a class="active" id="first-tab" data-toggle="tab" href="#first" role="tab" aria-controls="first" aria-selected="true">Production and Stocks</a>
                            </li>
                            <li>
                                <a id="second-tab" data-toggle="tab" href="#second" role="tab" aria-controls="second" aria-selected="false">Recoveries at Concentrator</a>
                            </li>
                            <li>
                                <a id="third-tab" data-toggle="tab" href="#third" role="tab" aria-controls="third" aria-selected="false">Recovery at the Smelter</a>
                            </li>
                            <li>
                                <a id="four-tab" data-toggle="tab" href="#four" role="tab" aria-controls="four" aria-selected="false">Sales during the Year</a>
                            </li>
                            <li>
                                <a id="five-tab" data-toggle="tab" href="#five" role="tab" aria-controls="five" aria-selected="false">Details of deductions</a>
                            </li>
                            <li>
                                <a id="six-tab" data-toggle="tab" href="#six" role="tab" aria-controls="six" aria-selected="false">Sales / Dispatches</a>
                            </li>
                            <li>
                                <a id="seven-tab" data-toggle="tab" href="#seven" role="tab" aria-controls="seven" aria-selected="false">Reasons for increase / decrease</a>
                            </li>

                        </ul>
                        @using (Html.BeginForm("PartSixH2", "EReturnYearlyNonCoalG2", FormMethod.Post, new { @id = "G2_ReasonForInDc", @enctype = "multipart/form-data" }))
                        {
                            <div class="tab-content" id="myTabContent">

                                <input type="hidden" value="@ViewBag.Year" name="Year" id="Year" />
                                <input type="hidden" value="@ViewBag.MineralId" name="objProduction.MineralId1" id="objProduction_MineralId2" />

                                <div class="tab-pane fade show active" id="first" role="tabpanel" aria-labelledby="first-tab">
                                    @Html.HiddenFor(m => m.objProduction.Flag)
                                    @Html.HiddenFor(m => m.objProduction.ProductionandStocks_Id)
                                    <input type="hidden" value="@ViewBag.Year" name="objProduction.Year" id="Year1" />
                                    <input type="hidden" value="@ViewBag.MineralId" name="objProduction.MineralId1" id="objProduction_MineralId1" />
                                    <h5 class="text-brown font-weight-bold"> Production and Stocks of ROM Ore</h5>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-bordered mt-3">
                                            <tbody>
                                                <tr>
                                                    <th rowspan="2" class="font-weight-bolder text-center"></th>
                                                    <th colspan="2" class="font-weight-bolder text-center">Opening stocks</th>
                                                    <th colspan="2" class="font-weight-bolder text-center">Production</th>
                                                    <th colspan="2" class="font-weight-bolder text-center">	Closing stocks</th>
                                                </tr>
                                                <tr>
                                                    <th class="font-weight-bolder text-center">Quantity</th>
                                                    <th class="font-weight-bolder text-center">	Metal content / grade</th>
                                                    <th class="font-weight-bolder text-center">Quantity</th>
                                                    <th class="font-weight-bolder text-center">	Metal content / grade</th>
                                                    <th class="font-weight-bolder text-center">Quantity</th>
                                                    <th class="font-weight-bolder text-center">	Metal content / grade</th>
                                                </tr>
                                                <tr>
                                                    <th colspan="7" class="font-weight-bolder">From Underground workings</th>
                                                </tr>
                                                <tr>
                                                    <td class="font-weight-bolder"> From Development</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Development_OS_Qty, new { @class = "FD form-control", @type = "number", @onchange = "TextChangeOpeningstocksQty()" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Development_OS_grade, new { @class = "FD form-control", @type = "number" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Development_Production_Qty, new { @class = "FD form-control", @type = "number", onchange = "TextChangeOpeningstocksQty()" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Development_Production_grade, new { @class = "FD form-control", @type = "number" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Development_CS_Qty, new { @class = "FD form-control", @type = "number", onchange = "TextChangeClosingstocksQty()", @readonly = "readonly" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Development_CS_grade, new { @class = "FD form-control", @type = "number" })</td>
                                                </tr>
                                                <tr>
                                                    <td class="font-weight-bolder">From Stoping</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Stoping_OS_Qty, new { @class = "FS form-control", @type = "number", @onchange = "TextChangeOpeningstocksQty()" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Stoping_OS_grade, new { @class = "FS form-control", @type = "number" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Stoping_Production_Qty, new { @class = "FS form-control", @type = "number", onchange = "TextChangeOpeningstocksQty()" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Stoping_Production_grade, new { @class = "FS form-control", @type = "number" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Stoping_CS_Qty, new { @class = "FS form-control", @type = "number", onchange = "TextChangeClosingstocksQty()", @readonly = "readonly" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Stoping_CS_grade, new { @class = "FS form-control", @type = "number" })</td>
                                                </tr>

                                                <tr>
                                                    <td class="font-weight-bolder">From Opencast<br /> workings</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_OS_Qty, new { @class = "FO form-control", @type = "number", @onchange = "TextChangeOpeningstocksQty()" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_OS_grade, new { @class = "FO form-control", @type = "number" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_Production_Qty, new { @class = "FO form-control", @type = "number", onchange = "TextChangeOpeningstocksQty()" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_Production_grade, new { @class = "FO form-control", @type = "number" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_CS_Qty, new { @class = "FO form-control", @type = "number", onchange = "TextChangeClosingstocksQty()", @readonly = "readonly" })</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_CS_grade, new { @class = "FO form-control", @type = "number" })</td>
                                                </tr>
                                                <tr>
                                                    <td class="font-weight-bolder">Total</td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Total_OS_Qty, new { @class = "form-control", @type = "number", @readonly = "readonly" })</td>
                                                    <td> </td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Total_Production_Qty, new { @class = "form-control", @type = "number", @readonly = "readonly" })</td>
                                                    <td></td>
                                                    <td>@Html.TextBoxFor(m => m.objProduction.Total_CS_Qty, new { @class = "form-control", @type = "number", @readonly = "readonly" })</td>
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <h5 class="text-brown font-weight-bold w-100"> Ex-mine price of the ore produced <small>(Rs per unit)</small></h5>
                                    <div class="col-lg-8 pl-1">
                                        <div class="row">
                                            <div class="col-lg-6">
                                                @Html.TextBoxFor(m => m.objProduction.ExMinePrice, new { @class = "form-control", @type = "number" })
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a class="btn btn-danger btn-md ml-0 waves-effect waves-light">Reset</a>
                                            <a class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext">Next</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="second" role="tabpanel" aria-labelledby="second-tab">
                                    <div class="form-group row ">
                                        <div class="col-sm-12">

                                            <h5 class="text-brown font-weight-bold"> Recoveries at Concentrator/ Mill / Plant</h5>

                                        </div>
                                        <div class="col-sm-12">
                                            <div class="table-responsive">
                                                <a href="javascript:void(0);"
                                                   class="btn-floating btn-outline-success btn-sm"
                                                   data-toggle="modal"
                                                   data-target=".alert-modal" id="IdAdd" data-placement="top" title="Add New"><i class="icon-plus-solid"></i></a>
                                                <table id="datatable" class="table table-sm table-bordered w-100">
                                                    <thead>
                                                        <tr>
                                                            <th rowspan="2">Mineral Name</th>
                                                            <th colspan="2">Opening stocks of the Ore at concentrator/plant</th>
                                                            <th colspan="2">Ore received from the mine</th>
                                                            <th colspan="2" class="text-center">Ore treated</th>
                                                            <th colspan="3" class="text-center">Concentrates Obtained</th>
                                                            <th colspan="2" class="text-center">Tailings</th>
                                                            <th colspan="2" class="text-center">Closing stocks of concentrates at the concentrator/plant</th>
                                                            <th width="150px" rowspan="2" class="text-center">Actions</th>
                                                        </tr>
                                                        <tr>

                                                            <th>Quantity</th>
                                                            <th>Metal content/ grade</th>
                                                            <th>Quantity</th>
                                                            <th>Metal content/ grade</th>
                                                            <th>Quantity</th>
                                                            <th>Metal content/ grade</th>
                                                            <th>Quantity</th>
                                                            <th>Metal content/ grade</th>
                                                            <th>Value (Rs)</th>
                                                            <th>Quantity</th>
                                                            <th>Metal content/ grade</th>
                                                            <th>Quantity</th>
                                                            <th>Metal content/ grade</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>
                                                </table>
                                            </div>


                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious">Previous</a>
                                            <a class="btn btn-danger btn-md ml-0 waves-effect waves-light">Reset</a>
                                            <a class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext">Next</a>
                                        </div>
                                    </div>

                                </div>

                                <div class="tab-pane fade" id="third" role="tabpanel" aria-labelledby="third-tab">
                                    <div class="col-sm-12">

                                        <h5 class="text-brown font-weight-bold">Recovery at the Smelter/ Mill/ Plant</h5>

                                    </div>

                                    <div class="col-sm-12">
                                        <div class="table-responsive">
                                            <a id="IdAddModal1" href="javascript:void(0);"
                                               class="btn-floating btn-outline-success btn-sm"
                                               data-toggle="modal"
                                               data-target=".alert-modal1" data-placement="top" title="Add New"><i class="icon-plus-solid"></i></a>
                                            <table id="tblRecoverySmelter" class="table table-sm table-bordered w-100">
                                                <thead>
                                                    <tr>
                                                        <th rowspan="2">Mineral Name</th>
                                                        <th colspan="2">Opening Stocks of the concentrates at the smelter /plant</th>
                                                        <th colspan="2">Concentrates received from concentrator/plant</th>
                                                        <th colspan="2" class="text-center">Concentrates received from other sources (specify)</th>
                                                        <th colspan="2" class="text-center">Concentrates sold (if any)</th>
                                                        <th colspan="2" class="text-center">Concentrates treated</th>
                                                        <th colspan="2">Closing stocks of concentrate at the Smelter/Plant</th>
                                                        <th colspan="3" class="text-center">Metals(*) recovered (specify)</th>
                                                        <th colspan="3" class="text-center">Other by-products, if any,recovered</th>
                                                        <th width="150px" rowspan="2" class="text-center">Actions</th>
                                                    </tr>

                                                    <tr>

                                                        <th>Quantity</th>
                                                        <th>Metal content/ grade</th>

                                                        <th>Quantity</th>
                                                        <th>Metal content/ grade</th>

                                                        <th>Quantity</th>
                                                        <th>Metal content/ grade</th>

                                                        <th>Quantity</th>
                                                        <th>Metal content/ grade</th>

                                                        <th>Quantity</th>
                                                        <th>Metal content/ grade</th>

                                                        <th>Quantity</th>
                                                        <th>Metal content/ grade</th>

                                                        <th>Quantity</th>
                                                        <th>Grade</th>
                                                        <th>Value(Rs)</th>

                                                        <th>Quantity</th>
                                                        <th>Grade</th>
                                                        <th>Value(Rs)</th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>


                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious">Previous</a>
                                            <a class="btn btn-danger btn-md ml-0 waves-effect waves-light">Reset</a>
                                            <a class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext">Next</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="four" role="tabpanel" aria-labelledby="four-tab">

                                    <div class="col-sm-12">

                                        <h5 class="text-brown font-weight-bold">Sales during the Year</h5>

                                    </div>

                                    <div class="col-sm-12">
                                        <div class="table-responsive">
                                            <a id="btnIdModal2" href="javascript:void(0);"
                                               class="btn-floating btn-outline-success btn-sm"
                                               data-toggle="modal"
                                               data-target=".alert-modal2" data-placement="top" title="Add New"><i class="icon-plus-solid"></i></a>
                                            <table id="tblSaleProduct" class="table table-sm table-bordered w-100">
                                                <thead>
                                                    <tr>
                                                        <th rowspan="2">Metal/Product</th>
                                                        <th colspan="2">Opening stocks of Metals/Products</th>
                                                        <th rowspan="2">Place of sale</th>
                                                        <th colspan="3" class="text-center">Metals/Products sold</th>
                                                        <th colspan="2" class="text-center">Closing stocks of Metals/Products</th>
                                                        <th width="150px" rowspan="2" class="text-center">Actions</th>
                                                    </tr>
                                                    <tr>
                                                        <th>Quantity</th>
                                                        <th>Grade</th>
                                                        <th>Quantity</th>
                                                        <th>Grade</th>
                                                        <th>Value</th>
                                                        <th>Quantity</th>
                                                        <th>Grade</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>


                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious">Previous</a>
                                            <a class="btn btn-danger btn-md ml-0 waves-effect waves-light">Reset</a>
                                            <a class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext">Next</a>
                                        </div>
                                    </div>

                                </div>

                                <div class="tab-pane fade" id="five" role="tabpanel" aria-labelledby="five-tab">
                                    @Html.HiddenFor(m => m.objDeduction.Flag2)
                                    @Html.HiddenFor(m => m.objDeduction.DeductionMade_Id)
                                    <input type="hidden" value="@ViewBag.Year" name="objDeduction.Year" id="objDeductionYear" />
                                    <h5 class="text-brown font-weight-bold">Details of deductions made</h5>
                                    <div class="form-group row ">
                                        <div class="col-lg-6 col-md-12 col-sm-12">
                                            <div class="row">
                                                <label for="inputName" class="col-sm-4 col-form-label font-weight-bolder">Captive dispatches and ex-mine sales</label>
                                                <div class="col-sm-7">
                                                    <div class="py-2">
                                                        <div class="custom-control custom-radio custom-control-inline">
                                                            <input type="radio" class="custom-control-input" id="CExMineSaleYes" name="objDeduction.CExMineSale" value="Yes">
                                                            <label class="custom-control-label" for="CExMineSaleYes">yes</label>
                                                        </div>
                                                        <div class="custom-control custom-radio custom-control-inline">
                                                            <input type="radio" class="custom-control-input" id="CExMineSaleNo" name="objDeduction.CExMineSale" checked="checked" value="No">
                                                            <label class="custom-control-label" for="CExMineSaleNo">No</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-12 col-sm-12">
                                            <div class="row">
                                                <label for="inputName" class="col-sm-3 col-form-label font-weight-bolder">Ex-mine sales</label>
                                                <div class="col-sm-7">
                                                    <div class="py-2">
                                                        <div class="custom-control custom-radio custom-control-inline">
                                                            <input type="radio" class="custom-control-input" id="ex_mineYes" name="objDeduction.ex_mineSale" value="Yes">
                                                            <label class="custom-control-label" for="ex_mineYes">yes</label>
                                                        </div>
                                                        <div class="custom-control custom-radio custom-control-inline">
                                                            <input type="radio" class="custom-control-input" id="ex_mineNo" name="objDeduction.ex_mineSale" value="No" checked="checked">
                                                            <label class="custom-control-label" for="ex_mineNo">No</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>

                                    <h5 class="text-brown font-weight-bold">Details of deductions made from sale value for computation of Ex-mine price (Rs / Tonne)</h5>

                                    <div class="row">
                                        <div class="col-xl-6">
                                            <div class="bg-light p-2 form-group border">
                                                <label class="col-form-label font-weight-bolder pt-0">a) Cost of transportation (indicate loading station and distance from mine in remarks)</label>
                                                <div class="row">

                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Amount1, new { @class = "form-control", @placeholder = "Amount ( in Rs / Tonne)", @onchange = "TextChange();" })
                                                    </div>
                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Remarks1, new { @class = "form-control1" })
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xl-6">
                                            <div class="bg-light p-2 form-group border">
                                                <label class="col-form-label font-weight-bolder pt-0">b) Loading and unloading charges</label>
                                                <div class="row">

                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Amount2, new { @class = "form-control", @placeholder = "Amount ( in Rs / Tonne)", @onchange = "TextChange();" })
                                                    </div>
                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Remarks2, new { @class = "form-control1" })
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xl-6">
                                            <div class="bg-light p-2 form-group border">
                                                <label class="col-form-label font-weight-bolder pt-0">
                                                    c) Railway freight, if applicable
                                                    (indicate destination and distance)
                                                </label>
                                                <div class="row">

                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Amount3, new { @class = "form-control", @placeholder = "Amount ( in Rs / Tonne)", @onchange = "TextChange();" })
                                                    </div>
                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Remarks3, new { @class = "form-control" })
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xl-6">
                                            <div class="bg-light p-2 form-group border">
                                                <label class="col-form-label font-weight-bolder pt-0">
                                                    d) Port handling charges or export duty
                                                    (indicate name of port)
                                                </label>
                                                <div class="row">

                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Amount4, new { @class = "form-control", @placeholder = "Amount ( in Rs / Tonne)", @onchange = "TextChange();" })
                                                    </div>
                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Remarks4, new { @class = "form-control" })
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xl-6">
                                            <div class="bg-light p-2 form-group border">
                                                <label class="col-form-label font-weight-bolder pt-0">e) Charges for sampling and analysis</label>
                                                <div class="row">

                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Amount5, new { @class = "form-control", @placeholder = "Amount ( in Rs / Tonne)", @onchange = "TextChange();" })
                                                    </div>
                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Remarks5, new { @class = "form-control" })
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xl-6">
                                            <div class="bg-light p-2 form-group border">
                                                <label class="col-form-label font-weight-bolder pt-0">f) Rent for the plot at Stocking yard</label>
                                                <div class="row">

                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Amount6, new { @class = "form-control", @placeholder = "Amount ( in Rs / Tonne)", @onchange = "TextChange();" })
                                                    </div>
                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.Remarks6, new { @class = "form-control" })
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xl-6">
                                            <div class="bg-light p-2 form-group border">
                                                <label class="col-form-label font-weight-bolder pt-0">g) Other charges(specify clearly)</label>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        @Html.TextBoxFor(m => m.objDeduction.Deduction_claimedType7, new { @class = "form-control" })
                                                    </div>
                                                    <div class="col-sm-4">
                                                        @Html.TextBoxFor(m => m.objDeduction.Amount7, new { @class = "form-control", @placeholder = "Amount ( in Rs / Tonne)", @onchange = "TextChange();" })
                                                    </div>
                                                    <div class="col-sm-4">
                                                        @Html.TextBoxFor(m => m.objDeduction.Remarks7, new { @class = "form-control" })
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xl-6">
                                            <div class="bg-light p-2 form-group border">
                                                <label class="col-form-label font-weight-bolder pt-0">Total (a) to (g)</label>
                                                <div class="row">

                                                    <div class="col-sm-6">
                                                        @Html.TextBoxFor(m => m.objDeduction.TotalAmount, new { @class = "form-control" })
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious">Previous</a>
                                            <a class="btn btn-danger btn-md ml-0 waves-effect waves-light">Reset</a>
                                            <a class="btn btn-success btn-md ml-0 waves-effect waves-light">Save & Update</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="six" role="tabpanel" aria-labelledby="six-tab">
                                    <div class="col-sm-12">

                                        <h5 class="text-brown font-weight-bold">Sales / Dispatches of ore and concentrates effected for Domestic Purposes and for Exports</h5>

                                    </div>
                                    <div class="col-sm-12">
                                        <div class="table-responsive">
                                            <a id="btnIdModal3" href="javascript:void(0);"
                                               class="btn-floating btn-outline-success btn-sm"
                                               data-toggle="modal"
                                               data-target=".alert-modal3" data-placement="top" title="Add New"><i class="icon-plus-solid"></i></a>
                                            <table id="tblSaleDispatch" class="table table-sm table-bordered w-100">
                                                <thead>
                                                    <tr>
                                                        <th rowspan="2">Mineral Grade</th>
                                                        <th rowspan="2">Nature of Despatch (indicate whether Domestic Sale or Domestic Transfer or Captive consumption or Export)</th>
                                                        <th colspan="4">For Domestic Purposes</th>
                                                        <th colspan="3" class="text-center">For export</th>
                                                        <th width="150px" rowspan="2" class="text-center">Actions</th>
                                                    </tr>
                                                    <tr>

                                                        <th>Registration No Alloted by IBM</th>
                                                        <th>Consinee Name</th>
                                                        <th>Quantity</th>
                                                        <th>Sale Value (Rs)</th>
                                                        <th>Country</th>
                                                        <th>Quantity</th>
                                                        <th>F.O.B Value(Rs)</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>


                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious">Previous</a>
                                            <a class="btn btn-danger btn-md ml-0 waves-effect waves-light">Reset</a>
                                            <a class="btn btn-success btn-md ml-0 waves-effect waves-light">Save & Update</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="seven" role="tabpanel" aria-labelledby="seven-tab">
                                    @Html.HiddenFor(m => m.objReason_Reason_Inc_Dec.Reason_Inc_Dec_Id)
                                    @Html.HiddenFor(m => m.objReason_Reason_Inc_Dec.Flag3)
                                    <input type="hidden" value="@ViewBag.Year" name="objReason_Reason_Inc_Dec.Year" id="Month_Year3" />
                                    <h5 class="text-brown font-weight-bold">Reasons for Increase/ Decrease</h5>
                                    <div class="form-group row">
                                        <div class="col-sm-6">
                                            <label class="col-form-label font-weight-bolder">Give reasons for increase/decrease in production/nil production, if any, during the month compared to the previous month</label>
                                            <textarea class="form-control" name="objReason_Reason_Inc_Dec.productionIncrDecResion" id="objReason_Reason_Inc_Dec.productionIncrDecResion" rows="2">@Model.objReason_Reason_Inc_Dec.productionIncrDecResion</textarea>
                                            <small class="text-danger">Maximum <strong>500</strong> characters</small>
                                        </div>

                                        <div class="col-sm-6">
                                            <label class="col-form-label font-weight-bolder">Give reasons for increase/decrease in grade wise ex-mine price, if any, during the month compared to the previous month</label>
                                            <textarea class="form-control" name="objReason_Reason_Inc_Dec.ex_minepriceIncrDecResion" id="objReason_Reason_Inc_Dec.ex_minepriceIncrDecResion" rows="2">@Model.objReason_Reason_Inc_Dec.ex_minepriceIncrDecResion</textarea>
                                            <small class="text-danger">Maximum <strong>500</strong> characters</small>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious">Previous</a>
                                            @if (Model.objReason_Reason_Inc_Dec.Reason_Inc_Dec_Id != null && Model.objReason_Reason_Inc_Dec.Reason_Inc_Dec_Id != 0)
                                            {
                                                <a onclick="return OnUpdateReason_Inc_Dec();" class="btn btn-success btn-md ml-0 waves-effect waves-light">Update</a>
                                            }
                                            else
                                            {
                                                <a onclick="return OnSaveReason_Inc_Dec();" class="btn btn-danger btn-md ml-0 waves-effect waves-light">Save</a>
                                            }
                                        </div>
                                    </div>
                                </div>

                            </div>
                        }
                    </div>
                </section>
            </div>
        </div>
    </div>
    <!-- MAIN CONTENT AREA ENDS -->
</section>
<input type="hidden" id="hdnrecoverie_Id" value="" />
<input type="hidden" id="hdnrRecovery_atSmelter_Id" value="" />
<input type="hidden" id="hdnMineralGrade" value="" />
<input type="hidden" id="hdnSale_Dispatch_Id" value="" />
<input type="hidden" id="hdnMineralForm" value="" />
<input type="hidden" id="hdnMINERALGRADEID" value="" />
<input type="hidden" id="hdnNatureOfDispatch" value="" />
<input type="hidden" id="hdnConsignee" value="" />
<input type="hidden" id="hdnobjDeduction_CExMineSale" value="@Model.@Model.objDeduction.CExMineSale" />
<input type="hidden" id="hdnobjDeduction_ex_mineSale" value="@Model.objDeduction.ex_mineSale" />
<!-- alert 1-->
<div class="modal fade alert-modal" tabindex="-1" role="dialog" id="modal" aria-labelledby="alertModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header p-2">
                <h5 class="modal-title m-0">Add</h5>
                <button type="button" class="close" id="btnModalClose" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">1. Opening stocks of the Ore at concentrator/ plant</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="OS_qty" id="OS_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" name="OS_grade" id="OS_grade" type="text">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">2. Ore received from the mine</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="OreReceived_qty" id="OreReceived_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="OreReceived_grade" id="OreReceived_grade">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">3. Concentrates  Obtained</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_qty" id="Concentrates_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_grade" id="Concentrates_grade">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Value (₹)</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_Value" id="Concentrates_Value">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">4. Ore treated</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" onkeydown="quantity_Onchange(this,event);" name="OreTreated_qty" id="OreTreated_qty">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="OreTreated_grade" id="OreTreated_grade">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">5. Tailings</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Tailings_Qty" id="Tailings_Qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Tailing_grade" id="Tailing_grade">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">6. Closing stocks of concentrates at the concentrator / plant</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label ">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="CS_qty" id="CS_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="CS_grade" id="CS_grade">
                        </div>
                    </div>
                </div>

                <a class="btn btn-primary btn-md ml-0" id="btnSubmitModal" href="javascript:void(0)">Submit</a>
                <a class="btn btn-primary btn-md ml-0" onclick="ClearRecoveriesConcentrator();" href="javascript:void(0)">Cancel</a>
            </div>


        </div>

    </div>
</div>

<div class="modal fade alert-modal1" tabindex="-1" id="modal1" role="dialog" aria-labelledby="alertModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header p-2">
                <h5 class="modal-title m-0">Add</h5>
                <button type="button" class="close" id="btnModal1Close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">1. Opening Stocks of the concentrates at the smelter /plant</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="OS_qty" id="OS_qty1" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="OS_grade" id="OS_grade1">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">2. Concentrates received from concentrator/plant</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentratesreceived_qty" id="Concentratesreceived_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentratesreceived_grade" id="Concentratesreceived_grade">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">3. Concentrates received from other sources (specify)</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_othersources_qty" id="Concentrates_othersources_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_othersources_grade" id="Concentrates_othersources_grade">
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">4. Concentrates sold (if any)</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_sold_qty" id="Concentrates_sold_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_sold_grade" id="Concentrates_sold_grade">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">5. Concentrates treated</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_treated_qty" id="Concentrates_treated_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Concentrates_treated_grade" id="Concentrates_treated_grade">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">6. Closing stocks of concentrate at the Smelter/Plant</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label ">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="CS_qty" id="CS_qty1" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="CS_grade" id="CS_grade1">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">7. Metals(*) recovered (specify)</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label ">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Metalsrecovered_qty" id="Metalsrecovered_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Metalsrecovered_grade" id="Metalsrecovered_grade">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Value (₹)</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Metalsrecovered_Value" id="Metalsrecovered_Value" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">8. Other by-products, if any,recovered</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label ">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Other_byproducts_qty" id="Other_byproducts_qty" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Metal content/ grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Other_byproducts_grade" id="Other_byproducts_grade">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Value (₹)</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Other_byproducts_Value" id="Other_byproducts_Value" onkeydown="quantity_Onchange(this,event);">
                        </div>
                    </div>
                </div>
                <a id="btnSubmitModal1" class="btn btn-primary btn-md ml-0" href="javascript:void(0)">Submit</a>
                <a onclick="ClearRecoverySmelter();" class="btn btn-primary btn-md ml-0" href="javascript:void(0)">Cancel</a>
            </div>
        </div>

    </div>
</div>

<div id="modal2" class="modal fade alert-modal2" tabindex="-1" role="dialog" aria-labelledby="alertModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header p-2">
                <h5 class="modal-title m-0">Add</h5>
                <button type="button" id="btnCloseModal2" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="row">
                    <label class="col-sm-3 col-form-label">Metal/ Product <span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" name="Product" id="Product" type="text">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <select id="MineralGradeId6" onchange="GetDispatche();" name="MineralGradeId6" class="form-control form-control-sm searchableselect">
                            </select>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">Opening stocks of Metals/ Products</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" name="OS_Qty" id="OS_Qty" type="text">
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">Metals/Products sold</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" onkeydown="quantity_Onchange(this,event);" type="text" name="Sold_Qty" id="Sold_Qty" readonly="readonly">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Value</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="Sold_Value" id="Sold_Value">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Place of sale</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="PlaceOfSale" id="PlaceOfSale">
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">Closing stocks of Metals/Products</h6>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-3 col-form-label">Quantity<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input class="form-control" type="text" name="CS_Qty" id="CS_Qty" onkeydown="quantity_Onchange(this,event);" readonly="readonly">
                        </div>
                    </div>

                </div>

                <a onclick="SaveSaleProduct();" class="btn btn-primary btn-md ml-0" href="javascript:void(0)">Submit</a>
                <a onclick="ClearSaleProduct();" class="btn btn-primary btn-md ml-0" href="javascript:void(0)">Cancel</a>

            </div>


        </div>

    </div>
</div>

<div id="modal3" class="modal fade alert-modal3" tabindex="-1" role="dialog" aria-labelledby="alertModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header p-2">
                <h5 class="modal-title m-0">Add</h5>
                <button id="btnCloseModal3" type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="row">
                    <label class="col-sm-3 col-form-label">Mineral Form  <span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <select id="MineralNatureId" name="MineralNatureId" class="form-control form-control-sm searchableselect">
                            </select>
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Mineral Grade</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <select id="MINERALGRADEID" name="MINERALGRADEID" class="form-control form-control-sm searchableselect">
                            </select>
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Nature of Dispatch<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <select id="NatureOfDispatch" name="NatureOfDispatch" class="form-control form-control-sm searchableselect">
                            </select>
                        </div>
                    </div>
                </div>



                <div class="row">
                    <div class="col-sm-12">
                        <h6 class="text-brown">For Domestic Purposes</h6>
                    </div>
                </div>
                <div class="row" id="IdDivDomestic">
                    <label class="col-sm-3 col-form-label">Registration No<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input id="RegistrationNo" name="RegistrationNo" class="form-control" type="text">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Consignee name</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <select id="Consignee" name="Consignee" class="form-control form-control-sm searchableselect">
                            </select>
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Quantity</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input id="DomesticPurposes_Quantity" name="DomesticPurposes_Quantity" class="form-control" type="text">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Sale Value (₹)</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input id="SaleValue" name="SaleValue" class="form-control" type="text">
                        </div>
                    </div>

                </div>
                <div class="row" id="IdDivExport">
                    <label class="col-sm-3 col-form-label">Country<span class="text-danger">*</span></label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input id="Country" name="Country" class="form-control" type="text">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">Quantity</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input id="Export_Quantity" name="Export_Quantity" class="form-control" type="text">
                        </div>
                    </div>
                    <label class="col-sm-3 col-form-label">F.O.B Value (₹)</label>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <input id="FOBValue" name="FOBValue" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <a id="btnSubmitModal3" class="btn btn-primary btn-md ml-0" href="javascript:void(0)">Submit</a>
                <a onclick="ClearSaleDispatch();" class="btn btn-primary btn-md ml-0" href="javascript:void(0)">Cancel</a>
            </div>


        </div>

    </div>
</div>
<!-- alert 2-->

<script>

    $(document).ready(function () {
        loadNavigation('PartSixH2', 'glereturn', 'plyearetcop', 'tl', 'E-Return Non-coal', 'Yearly Return Copper', '');
        $('.searchableselect').searchableselect();

        GetRecoveries();
        GetRecoverySmelter();
        GetMineralGrade();
        G2_getPreviousYearData();
        GetSaleProduct();
        GetMineralForm();
        GetMineralGradePart6();
        GetNatureOfDispatch();
        GetPurchaserConsignee();
        $('#IdDivExport').hide();
        $('#IdDivDomestic').show();
        GetSaleDispatch();
        //--------------Production and Stocks-----------------
        if (parseFloat(@Model.objProduction.Development_OS_Qty) > 0) {
            $('#objProduction_Development_OS_Qty').val(@Model.objProduction.Development_OS_Qty);
            $('#objProduction_Development_OS_Qty').attr("readonly", "readonly");
        }
        if (parseFloat(@Model.objProduction.Stoping_OS_Qty) > 0) {
            $('#objProduction_Stoping_OS_Qty').val(@Model.objProduction.Stoping_OS_Qty);
            $('#objProduction_Stoping_OS_Qty').attr("readonly", "readonly");
        }
        if (parseFloat(@Model.objProduction.OpenCastWork_OS_Qty) > 0) {
            $('#objProduction_OpenCastWork_OS_Qty').val(@Model.objProduction.OpenCastWork_OS_Qty);
            $('#objProduction_OpenCastWork_OS_Qty').attr("readonly", "readonly");
        }
        //---------------End Here------------
        //----------------Details of Deduction----------
        if ($('#hdnobjDeduction_CExMineSale').val()== "Yes") {
            $('input:radio[id=CExMineSaleYes]').prop('checked', true);
        }
        else {
            $('input:radio[id=CExMineSaleNo]').prop('checked', true);
        }


        if ($('#hdnobjDeduction_ex_mineSale').val()== "Yes") {
            $('input:radio[id=ex_mineYes]').prop('checked', true);
        }
        //---------------End Here----------------
        $("#objProduction_Development_CS_Qty").focusout(function () {
            var OB = $("#objProduction_Development_OS_Qty").val();
            if (OB == "") {
                OB = 0;
            }
            var PRD = $("#objProduction_Development_Production_Qty ").val();
            if (PRD == "") {
                PRD = 0;
            }
            var CB = parseFloat(OB) + parseFloat(PRD);
            var CS = $("#objProduction_Development_CS_Qty").val();
            if (CS > CB) {
                alert("Closing stock should be less then or equal to Opening Stock + Production !");
                $("#objProduction_Development_CS_Qty").val(0);
                $("#objProduction_Total_CS_Qty").val(0);

            }

        })

        $("#objProduction_Stoping_CS_Qty").focusout(function () {
            var OB = $("#objProduction_Stoping_OS_Qty").val();
            if (OB == "") {
                OB = 0;
            }
            var PRD = $("#objProduction_Stoping_Production_Qty ").val();
            if (PRD == "") {
                PRD = 0;
            }
            var CB = parseFloat(OB) + parseFloat(PRD);
            var CS = $("#objProduction_Stoping_CS_Qty").val();
            if (CS > CB) {
                alert("Closing stock should be less then or equal to Opening Stock + Production !");
                $("#objProduction_Stoping_CS_Qty").val(0);
                $("#objProduction_Total_CS_Qty").val(0);
            }

        })

        $("#objProduction_OpenCastWork_CS_Qty").focusout(function () {
            var OB = $("#objProduction_OpenCastWork_OS_Qty").val();
            if (OB == "") {
                OB = 0;
            }
            var PRD = $("#objProduction_OpenCastWork_Production_Qty ").val();
            if (PRD == "") {
                PRD = 0;
            }
            var CB = parseFloat(OB) + parseFloat(PRD);
            var CS = $("#objProduction_OpenCastWork_CS_Qty").val();
            if (CS > CB) {
                alert("Closing stock should be less then or equal to Opening Stock + Production !");
                $("#objProduction_OpenCastWork_CS_Qty").val(0);
                $("#objProduction_Total_CS_Qty").val(0);
            }

        })

        $("#CExMineSaleYes").click(function () {
            debugger;
            $("#objDeduction_Amount1").val("N/A");
            $("#objDeduction_Amount2").val("N/A");
            $("#objDeduction_Amount3").val("N/A");
            $("#objDeduction_Amount4").val("N/A");
            $("#objDeduction_Amount5").val("N/A");
            $("#objDeduction_Amount6").val("N/A");
            $("#objDeduction_Amount7").val("N/A");
            $("#objDeduction_TotalAmount").val("N/A");

            $("#objDeduction_Remarks1").val("");
            $("#objDeduction_Remarks2").val("");
            $("#objDeduction_Remarks3").val("");
            $("#objDeduction_Remarks4").val("");
            $("#objDeduction_Remarks5").val("");
            $("#objDeduction_Remarks6").val("");
            $("#objDeduction_Remarks7").val("");
            $('#objDeduction_Amount1').attr('readonly', 'true');
            $('#objDeduction_Amount2').attr('readonly', 'true');
            $('#objDeduction_Amount3').attr('readonly', 'true');
            $('#objDeduction_Amount4').attr('readonly', 'true');
            $('#objDeduction_Amount5').attr('readonly', 'true');
            $('#objDeduction_Amount6').attr('readonly', 'true');
            $('#objDeduction_Amount7').attr('readonly', 'true');
            $("#objDeduction_TotalAmount").attr('readonly', 'true');

            $('#objDeduction_Remarks1').attr('readonly', 'true');
            $('#objDeduction_Remarks2').attr('readonly', 'true');
            $('#objDeduction_Remarks3').attr('readonly', 'true');
            $('#objDeduction_Remarks4').attr('readonly', 'true');
            $('#objDeduction_Remarks5').attr('readonly', 'true');
            $('#objDeduction_Remarks6').attr('readonly', 'true');
            $('#objDeduction_Remarks7').attr('readonly', 'true');

        })

        $("#ex_mineYes").click(function () {
            $("#objDeduction_Amount1").val("N/A");
            $("#objDeduction_Amount2").val("N/A");
            $("#objDeduction_Amount3").val("N/A");
            $("#objDeduction_Amount4").val("N/A");
            $("#objDeduction_Amount5").val("N/A");
            $("#objDeduction_Amount6").val("N/A");
            $("#objDeduction_Amount7").val("N/A");
            $("#objDeduction_TotalAmount").val("N/A");

            $("#objDeduction_Remarks1").val("");
            $("#objDeduction_Remarks2").val("");
            $("#objDeduction_Remarks3").val("");
            $("#objDeduction_Remarks4").val("");
            $("#objDeduction_Remarks5").val("");
            $("#objDeduction_Remarks6").val("");
            $("#objDeduction_Remarks7").val("");
            $('#objDeduction_Amount1').attr('readonly', 'true');
            $('#objDeduction_Amount2').attr('readonly', 'true');
            $('#objDeduction_Amount3').attr('readonly', 'true');
            $('#objDeduction_Amount4').attr('readonly', 'true');
            $('#objDeduction_Amount5').attr('readonly', 'true');
            $('#objDeduction_Amount6').attr('readonly', 'true');
            $('#objDeduction_Amount7').attr('readonly', 'true');
            $("#objDeduction_TotalAmount").attr('readonly', 'true');

            $('#objDeduction_Remarks1').attr('readonly', 'true');
            $('#objDeduction_Remarks2').attr('readonly', 'true');
            $('#objDeduction_Remarks3').attr('readonly', 'true');
            $('#objDeduction_Remarks4').attr('readonly', 'true');
            $('#objDeduction_Remarks5').attr('readonly', 'true');
            $('#objDeduction_Remarks6').attr('readonly', 'true');
            $('#objDeduction_Remarks7').attr('readonly', 'true');

        })

        $("#CExMineSaleNo").click(function () {
            if ($("input[name='objDeduction.ex_mineSale']:checked").val() == 'Yes') {
                $("#objDeduction_Amount1").val("N/A");
                $("#objDeduction_Amount2").val("N/A");
                $("#objDeduction_Amount3").val("N/A");
                $("#objDeduction_Amount4").val("N/A");
                $("#objDeduction_Amount5").val("N/A");
                $("#objDeduction_Amount6").val("N/A");
                $("#objDeduction_Amount7").val("N/A");
                $("#objDeduction_TotalAmount").val("N/A");

                $("#objDeduction_Remarks1").val("");
                $("#objDeduction_Remarks2").val("");
                $("#objDeduction_Remarks3").val("");
                $("#objDeduction_Remarks4").val("");
                $("#objDeduction_Remarks5").val("");
                $("#objDeduction_Remarks6").val("");
                $("#objDeduction_Remarks7").val("");
                $('#objDeduction_Amount1').attr('readonly', 'true');
                $('#objDeduction_Amount2').attr('readonly', 'true');
                $('#objDeduction_Amount3').attr('readonly', 'true');
                $('#objDeduction_Amount4').attr('readonly', 'true');
                $('#objDeduction_Amount5').attr('readonly', 'true');
                $('#objDeduction_Amount6').attr('readonly', 'true');
                $('#objDeduction_Amount7').attr('readonly', 'true');
                $("#objDeduction_TotalAmount").attr('readonly', 'true');

                $('#objDeduction_Remarks1').attr('readonly', 'true');
                $('#objDeduction_Remarks2').attr('readonly', 'true');
                $('#objDeduction_Remarks3').attr('readonly', 'true');
                $('#objDeduction_Remarks4').attr('readonly', 'true');
                $('#objDeduction_Remarks5').attr('readonly', 'true');
                $('#objDeduction_Remarks6').attr('readonly', 'true');
                $('#objDeduction_Remarks7').attr('readonly', 'true');
            }
            else {
                $("#objDeduction_Amount1").val("");
                $("#objDeduction_Amount2").val("");
                $("#objDeduction_Amount3").val("");
                $("#objDeduction_Amount4").val("");
                $("#objDeduction_Amount5").val("");
                $("#objDeduction_Amount6").val("");
                $("#objDeduction_Amount7").val("");
                $("#objDeduction_TotalAmount").val("");
                $('#objDeduction_Amount1').removeAttr("readonly");
                $('#objDeduction_Amount2').removeAttr("readonly");
                $('#objDeduction_Amount3').removeAttr("readonly");
                $('#objDeduction_Amount4').removeAttr("readonly");
                $('#objDeduction_Amount5').removeAttr("readonly");
                $('#objDeduction_Amount6').removeAttr("readonly");
                $('#objDeduction_Amount7').removeAttr("readonly");

                $('#objDeduction_Remarks1').removeAttr("readonly");
                $('#objDeduction_Remarks2').removeAttr("readonly");
                $('#objDeduction_Remarks3').removeAttr("readonly");
                $('#objDeduction_Remarks4').removeAttr("readonly");
                $('#objDeduction_Remarks5').removeAttr("readonly");
                $('#objDeduction_Remarks6').removeAttr("readonly");
                $('#objDeduction_Remarks7').removeAttr("readonly");

            }
        })

        $("#ex_mineNo").click(function () {
            if ($("input[name='objDeduction.CExMineSale']:checked").val() == 'Yes') {
                $("#objDeduction_Amount1").val("N/A");
                $("#objDeduction_Amount2").val("N/A");
                $("#objDeduction_Amount3").val("N/A");
                $("#objDeduction_Amount4").val("N/A");
                $("#objDeduction_Amount5").val("N/A");
                $("#objDeduction_Amount6").val("N/A");
                $("#objDeduction_Amount7").val("N/A");
                $("#objDeduction_TotalAmount").val("N/A");

                $("#objDeduction_Remarks1").val("");
                $("#objDeduction_Remarks2").val("");
                $("#objDeduction_Remarks3").val("");
                $("#objDeduction_Remarks4").val("");
                $("#objDeduction_Remarks5").val("");
                $("#objDeduction_Remarks6").val("");
                $("#objDeduction_Remarks7").val("");
                $('#objDeduction_Amount1').attr('readonly', 'true');
                $('#objDeduction_Amount2').attr('readonly', 'true');
                $('#objDeduction_Amount3').attr('readonly', 'true');
                $('#objDeduction_Amount4').attr('readonly', 'true');
                $('#objDeduction_Amount5').attr('readonly', 'true');
                $('#objDeduction_Amount6').attr('readonly', 'true');
                $('#objDeduction_Amount7').attr('readonly', 'true');
                $("#objDeduction_TotalAmount").attr('readonly', 'true');

                $('#objDeduction_Remarks1').attr('readonly', 'true');
                $('#objDeduction_Remarks2').attr('readonly', 'true');
                $('#objDeduction_Remarks3').attr('readonly', 'true');
                $('#objDeduction_Remarks4').attr('readonly', 'true');
                $('#objDeduction_Remarks5').attr('readonly', 'true');
                $('#objDeduction_Remarks6').attr('readonly', 'true');
                $('#objDeduction_Remarks7').attr('readonly', 'true');
            }
            else {
                $("#objDeduction_Amount1").val("");
                $("#objDeduction_Amount2").val("");
                $("#objDeduction_Amount3").val("");
                $("#objDeduction_Amount4").val("");
                $("#objDeduction_Amount5").val("");
                $("#objDeduction_Amount6").val("");
                $("#objDeduction_Amount7").val("");
                $("#objDeduction_TotalAmount").val("");
                $('#objDeduction_Amount1').removeAttr("readonly");
                $('#objDeduction_Amount2').removeAttr("readonly");
                $('#objDeduction_Amount3').removeAttr("readonly");
                $('#objDeduction_Amount4').removeAttr("readonly");
                $('#objDeduction_Amount5').removeAttr("readonly");
                $('#objDeduction_Amount6').removeAttr("readonly");
                $('#objDeduction_Amount7').removeAttr("readonly");

                $('#objDeduction_Remarks1').removeAttr("readonly");
                $('#objDeduction_Remarks2').removeAttr("readonly");
                $('#objDeduction_Remarks3').removeAttr("readonly");
                $('#objDeduction_Remarks4').removeAttr("readonly");
                $('#objDeduction_Remarks5').removeAttr("readonly");
                $('#objDeduction_Remarks6').removeAttr("readonly");
                $('#objDeduction_Remarks7').removeAttr("readonly");

            }
        })




    });

    //--------------------------Production and Stocks Calculation-------------------
    function TextChangeOpeningstocksQty() {
        var Dev = $("#objProduction_Development_OS_Qty").val();
        var Dev2 = $("#objProduction_Development_Production_Qty").val();
        var Dev3 = $("#objProduction_Development_CS_Qty").val();

        Dev2 = Dev2 || 0;

        if (Dev == "") {
            Dev = 0;
        }
        var Stop = $("#objProduction_Stoping_OS_Qty").val();
        var Stop2 = $("#objProduction_Stoping_Production_Qty").val();
        var Stop3 = $("#objProduction_Stoping_CS_Qty").val();
        Stop2 = Stop2 || 0;

        if (Stop == "") {
            Stop = 0;
        }
        var OpenCast = $("#objProduction_OpenCastWork_OS_Qty").val();
        var OpenCast2 = $("#objProduction_OpenCastWork_Production_Qty").val();
        var OpenCast3 = $("#objProduction_OpenCastWork_CS_Qty").val();
        OpenCast2 = OpenCast2 || 0;

        if (OpenCast == "") {
            OpenCast = 0;
        }

        $("#objProduction_Development_CS_Qty").val(Number(Dev) + Number(Dev2));
        $("#objProduction_Stoping_CS_Qty").val(Number(Stop) + Number(Stop2));
        $("#objProduction_OpenCastWork_CS_Qty").val(Number(OpenCast) + Number(OpenCast2));

        var SUM = Number(Dev) + Number(Stop) + Number(OpenCast);
        $("#objProduction_Total_OS_Qty").val(SUM);
        $("#objProduction_Total_Production_Qty").val(Number(Dev2) + Number(Stop2) + Number(OpenCast2));


        $("#objProduction_Total_CS_Qty").val(Number($("#objProduction_Total_OS_Qty").val()) + Number($("#objProduction_Total_Production_Qty").val()));
    }

    function TextChangeClosingstocksQty() {
        var Dev = $("#objProduction_Development_CS_Qty").val();
        if (Dev == "") {
            Dev = 0;
        }
        var Stop = $("#objProduction_Stoping_CS_Qty").val();
        if (Stop == "") {
            Stop = 0;
        }
        var OpenCast = $("#objProduction_OpenCastWork_CS_Qty").val();
        if (OpenCast == "") {
            OpenCast = 0;
        }
        var SUM = Number(Dev) + Number(Stop) + Number(OpenCast);
        $("#objProduction_Total_CS_Qty").val(SUM);
    }
    //--------------------------End Here--------------------------------
    //--------------------------Details of Deduction--------------
    function TextChange() {

        var T = $("#objDeduction_TotalAmount").val();
        if (T == "") {
            T = 0;
        }
        T = 0;
        for (var i = 1; i <= 7; i++) {
            var amt = "#objDeduction_Amount" + i;
            if ($(amt).val() != "") {

                T = Number(T) + Number($(amt).val());
                $("#objDeduction_TotalAmount").val(T);
            }
        }
    }
    //-------------------------End Here--------------------------------
    //Save Recoveries at the Concentrators/Mill/Plant
    function ValidateRecoveriesConcentrator() {
        if ($('#OS_qty').val() == "") {
            alert("Quantity Required");
            $('#OS_qty').focus();
            return false;
        }

        if ($('#OS_grade').val() == "") {
            alert('Grade Required');
            $('#OS_grade').focus();
            return false;
        }

        if ($('#OreReceived_qty').val() == "") {
            alert('Quantity Required');
            $('#OreReceived_qty').focus();
            return false;
        }

        if ($('#OreReceived_grade').val() == "") {
            alert('Grade Required');
            $('#OreReceived_grade').focus();
            return false;
        }

        if ($('#Concentrates_qty').val() == "") {
            alert('Quantity Required');
            $('#Concentrates_qty').focus();
            return false;
        }

        if ($('#Concentrates_grade').val() == "") {
            alert('Grade Required');
            $('#Concentrates_grade').focus();
            return false;
        }

        if ($('#Concentrates_Value').val() == "") {
            alert('Value Required');
            $('#Concentrates_Value').focus();
            return false;
        }

        if ($('#OreTreated_qty').val() == "") {
            alert('Quantity Required');
            $('#OreTreated_qty').focus();
            return false;
        }

        if ($('#OreTreated_grade').val() == "") {
            alert('Grade Required');
            $('#OreTreated_grade').focus();
            return false;
        }

        if ($('#Tailings_Qty').val() == "") {
            alert('Quantity Required');
            $('#Tailings_Qty').focus();
            return false;
        }

        if ($('#Tailing_grade').val() == "") {
            alert('Grade Required');
            $('#Tailing_grade').focus();
            return false;
        }

        if ($('#CS_qty').val() == "") {
            alert('Quantity Required');
            $('#CS_qty').focus();
            return false;
        }

        if ($('#CS_grade').val() == "") {
            alert('Grade Required');
            $('#CS_grade').focus();
            return false;
        }

        return true;
    }

    function SaveRecoveriesConcentrator() {
        if (ValidateRecoveriesConcentrator() == true) {
            $.ajax({
                url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/AddRecoveries",
                data: {
                    'CS_grade': $('#CS_grade').val(), 'CS_qty': $('#CS_qty').val(), 'Concentrates_Value': $('#Concentrates_Value').val(),
                    'Concentrates_grade': $('#Concentrates_grade').val(), 'Concentrates_qty': $('#Concentrates_qty').val(),
                    'OS_grade': $('#OS_grade').val(), 'OS_qty': $('#OS_qty').val(), 'OreReceived_grade': $('#OreReceived_grade').val(),
                    'OreReceived_qty': $('#OreReceived_qty').val(), 'OreTreated_grade': $('#OreTreated_grade').val(),
                    'OreTreated_qty': $('#OreTreated_qty').val(), 'Tailing_grade': $('#Tailing_grade').val(),
                    'Tailings_Qty': $('#Tailings_Qty').val(), 'Year': $('#Year').val(), 'MineralId': $('#objProduction_MineralId2').val()
                },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    if (data == "1") {
                        alert('Record Created Successfully');
                        GetRecoveries();
                        ClearRecoveriesConcentrator();
                    }
                    else if (data == "2") {
                        alert("Record Already Exist.");
                        GetRecoveries();
                        ClearRecoveriesConcentrator();
                    }
                    else {
                        alert("Some error occured.Please try after some time");
                    }
                },
                error: function (err) {
                    alert(err.responseText);
                }
            });
        }
    }

    function UpdateRecoveriesConcentrator() {
        if (ValidateRecoveriesConcentrator() == true) {
            $.ajax({
                url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/UpdateRecoveries",
                data: {
                    'Recoverie_Id': $('#hdnrecoverie_Id').val(), 'CS_grade': $('#CS_grade').val(), 'CS_qty': $('#CS_qty').val(), 'Concentrates_Value': $('#Concentrates_Value').val(),
                    'Concentrates_grade': $('#Concentrates_grade').val(), 'Concentrates_qty': $('#Concentrates_qty').val(),
                    'OS_grade': $('#OS_grade').val(), 'OS_qty': $('#OS_qty').val(), 'OreReceived_grade': $('#OreReceived_grade').val(),
                    'OreReceived_qty': $('#OreReceived_qty').val(), 'OreTreated_grade': $('#OreTreated_grade').val(),
                    'OreTreated_qty': $('#OreTreated_qty').val(), 'Tailing_grade': $('#Tailing_grade').val(),
                    'Tailings_Qty': $('#Tailings_Qty').val(), 'Year': $('#Year').val(), 'MineralId': $('#objProduction_MineralId2').val()
                },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    if (data == "1") {
                        alert('Record Modified Successfully');
                        GetRecoveries();
                        ClearRecoveriesConcentrator();
                    }
                    else if (data == "2") {
                        alert("Record Already Exist.");
                        GetRecoveries();
                        ClearRecoveriesConcentrator();
                    }
                    else {
                        alert("Some error occured.Please try after some time");
                    }
                },
                error: function (err) {
                    alert(err.responseText);
                }
            });
        }
    }

    function DeleteRecoveriesConcentrator(par) {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/DeleteRecoveries",
            data: { 'Recoverie_Id': par },
            dataType: 'json',
            type: 'post',
            success: function (data) {
                if (data == "1") {
                    alert('Record Deleted Successfully');
                    GetRecoveries();
                }
                else {
                    alert('Transaction Failed.Please Try after some time!');
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    $('#btnSubmitModal').click(function () {
        debugger;
        if ($('#btnSubmitModal').text() == "Update") {
            UpdateRecoveriesConcentrator();
        }
        else {
            SaveRecoveriesConcentrator();
        }

    });

    function ClearRecoveriesConcentrator() {
        $('#OS_qty').val('');
        $('#OS_grade').val('');
        $('#OreReceived_grade').val('');
        $('#OreReceived_qty').val('');
        $('#Concentrates_qty').val('');
        $('#Concentrates_grade').val('');
        $('#Concentrates_Value').val('');
        $('#OreTreated_qty').val('');
        $('#OreTreated_grade').val('');
        $('#Tailings_Qty').val('');
        $('#Tailing_grade').val('');
        $('#CS_qty').val('');
        $('#CS_grade').val('');
        $('#hdnrecoverie_Id').val('');
        $('#btnSubmitModal').text('Submit');
        $('#modal').modal('hide');
    }

    $('#IdAdd').click(function () {
        ClearRecoveriesConcentrator();
    });

    $('#btnModalClose').click(function () {
        ClearRecoveriesConcentrator();
    });

    function GetRecoveries() {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetRecoveries",
            data: { "Year": $('#Year').val() },
            dataType: 'json',
            type: 'post',
            success: function (data) {
                $('#datatable tbody').html("");
                if (data.length > 0) {
                    $.each(data, function (ind, item) {
                        $('#datatable tbody').append(
                            "<tr>" +
                            "<td>" + item.mineralName + "</td>" +
                            "<td>" + item.oS_qty + "</td>" +
                            "<td>" + item.oS_grade + "</td>" +
                            "<td>" + item.oreReceived_qty + "</td>" +
                            "<td>" + item.oreReceived_grade + "</td>" +
                            "<td>" + item.oreTreated_qty + "</td>" +
                            "<td>" + item.oreTreated_grade + "</td>" +
                            "<td>" + item.concentrates_qty + "</td>" +
                            "<td>" + item.concentrates_grade + "</td>" +
                            "<td>" + item.concentrates_Value + "</td>" +
                            "<td>" + item.tailings_Qty + "</td>" +
                            "<td>" + item.tailing_grade + "</td>" +
                            "<td>" + item.cS_qty + "</td>" +
                            "<td>" + item.cS_grade + "</td>" +
                            "<td class='noprint text-center'>" +
                            "<a onclick='EditRecoveryConcentrator(this.parentNode.parentNode.rowIndex-1,this.id);' id='" + item.recoverie_Id + "' data-toggle='modal' data-target='.alert-modal' class='btn-floating btn-outline-primary btn-sm' data-placement='top' title='Edit'><i class='icon-pencil-alt-solid'></i></a>" +
                            "<a onclick='DeleteRecoveriesConcentrator(this.id);' id='" + item.recoverie_Id + "' href='javascript:void(0);' class='btn-floating btn-outline-danger btn-sm' data-placement='top' title='Delete'><i class='icon-trash-alt-solid'></i></a>" +
                            "</td>" +
                            "</tr>"
                        );
                    });

                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    function EditRecoveryConcentrator(ind, par) {
        debugger;
        ind = parseInt(ind) - 1;
        $('#hdnrecoverie_Id').val(par);
        $('#OS_qty').val(document.getElementById("datatable").children[1].children[ind].children[1].innerHTML);
        $('#OS_grade').val(document.getElementById("datatable").children[1].children[ind].children[2].innerHTML);
        $('#OreReceived_qty').val(document.getElementById("datatable").children[1].children[ind].children[3].innerHTML);
        $('#OreReceived_grade').val(document.getElementById("datatable").children[1].children[ind].children[4].innerHTML);
        $('#OreTreated_qty').val(document.getElementById("datatable").children[1].children[ind].children[5].innerHTML);
        $('#OreTreated_grade').val(document.getElementById("datatable").children[1].children[ind].children[6].innerHTML);
        $('#Concentrates_qty').val(document.getElementById("datatable").children[1].children[ind].children[7].innerHTML);
        $('#Concentrates_grade').val(document.getElementById("datatable").children[1].children[ind].children[8].innerHTML);
        $('#Concentrates_Value').val(document.getElementById("datatable").children[1].children[ind].children[9].innerHTML);
        $('#Tailings_Qty').val(document.getElementById("datatable").children[1].children[ind].children[10].innerHTML);
        $('#Tailing_grade').val(document.getElementById("datatable").children[1].children[ind].children[11].innerHTML);
        $('#CS_qty').val(document.getElementById("datatable").children[1].children[ind].children[12].innerHTML);
        $('#CS_grade').val(document.getElementById("datatable").children[1].children[ind].children[13].innerHTML);

        $('#btnSubmitModal').text('Update');

    }
    //------------End Here---------------------------
    //-----------------------Recovery at the Smelter/Plant/Mill---------------
    function ValidateRecoverySmelter() {
        if ($('#OS_qty1').val() == "") {
            alert("Quantity Required");
            $('#OS_qty1').focus();
            return false;
        }
        if ($('#OS_grade1').val() == "") {
            alert("Grade Required");
            $('#OS_grade1').focus();
            return false;
        }

        if ($('#Concentratesreceived_qty').val() == "") {
            alert("Quantity Required");
            $('#Concentratesreceived_qty').focus();
            return false;
        }
        if ($('#Concentratesreceived_grade').val() == "") {
            alert("Grade Required");
            $('#Concentratesreceived_grade').focus();
            return false;
        }

        if ($('#Concentrates_othersources_qty').val() == "") {
            alert("Quantity Required");
            $('#Concentrates_othersources_qty').focus();
            return false;
        }
        if ($('#Concentrates_othersources_grade').val() == "") {
            alert("Grade Required");
            $('#Concentrates_othersources_grade').focus();
            return false;
        }

        if ($('#Concentrates_sold_qty').val() == "") {
            alert("Quantity Required");
            $('#Concentrates_sold_qty').focus();
            return false;
        }
        if ($('#Concentrates_sold_grade').val() == "") {
            alert("Grade Required");
            $('#Concentrates_sold_grade').focus();
            return false;
        }

        if ($('#Concentrates_treated_qty').val() == "") {
            alert("Quantity Required");
            $('#Concentrates_treated_qty').focus();
            return false;
        }
        if ($('#Concentrates_treated_grade').val() == "") {
            alert("Grade Required");
            $('#Concentrates_treated_grade').focus();
            return false;
        }

        if ($('#CS_qty1').val() == "") {
            alert("Quantity Required");
            $('#CS_qty1').focus();
            return false;
        }
        if ($('#CS_grade1').val() == "") {
            alert("Grade Required");
            $('#CS_grade1').focus();
            return false;
        }

        if ($('#Metalsrecovered_qty').val() == "") {
            alert("Quantity Required");
            $('#Metalsrecovered_qty').focus();
            return false;
        }
        if ($('#Metalsrecovered_grade').val() == "") {
            alert("Grade Required");
            $('#Metalsrecovered_grade').focus();
            return false;
        }
        if ($('#Metalsrecovered_Value').val() == "") {
            alert("Value Required");
            $('#Metalsrecovered_Value').focus();
            return false;
        }

        if ($('#Other_byproducts_qty').val() == "") {
            alert("Quantity Required");
            $('#Other_byproducts_qty').focus();
            return false;
        }
        if ($('#Other_byproducts_grade').val() == "") {
            alert("Grade Required");
            $('#Other_byproducts_grade').focus();
            return false;
        }
        if ($('#Other_byproducts_Value').val() == "") {
            alert("Value Required");
            $('#Other_byproducts_Value').focus();
            return false;
        }
        return true;
    }

    function SaveRecoverySmelter() {
        if (ValidateRecoverySmelter() == true) {

            $.ajax({
                url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/AddRecoveriesSmelter",
                data: {
                    'CS_grade': $('#CS_grade1').val(), 'CS_qty': $('#CS_qty1').val(), 'Concentrates_othersources_grade': $('#Concentrates_othersources_grade').val(),
                    'Concentrates_othersources_qty': $('#Concentrates_othersources_qty').val(), 'Concentrates_sold_grade': $('#Concentrates_sold_grade').val(), 'Concentrates_sold_qty': $('#Concentrates_sold_qty').val(),
                    'Concentrates_treated_grade': $('#Concentrates_treated_grade').val(), 'Concentrates_treated_qty': $('#Concentrates_treated_qty').val(), 'Concentratesreceived_grade': $('#Concentratesreceived_grade').val(),
                    'Concentratesreceived_qty': $('#Concentratesreceived_qty').val(), 'Metalsrecovered_Value': $('#Metalsrecovered_Value').val(), 'Metalsrecovered_grade': $('#Metalsrecovered_grade').val(),
                    'Metalsrecovered_qty': $('#Metalsrecovered_qty').val(), 'OS_grade': $('#OS_grade1').val(), 'OS_qty': $('#OS_qty1').val(), 'Other_byproducts_Value': $('#Other_byproducts_Value').val(),
                    'Other_byproducts_grade': $('#Other_byproducts_grade').val(), 'Other_byproducts_qty': $('#Other_byproducts_qty').val(), 'Year': $('#Year').val(), 'MineralId': $('#objProduction_MineralId2').val()
                },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    if (data == "1") {
                        alert('Record Created Successfully');
                        GetRecoverySmelter();
                        ClearRecoverySmelter();
                    }
                    else if (data == "2") {
                        alert("Record Already Exist.");
                        GetRecoverySmelter();
                        ClearRecoverySmelter();
                    }
                    else {
                        alert("Some error occured.Please try after some time");
                    }
                },
                error: function (err) {
                    alert(err.responseText);
                }
            });
        }
    }

    function UpdateRecoverySmelter() {
        if (ValidateRecoverySmelter() == true) {

            $.ajax({
                url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/UpdateRecoveriesSmelter",
                data: {
                    'Recovery_atSmelter_Id': $('#hdnrRecovery_atSmelter_Id').val(), 'CS_grade': $('#CS_grade1').val(), 'CS_qty': $('#CS_qty1').val(), 'Concentrates_othersources_grade': $('#Concentrates_othersources_grade').val(),
                    'Concentrates_othersources_qty': $('#Concentrates_othersources_qty').val(), 'Concentrates_sold_grade': $('#Concentrates_sold_grade').val(), 'Concentrates_sold_qty': $('#Concentrates_sold_qty').val(),
                    'Concentrates_treated_grade': $('#Concentrates_treated_grade').val(), 'Concentrates_treated_qty': $('#Concentrates_treated_qty').val(), 'Concentratesreceived_grade': $('#Concentratesreceived_grade').val(),
                    'Concentratesreceived_qty': $('#Concentratesreceived_qty').val(), 'Metalsrecovered_Value': $('#Metalsrecovered_Value').val(), 'Metalsrecovered_grade': $('#Metalsrecovered_grade').val(),
                    'Metalsrecovered_qty': $('#Metalsrecovered_qty').val(), 'OS_grade': $('#OS_grade1').val(), 'OS_qty': $('#OS_qty1').val(), 'Other_byproducts_Value': $('#Other_byproducts_Value').val(),
                    'Other_byproducts_grade': $('#Other_byproducts_grade').val(), 'Other_byproducts_qty': $('#Other_byproducts_qty').val(), 'Year': $('#Year').val(), 'MineralId': $('#objProduction_MineralId2').val()
                },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    if (data == "1") {
                        alert('Record Modified Successfully');
                        GetRecoverySmelter();
                        ClearRecoverySmelter();
                    }
                    else if (data == "2") {
                        alert("Record Already Exist.");
                        GetRecoverySmelter();
                        ClearRecoverySmelter();
                    }
                    else {
                        alert("Some error occured.Please try after some time");
                    }
                },
                error: function (err) {
                    alert(err.responseText);
                }
            });
        }
    }

    function DeleteRecoverySmelter(par) {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/DeleteRecoveriesSmelter",
            data: { 'Recovery_atSmelter_Id': par },
            dataType: 'json',
            type: 'post',
            success: function (data) {
                if (data == "1") {
                    alert('Record Deleted Successfully');
                    GetRecoverySmelter();
                }
                else {
                    alert('Transaction Failed.Please Try after some time!');
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    $('#btnSubmitModal1').click(function () {
        if ($('#btnSubmitModal1').text() == "Update") {
            UpdateRecoverySmelter();
        }
        else {
            SaveRecoverySmelter();
        }

    });

    function ClearRecoverySmelter() {
        $('#OS_qty1').val('');
        $('#OS_grade1').val('');
        $('#Concentratesreceived_qty').val('');
        $('#Concentratesreceived_grade').val('');
        $('#Concentrates_othersources_qty').val('');
        $('#Concentrates_othersources_grade').val('');
        $('#Concentrates_sold_qty').val('');
        $('#Concentrates_sold_grade').val('');
        $('#Concentrates_treated_qty').val('');
        $('#Concentrates_treated_grade').val('');
        $('#CS_qty1').val('');
        $('#CS_grade1').val('');
        $('#Metalsrecovered_qty').val('');
        $('#Metalsrecovered_grade').val('');
        $('#Metalsrecovered_Value').val('');
        $('#Other_byproducts_qty').val('');
        $('#Other_byproducts_grade').val('');
        $('#Other_byproducts_Value').val('');
        $('#hdnrRecovery_atSmelter_Id').val('');
        $('#btnSubmitModal1').text('Submit');
        $('#modal1').modal('hide');
    }

    $('#btnModal1Close').click(function () {
        ClearRecoverySmelter();
    });

    $('#IdAddModal1').click(function () {
        ClearRecoverySmelter();
    });

    function GetRecoverySmelter() {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetRecoveriesSmelter",
            data: { "Year": $('#Year').val() },
            dataType: 'json',
            type: 'post',
            success: function (data) {
                $('#tblRecoverySmelter tbody').html("");
                if (data.length > 0) {
                    $.each(data, function (ind, item) {
                        $('#tblRecoverySmelter tbody').append(
                            "<tr>" +
                            "<td>" + item.mineralName + "</td>" +
                            "<td>" + item.oS_qty + "</td>" +
                            "<td>" + item.oS_grade + "</td>" +
                            "<td>" + item.concentratesreceived_qty + "</td>" +
                            "<td>" + item.concentratesreceived_grade + "</td>" +
                            "<td>" + item.concentrates_othersources_qty + "</td>" +
                            "<td>" + item.concentrates_othersources_grade + "</td>" +
                            "<td>" + item.concentrates_sold_qty + "</td>" +
                            "<td>" + item.concentrates_sold_grade + "</td>" +
                            "<td>" + item.concentrates_treated_qty + "</td>" +
                            "<td>" + item.concentrates_treated_grade + "</td>" +
                            "<td>" + item.cS_qty + "</td>" +
                            "<td>" + item.cS_grade + "</td>" +
                            "<td>" + item.metalsrecovered_qty + "</td>" +
                            "<td>" + item.metalsrecovered_grade + "</td>" +
                            "<td>" + item.metalsrecovered_Value + "</td>" +
                            "<td>" + item.other_byproducts_qty + "</td>" +
                            "<td>" + item.other_byproducts_grade + "</td>" +
                            "<td>" + item.other_byproducts_Value + "</td>" +
                            "<td class='noprint text-center'>" +
                            "<a id='" + item.recovery_atSmelter_Id + "' onclick='EditRecoverySmelter(this.parentNode.parentNode.rowIndex-1,this.id);' data-toggle='modal' data-target='.alert-modal1' class='btn-floating btn-outline-primary btn-sm' data-placement='top' title='Edit'><i class='icon-pencil-alt-solid'></i></a>" +
                            "<a id='" + item.recovery_atSmelter_Id + "' onclick='DeleteRecoverySmelter(this.id);' href='javascript:void(0);' class='btn-floating btn-outline-danger btn-sm' data-placement='top' title='Delete'><i class='icon-trash-alt-solid'></i></a>" +

                            "</td>" +
                            "</tr>"
                        );
                    });



                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    function EditRecoverySmelter(ind, par) {
        ind = parseInt(ind) - 1;
        $('#hdnrRecovery_atSmelter_Id').val(par);
        $('#OS_qty1').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[1].innerHTML);
        $('#OS_grade1').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[2].innerHTML);
        $('#Concentratesreceived_qty').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[3].innerHTML);
        $('#Concentratesreceived_grade').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[4].innerHTML);
        $('#Concentrates_othersources_qty').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[5].innerHTML);
        $('#Concentrates_othersources_grade').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[6].innerHTML);
        $('#Concentrates_sold_qty').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[7].innerHTML);
        $('#Concentrates_sold_grade').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[8].innerHTML);
        $('#Concentrates_treated_qty').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[9].innerHTML);
        $('#Concentrates_treated_grade').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[10].innerHTML);
        $('#CS_qty1').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[11].innerHTML);
        $('#CS_grade1').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[12].innerHTML);
        $('#Metalsrecovered_qty').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[13].innerHTML);
        $('#Metalsrecovered_grade').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[14].innerHTML);
        $('#Metalsrecovered_Value').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[15].innerHTML);
        $('#Other_byproducts_qty').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[16].innerHTML);
        $('#Other_byproducts_grade').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[17].innerHTML);
        $('#Other_byproducts_Value').val(document.getElementById("tblRecoverySmelter").children[1].children[ind].children[18].innerHTML);
        $('#btnSubmitModal1').text('Update');
    }
    //-----------------------End Here--------------------------
    //--------------------Sales During the Year------------------
    function GetMineralGrade() {
        debugger;
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetMineralGradeForTinMineral",
            data: {},
            dataType: 'json',
            type: 'post',
            success: function (data) {
                debugger;
                $('#MineralGradeId6').html('');
                $('#MineralGradeId6').html("<option value=''>Select</option>")
                $.each(data, function (ind, item) {
                    if (item.mineralgradeid == $('#hdnMineralGrade').val()) {
                        $('#MineralGradeId6').append("<option selected='selected' value='" + item.mineralgradeid + "'>" + item.mineralgrade + "</option>");
                    }
                    else {
                        $('#MineralGradeId6').append("<option value='" + item.mineralgradeid + "'>" + item.mineralgrade + "</option>");
                    }
                });
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    function G2_getPreviousYearData() {

        var M_Y = $("#Year").val();

        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/Get_G2_ClosingStock",
            data: { Year: M_Y },
            dataType: "json",
            type: "GET",
            success: function (result) {
                debugger;
                $("#OS_Qty").val(result.closingStock).change();

                if (parseFloat(result.closingStock) >= 0) {
                    $('#OS_Qty').attr("readonly", "readonly");
                }
                else {
                    $('#OS_Qty').removeAttr("readonly", "readonly");
                }
                //if (result.ClosingStock == null || result.ClosingStock == "") {

                //}
                //else {
                //    $('#OS_Qty').Attr("readonly", "readonly");
                //}

                var OS = $("#OS_Qty").val();
                var DP = $("#Sold_Qty").val();

                OS = OS || 0;
                DP = DP || 0;
                if (OS) {
                    var CS = (parseFloat(OS)) - parseFloat(DP);

                    CS = CS || 0;
                    if (parseFloat(CS) < 0) {
                        CS = 0;
                        $("#CS_Qty").val(CS.toFixed(2)).change();
                        $("#OS_Qty").val('').change();
                        alert("Please enter proper opening stocks of Metals/Products !");
                        return false;
                    }
                    $("#CS_Qty").val(CS.toFixed(2)).change();
                }

            }
        });
    }

    function GetDispatche() {
        debugger;
        var G_Id = $('#MineralGradeId6').val();
        var M_Y = $("#Year").val();
        var TinContent = "0";

        if (G_Id != "" && M_Y != "" && TinContent != "") {
            $.ajax({
                url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetDespatches_MineHead_Annual_G2",
                data: {
                    MineralGradeId: G_Id,
                    MonthYear: M_Y,
                    TinContent: TinContent
                },
                dataType: "json",
                type: "GET",
                success: function (result) {
                    $("#Sold_Qty").val(result.closingStock).change();

                }
            });
        }
        else {
            $("#Sold_Qty").val('');
        }
    }

    function ValidateSaleProduct() {
        if ($('#Product').val() == "") {
            alert('Metal/Product Required');
            $('#Product').focus();
            return false;
        }

        if ($('#MineralGradeId6').val() == "") {
            alert('Mineral Grade Required');
            $('#MineralGradeId6').focus();
            return false;
        }

        if ($('#OS_Qty').val() == "") {
            alert('Quantity Required');
            $('#OS_Qty').focus();
            return false;
        }

        if ($('#Sold_Qty').val() == "") {
            alert('Quantity Required');
            $('#Sold_Qty').focus();
            return false;
        }

        if ($('#Sold_Value').val() == "") {
            alert('Value Required');
            $('#Sold_Value').focus();
            return false;
        }

        if ($('#PlaceOfSale').val() == "") {
            alert('Place Of Sale Required');
            $('#PlaceOfSale').focus();
            return false;
        }

        return true;
    }

    function SaveSaleProduct() {
        if (ValidateSaleProduct() == true) {
            $.ajax({
                url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/AddSaleProduct",
                data: {
                    'CS_Qty': $('#CS_Qty').val(), 'OS_Qty': $('#OS_Qty').val(), 'PlaceOfSale': $('#PlaceOfSale').val(),
                    'Product': $('#Product').val(), 'Sold_Qty': $('#Sold_Qty').val(), 'Sold_Value': $('#Sold_Value').val(),
                    'MineralGradeId6': $('#MineralGradeId6').val(), 'Year': $('#Year').val(), 'MineralId': $('#objProduction_MineralId2').val(),
                    'MineralGrade': $("#MineralGradeId6 option:selected").text()
                },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    if (data == "1") {
                        alert('Record Created Successfully');
                        GetSaleProduct();
                        ClearSaleProduct();
                    }
                    else if (data == "2") {
                        alert("Record Already Exist.");
                        GetSaleProduct();
                        ClearSaleProduct();
                    }
                    else {
                        alert("Some error occured.Please try after some time");
                    }
                },
                error: function (err) {
                    alert(err.responseText);
                }
            });
        }
    }

    function DeleteSaleProduct(par) {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/DeleteSaleProduct",
            data: { 'SaleProductId': par },
            dataType: 'json',
            type: 'post',
            success: function (data) {
                if (data == "1") {
                    alert('Record Deleted Successfully');
                    GetSaleProduct();
                }
                else {
                    alert('Transaction Failed.Please Try after some time!');
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    function ClearSaleProduct() {
        $('#Product').val('');
        $('#MineralGradeId6').val('');
        $('#OS_Qty').val('');
        $('#Sold_Qty').val('');
        $('#Sold_Value').val('');
        $('#PlaceOfSale').val('');
        $('#CS_Qty').val('');
        $('#modal2').modal('hide');
        GetMineralGrade();
        G2_getPreviousYearData();
    }

    function GetSaleProduct() {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetSaleProduct",
            data: { "Year": $('#Year').val() },
            dataType: 'json',
            type: 'post',
            success: function (data) {

                $('#tblSaleProduct tbody').html('');
                if (data.length > 0) {
                    $.each(data, function (ind, item) {
                        $('#tblSaleProduct tbody').append(
                            "<tr>" +
                            "<td>" + item.product + "</td>" +
                            "<td>" + item.oS_Qty + "</td>" +
                            "<td>" + item.oS_Grade + "</td>" +
                            "<td>" + item.placeOfSale + "</td>" +
                            "<td>" + item.sold_Qty + "</td>" +
                            "<td>" + item.sold_Grade + "</td>" +
                            "<td>" + item.sold_Value + "</td>" +
                            "<td>" + item.cS_Qty + "</td>" +
                            "<td>" + item.cS_Grade + "</td>" +

                            "<td class='noprint text-center'>" +
                            "<a onclick='DeleteSaleProduct(this.id);' id='" + item.saleProductId + "' href='javascript:void(0);' class='btn-floating btn-outline-danger btn-sm' data-placement='top' title='Delete'><i class='icon-trash-alt-solid'></i></a>" +

                            "</td>" +
                            "</tr>"
                        );
                    })

                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    $('#btnCloseModal2').click(function () {
        ClearSaleProduct();
    });

    $('#btnIdModal2').click(function () {
        ClearSaleProduct();
    });
    //-------------------End Here--------------------------------
    //----------------------Sale Dispatch------------------------------
    function GetMineralForm() {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetMineralForm",
            data: { 'MineralId': $('#objProduction_MineralId2').val() },
            dataType: 'json',
            type: 'post',
            success: function (data) {
                $('#MineralNatureId').html('');
                $('#MineralNatureId').append("<option value=''>Select</option>");
                if (data.length > 0) {
                    $.each(data, function (ind, item) {
                        if (item.mineralNatureId == $('#hdnMineralForm').val()) {
                            $('#MineralNatureId').append("<option selected='selected' value='" + item.mineralNatureId + "'>" + item.mineralNature + "</option>");
                        }
                        else {
                            $('#MineralNatureId').append("<option value='" + item.mineralNatureId + "'>" + item.mineralNature + "</option>");
                        }
                    });
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    function GetMineralGradePart6() {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetMineralGrade",
            data: {},
            dataType: 'json',
            type: 'post',
            success: function (data) {
                $('#MINERALGRADEID').html('');
                $('#MINERALGRADEID').append("<option value=''>Select</option>");
                if (data.length > 0) {
                    $.each(data, function (ind, item) {
                        if (item.mineralgradeid == $('#hdnMINERALGRADEID').val()) {
                            $('#MINERALGRADEID').append("<option selected='selected' value='" + item.mineralgradeid + "'>" + item.mineralgrade + "</option>");
                        }
                        else {
                            $('#MINERALGRADEID').append("<option value='" + item.mineralgradeid + "'>" + item.mineralgrade + "</option>");
                        }
                    });
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    function GetNatureOfDispatch() {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetNatureOfDispatch",
            data: {},
            dataType: 'json',
            type: 'post',
            success: function (data) {
                $('#NatureOfDispatch').html('');
                $('#NatureOfDispatch').append("<option value=''>Select</option>");
                if (data.length > 0) {
                    $.each(data, function (ind, item) {
                        if (item.natureOfDispatch == $('#hdnNatureOfDispatch').val()) {
                            $('#NatureOfDispatch').append("<option selected='selected' value='" + item.natureOfDispatch + "'>" + item.natureOfDispatch + "</option>");
                        }
                        else {
                            $('#NatureOfDispatch').append("<option value='" + item.natureOfDispatch + "'>" + item.natureOfDispatch + "</option>");
                        }
                    });
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    function GetPurchaserConsignee() {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetPurchaserConsignee",
            data: {},
            dataType: 'json',
            type: 'post',
            success: function (data) {
                $('#Consignee').html('');
                $('#Consignee').append("<option value=''>Select</option>");
                if (data.length > 0) {
                    $.each(data, function (ind, item) {
                        if (item.consignee == $('#hdnConsignee').val()) {
                            $('#Consignee').append("<option selected='selected' value='" + item.consignee + "'>" + item.consignee + "</option>");
                        }
                        else {
                            $('#Consignee').append("<option value='" + item.consignee + "'>" + item.consignee + "</option>");
                        }
                    });
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    $('#NatureOfDispatch').change(function () {
        if ($(this).val() == "Export") {
            $('#IdDivExport').show();
            $('#IdDivDomestic').hide();
            $('#RegistrationNo').val('');
            $('#Consignee').val('');
            $('#DomesticPurposes_Quantity').val('');
            $('#SaleValue').val('');
            $('#Country').val('');
            $('#Export_Quantity').val('');
            $('#FOBValue').val('');
            GetPurchaserConsignee();
        }
        else {
            $('#IdDivExport').hide();
            $('#IdDivDomestic').show();
            $('#RegistrationNo').val('');
            $('#Consignee').val('');
            $('#DomesticPurposes_Quantity').val('');
            $('#SaleValue').val('');
            $('#Country').val('');
            $('#Export_Quantity').val('');
            $('#FOBValue').val('');
            GetPurchaserConsignee();
        }
    });

    function ValidateSaleDispatch() {
        if ($('#MineralNatureId').val() == "") {
            alert('Mineral Form Required!');
            $('#MineralNatureId').focus();
            return false;
        }

        if ($('#MINERALGRADEID').val() == "") {
            alert('Mineral Grade Required!');
            $('#MINERALGRADEID').focus();
            return false;
        }

        if ($('#NatureOfDispatch').val() == "") {
            alert('Nature Of Dispatch Required!');
            $('#NatureOfDispatch').focus();
            return false;
        }

        if ($('#NatureOfDispatch').val() != "Export") {
            if ($('#RegistrationNo').val() == "") {
                alert('Registration No allotted by the IBM to the buyer Required !');
                $('#RegistrationNo').focus();
                return false;
            }
            if ($('#Consignee').val() == "") {
                alert('Consignee name Required !');
                $('#Consignee').focus();
                return false;
            }
            if ($('#DomesticPurposes_Quantity').val() == "") {
                alert('Quantity Required !');
                $('#DomesticPurposes_Quantity').focus();
                return false;
            }
            if ($('#SaleValue').val() == "") {
                alert('Sale Value Required !');
                $('#SaleValue').focus();
                return false;
            }
        }
        else {
            if ($('#Country').val() == "") {
                alert('Country Required !');
                $('#Country').focus();
                return false;
            }
            if ($('#Export_Quantity').val() == "") {
                alert('Quantity Required !');
                $('#Export_Quantity').focus();
                return false;
            }
            if ($('#FOBValue').val() == "") {
                alert('F O B Value Required !');
                $('#FOBValue').focus();
                return false;
            }
        }

        return true;
    }

    function GetSaleDispatch() {
        debugger;
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/GetSaleDispatch_G2",
            data: { 'Year': $("#Year").val() },
            dataType: 'json',
            type: 'post',
            success: function (data) {
                debugger;
                $('#tblSaleDispatch tbody').html('');
                if (data.length > 0) {
                    $.each(data, function (ind, item) {
                        $('#tblSaleDispatch tbody').append(
                            "<tr>" +
                            "<td style='display:none'>" + item.mineralNatureId + "</td>" +
                            "<td style='display:none'>" + item.mineralGradeId + "</td>" +
                            "<td>" + item.mineralGrade + "</td>" +
                            "<td>" + item.natureofDispatch + "</td>" +
                            "<td>" + item.registrationNo + "</td>" +
                            "<td>" + item.purchaserConsinee + "</td>" +
                            "<td>" + item.domesticPurposes_Quantity + "</td>" +
                            "<td>" + item.saleValue + "</td>" +
                            "<td>" + item.country + "</td>" +
                            "<td>" + item.export_Quantity + "</td>" +
                            "<td>" + item.fobValue + "</td>" +
                            "<td class='noprint text-center'>" +
                            "<a id='" + item.sale_Dispatch_Id + "' onclick='EditSaleDispatch(this.parentNode.parentNode.rowIndex-1,this.id);' data-toggle='modal' data-target='.alert-modal3' class='btn-floating btn-outline-primary btn-sm' data-placement='top' title='Edit'><i class='icon-pencil-alt-solid'></i></a>" +
                            "<a id='" + item.sale_Dispatch_Id + "' onclick='DeleteSaleDispatch(this.id);' href='javascript:void(0);' class='btn-floating btn-outline-danger btn-sm' data-placement='top' title='Delete'><i class='icon-trash-alt-solid'></i></a>" +
                            "</td>" +
                            "</tr>"
                        );
                    });
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }

    function EditSaleDispatch(ind, par) {
        debugger;
        ind = parseInt(ind) - 1;
        $('#hdnSale_Dispatch_Id').val(par);
        $('#hdnMineralForm').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[0].innerHTML);
        $('#hdnMINERALGRADEID').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[1].innerHTML);
        $('#hdnNatureOfDispatch').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[3].innerHTML);
        $('#hdnConsignee').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[5].innerHTML);
        $('#RegistrationNo').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[4].innerHTML);
        $('#DomesticPurposes_Quantity').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[6].innerHTML);
        $('#SaleValue').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[7].innerHTML);
        $('#Country').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[8].innerHTML);
        $('#Export_Quantity').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[9].innerHTML);
        $('#FOBValue').val(document.getElementById("tblSaleDispatch").children[1].children[ind].children[10].innerHTML);

        GetMineralForm();
        GetMineralGradePart6();
        GetNatureOfDispatch();
        GetPurchaserConsignee();
        if ($('#hdnNatureOfDispatch').val() == "Export") {
            $('#IdDivExport').show();
            $('#IdDivDomestic').hide();
        }
        else {
            $('#IdDivExport').hide();
            $('#IdDivDomestic').show();
        }
        $('#btnSubmitModal3').text('Update');
    }

    function submitSalesDispatch() {
        if (ValidateSaleDispatch()) {
            var objModel = {
                MineralNatureId: $("#MineralNatureId").val(),
                MineralGradeId: $("#MINERALGRADEID").val(),
                NatureofDispatch: $("#NatureOfDispatch").val(),
                RegistrationNo: $("#RegistrationNo").val(),
                PurchaserConsinee: $("#Consignee").val() == "" ? "" : $("#Consignee option:selected").text(),
                DomesticPurposes_Quantity: $("#DomesticPurposes_Quantity").val(),
                SaleValue: $("#SaleValue").val(),
                Country: $("#Country").val(),
                Export_Quantity: $("#Export_Quantity").val(),
                FOBValue: $("#FOBValue").val(),
                Year: $("#Year").val(),
                MineralId: $('#objProduction_MineralId2').val()
            };
            $.ajax({
                type: "POST",
                url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/ADDSaleDispatch_G2",
                data: objModel,
                dataType: "json",
                success: function (result) {
                    if (result == "1") {
                        alert("Record inserted successfully.");
                        ClearSaleDispatch();
                        GetSaleDispatch();

                    }
                    else if (result == "2") {
                        alert("Record already existed !");
                        ClearSaleDispatch();
                        GetSaleDispatch();
                    }
                    else if (result == "3") {
                        alert("Something went wrong !");
                        ClearSaleDispatch();
                    }
                }
            });
        }
    }

    function updateSalesDispatch() {
        if (ValidateSaleDispatch()) {
            var objModel = {
                Sale_Dispatch_Id: $("#hdnSale_Dispatch_Id").val(),
                MineralNatureId: $("#MineralNatureId").val(),
                MineralGradeId: $("#MINERALGRADEID").val(),
                NatureofDispatch: $("#NatureOfDispatch").val(),
                RegistrationNo: $("#RegistrationNo").val(),
                PurchaserConsinee: $("#Consignee").val() == "" ? "" : $("#Consignee option:selected").text(),
                DomesticPurposes_Quantity: $("#DomesticPurposes_Quantity").val(),
                SaleValue: $("#SaleValue").val(),
                Country: $("#Country").val(),
                Export_Quantity: $("#Export_Quantity").val(),
                FOBValue: $("#FOBValue").val(),
                Year: $("#Year").val(),
                MineralId: $('#objProduction_MineralId2').val()
            };


            $.ajax({
                type: "POST",
                url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/UpdateSaleDispatch_G2",
                data: objModel,
                dataType: "json",
                success: function (result) {
                    if (result == "1") {
                        alert("Record updated successfully.");
                        ClearSaleDispatch();
                        GetSaleDispatch();
                    }
                    else if (result == "2") {
                        alert("Record already existed !");
                        ClearSaleDispatch();
                        GetSaleDispatch();
                    }
                    else if (result == "3") {
                        alert("Something went wrong !");
                        ClearSaleDispatch();
                    }
                }
            });
        }
    }

    function DeleteSaleDispatch(par) {
        $.ajax({
            url: "/eReturn_NonCoal_Yearly/EReturnYearlyNonCoalG2/DeleteSaleDispatch_G2",
            data: { 'Sale_Dispatch_Id': par },
            dataType: 'json',
            type: 'post',
            success: function (data) {
                if (data == "1") {
                    alert('Record Deleted Successfully');
                    GetSaleDispatch();
                }
                else {
                    alert('Transaction Failed.Please Try after some time!');
                }
            },
            error: function (err) {
                alert(err.responseText);
            }
        });
    }


    $('#btnSubmitModal3').click(function () {
        if ($(this).text() == "Update") {
            updateSalesDispatch();
        }
        else {
            submitSalesDispatch();
        }
    });

    function ClearSaleDispatch() {
        $('#RegistrationNo').val('');
        $('#Consignee').val('');
        $('#DomesticPurposes_Quantity').val('');
        $('#SaleValue').val('');
        $('#Country').val('');
        $('#Export_Quantity').val('');
        $('#FOBValue').val('');
        $('#hdnSale_Dispatch_Id').val('');
        $('#hdnMineralForm').val('');
        $('#hdnMINERALGRADEID').val('');
        $('#hdnNatureOfDispatch').val('');
        $('#hdnConsignee').val('');
        $('#modal3').hide('modal');
        $('#IdDivExport').hide();
        $('#IdDivDomestic').show();
        $('#btnSubmitModal3').text('Submit');
        GetMineralForm();
        GetMineralGradePart6();
        GetNatureOfDispatch();
        GetPurchaserConsignee();

    }

    $('#btnCloseModal3').click(function () {
        ClearSaleDispatch();
    });

    $('#btnIdModal3').click(function () {
        ClearSaleDispatch();
    });
    //----------------------End Here-------------------------------------

    function TextChange() {

        var T = $("#objDeduction_TotalAmount").val();
        if (T == "") {
            T = 0;
        }
        T = 0;
        for (var i = 1; i <= 7; i++) {
            var amt = "#objDeduction_Amount" + i;
            if ($(amt).val() != "") {

                T = Number(T) + Number($(amt).val());
                $("#objDeduction_TotalAmount").val(T);
            }
        }
    }
    //----------------Check Numbers Only-------------------
    function quantity_Onchange(dom, event) {
        var domName = dom.id;

        if (event.shiftKey == true) {
            event.preventDefault();
        }

        if ((event.keyCode >= 48 && event.keyCode <= 57) ||
            (event.keyCode >= 96 && event.keyCode <= 105) ||
            event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 ||
            event.keyCode == 39 || event.keyCode == 46 || event.keyCode == 190) {

            var val = $("#" + domName).val();
            if (isNaN(val)) {
                val = val.replace(/[^0-9\.]/g, '');
                if (val.split('.').length > 2) {
                    val = 0;
                    $("#" + domName).val(val);
                    event.preventDefault();
                    return false;
                }
            }
        }
        else {
            event.preventDefault();
        }
        return true;
    }
    //----------------End Here------------------------------
    function validateProductionAndStocks() {
        debugger;
        var FD = document.getElementsByClassName("FD");
        var FS = document.getElementsByClassName("FS");
        var FO = document.getElementsByClassName("FO");
         
                for (var i = 0; i < FD.length; i++) {
                    if (FD[i].value=="") {
                        $("#seven").removeClass("active");
                        $('#seven-tab').removeClass("active");
                        $("#first").addClass("show active");
                        $('#first-tab').addClass("active");
                        FD[i].focus();
                        alert("This field is required!")
                        return false;
                    }
               }


                for (var j = 0; j < FS.length; j++) {
                    if (FS[j].value=="") {
                        $("#seven").removeClass("active");
                        $('#seven-tab').removeClass("active");
                        $("#first").addClass("show active");
                        $('#first-tab').addClass("active");
                        FS[j].focus();
                        alert("This field is required!")
                        return false;
                    }
                }


                for (var k = 0; k < FO.length; k++) {
                    if (FO[k].value=="") {
                        $("#seven").removeClass("active");
                        $('#seven-tab').removeClass("active");
                        $("#first").addClass("show active");
                        $('#first-tab').addClass("active");
                        FO[k].focus();
                        alert("This field is required!")
                        return false;
                    }
                }




        var ExMinePrice = $("#objProduction_ExMinePrice").val();


         if (ExMinePrice == "") {
             $("#seven").removeClass("active");
             $('#seven-tab').removeClass("active");
             $("#first").addClass("show active");
             $('#first-tab').addClass("active");
            $("#objProduction_ExMinePrice").focus();
            alert('Please Enter Ex Mine Price!');
            return false;
        }
    }

    function OnSaveReason_Inc_Dec() {

            if (validateProductionAndStocks() != false) {
                $("#objProduction_Flag").val(2);
                $("#objDeduction_Flag2").val(2);
                $("#objReason_Inc_Dec_Flag3").val(2);
                $("#G2_ReasonForInDc").submit();
            }

    }
     
    function OnUpdateReason_Inc_Dec() {
        if (validateProductionAndStocks() != false) {
            $("#objProduction_Flag").val(1);
            $("#objDeduction_Flag2").val(1);
            $("#objReason_Inc_Dec_Flag3").val(1);
            $("#G2_ReasonForInDc").submit();
        }

    }

</script>


