@model ReturnEF.FormF2PartTwoViewModel
@{
    ViewData["Title"] = "ProfileView";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
@*<link rel="stylesheet" href="~/css/bootstrap-datetimepicker.min.css" type="text/css" />
<script src="~/js/moment.min.js"></script>
<script src="~/js/bootstrap-datetimepicker.min.js"></script>
<script src='@Url.Content("~/js/sweetalert.min.js")'></script>
<script src="~/js/specialChar.js"></script>
<script src="~/js/CSMValidation.js"></script>*@
<script>
    $(document).ready(function () {
        //$('.datepicker').datetimepicker({
        //    format: 'LT',
        //    format: 'DD-MM-YYYY',
        //    daysOfWeekDisabled: [],
        //});


    });

</script>
<style>


    .label-nav {
        display: inline-block;
        text-decoration: none;
        color: #FCB53A;
    }

    ul {
        padding: 0;
        margin: 0;
    }

    .element {
        width: 150px;
        height: 150px;
        background: #FCB53A;
        -moz-border-radius: 50%;
        -webkit-border-radius: 50%;
        border-radius: 50%;
        text-align: center;
        padding-top: 50px;
    }

    .circle-text {
        font-family: inherit;
        line-height: 20px;
        color: #fff;
        text-rendering: optimizelegibility;
    }

    .btn-circle {
        border: 2px solid #FCB53A;
        border-radius: 50%;
        background-color: #fff;
    }

        .btn-circle:focus {
            border: 2px solid #FCB53A;
            border-radius: 50%;
            background-color: #fff;
        }

    .btn-circle-filled {
        border: 2px solid #FCB53A;
        border-radius: 50%;
        background-color: #FCB53A;
    }

        .btn-circle-filled:focus {
            border: 2px solid #FCB53A;
            border-radius: 50%;
            background-color: #FCB53A;
        }

    .detail-card {
        border: 1px solid #FCB53A;
        margin-bottom: 10px;
    }

    .details-section {
        margin-top: 10px;
    }

    .details {
        padding-left: 2px;
    }

    .card-section-header-text {
        color: #FCB53A;
    }

    .liquidFillGaugeText {
        font-family: Helvetica;
        font-weight: bold;
    }

    p {
        padding: 0;
        margin: 0;
    }

    .profile-dash {
        background-color: #d4d4d4;
    }

    .wh {
        background-color: #fff;
    }
</style>
<style>
    .panel {
        border: 0.5px solid #000000;
        border-radius: 0;
    }

    .bg-gold {
        background-color: #FCB53A;
    }

    .form-control1 {
        border-radius: 0;
        border-style: solid;
        border-width: 1px;
        font-size: 13px;
        margin: 0 0 8px;
        padding: 5px 3%;
        width: 100%;
    }

    .btn.btnsave {
        background-color: #fbb53b;
        color: #ffffff;
    }

        .btn.btnsave:hover {
            background-color: #fdca71;
            color: #ffffff;
        }

    .lnk-btn {
        color: #fff;
        font: bold;
        font-size: 1em;
    }

        .lnk-btn:after {
            margin-left: 2px;
            content: '|';
            color: #000000;
        }

        .lnk-btn:focus {
            color: #000000;
        }

    .slider {
        width: 100%;
        margin: 15px 0 30px 0;
    }

    hr {
        display: block;
        margin-top: 5px;
        border-style: inset;
        border-width: 1px;
    }

    .a1 {
        padding: 10px 39px 8px 42px;
        margin-left: 20px;
        margin-right: 20px;
    }
</style>
<style>
    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
    }

    th, td {
        padding: 5px;
        text-align: left;
    }
</style>
<section class="wrapper main-wrapper row">
    @if (TempData["msg"] != null)
    {
        <script>
             swal("", "@TempData["msg"]", "success");
        </script>
    }
    @if (TempData["result"] != null)
    {
        <script>
             swal("", "@TempData["result"]", "success");
        </script>
    }
    @if (ViewBag.msg != null)
    {
        <script>
                      swal("",@ViewBag.msg, "success");
        </script>
    }
    <div class="col-12">
        <!-- MAIN CONTENT AREA STARTS -->
        @Html.Partial("_CMSnavigation")
        <div class="row">
            <div class="col-12">


                <div class="main-tab">
                    <ul class="nav nav-tabs">

                        <li class="nav-item">
                            <a class="nav-link" href="~/eReturn_NonCoal/eReturmForm2/PartOneForm2?MonthYear=@TempData["M_Y"]">
                                Part 1
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" id="partTwo" href="~/eReturn_NonCoal/eReturmForm2/PartTwoForm2?MonthYear=@TempData["M_Y"]">

                                Part 2
                            </a>
                        </li>

                    </ul>
                    @Html.Partial("_CMSutil")
                </div>


                <section class="box form-container">
                    <div class="content-body">
                        @using (Html.BeginForm("PartTwoForm2", "eReturmForm2", FormMethod.Post, new { @id = "FormF1Part2", @enctype = "multipart/form-data" }))
                        {
                            <div class="text-center text-dark">
                                <h6 class="font-weight-bold">Monthly Return <small>(FORM F-2)</small></h6>
                                <label>FORM F-2</label><br />
                                <label>MONTHLY RETURN</label><br />
                                <label>[To be used for minerals Copper, Gold, Lead, Pyrites, Tin, Tungsten and Zinc]</label>
                                <h6 class="font-weight-bold">
                                    <label>PART-II (PRODUCTION, DESPATCHES AND STOCKS)</label><br />
                                    <label>(To be submitted separately for each mineral)</label><br />
                                    <label>(Unit of Quantity in Tonnes; indicate unit of quantity if not in tonnes)</label>
                                </h6>


                            </div>



                            <ul class="nav nav-tabs progressbar border-0" id="myTab" role="tablist">
                                <li class="startstep activestep1">
                                    <a class="active" id="first-tab" data-toggle="tab" href="#MD" role="tab" aria-controls="first" aria-selected="true">Production and Stocks of ROM ore</a>
                                </li>
                                <li>
                                    <a id="second-tab" data-toggle="tab" href="#LAD" role="tab" aria-controls="second" aria-selected="false">Recoveries at Concentrator/Mill/Plant</a>
                                </li>

                                <li>
                                    <a id="Six-tab" data-toggle="tab" href="#RRP" role="tab" aria-controls="Six" aria-selected="false"> Recovery at the Smelter/Mill/Plant</a>
                                </li>

                                <li>
                                    <a id="third-tab" data-toggle="tab" href="#DWM" role="tab" aria-controls="third" aria-selected="false"> Sales during the month</a>
                                </li>
                                <li>
                                    <a id="third-tab" data-toggle="tab" href="#ADE" role="tab" aria-controls="third" aria-selected="false">Details of deductions</a>
                                </li>
                                <li>
                                    <a id="four-tab" data-toggle="tab" href="#SD" role="tab" aria-controls="four" aria-selected="false">Sales/ Dispatches</a>
                                </li>
                                <li>
                                    <a id="five-tab" data-toggle="tab" href="#RID" role="tab" aria-controls="five" aria-selected="false">Reasons for increase/decrease</a>
                                </li>
                            </ul>
                            <div class="tab-content" id="myTabContent">
                                <div class="tab-pane fade show active" id="MD" role="tabpanel" aria-labelledby="first-tab">

                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin: 15px 0;">
                                        <div class="row">
                                            @Html.HiddenFor(m => m.objDeduction_made.CExMineSale)
                                            @Html.HiddenFor(m => m.objDeduction_made.ex_mineSale)

                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                @Html.Label("1. Production and Stocks of ROM ore", "1. Production and Stocks of ROM ore")
                                                @Html.HiddenFor(m => m.objProduction.Flag)
                                                @Html.HiddenFor(m => m.objProduction.ProductionandStocks_Id)
                                                <input type="hidden" value="@ViewBag.Month_Year" name="objProduction.Month_Year" id="Month_Year1" />
                                                <input type="hidden" value="@ViewBag.Month_Year" name="objDeduction_made.Month_Year" id="Month_Year2" />
                                                <input type="hidden" value="@ViewBag.Month_Year" name="objReason_Inc_Dec.Month_Year" id="Month_Year3" />
                                                <input type="hidden" value="@ViewBag.Month_Year" name="Month_Year" id="Month_Year" />
                                                <input type="hidden" value="@ViewBag.UID" name="UID" id="UID" />
                                                <input type="hidden" value="@ViewBag.MineralId" name="objProduction.MineralId1" id="objProduction_MineralId1" />
                                                @Html.Hidden("Table1len", "", new { @class = "hiddenid" })
                                                @Html.Hidden("Table2len", "", new { @class = "hiddenid" })
                                                @Html.Hidden("Table3len", "", new { @class = "hiddenid" })
                                                @Html.Hidden("Table4len", "", new { @class = "hiddenid" })
                                                @Html.Hidden("Table1ID", "", new { @class = "hiddenid" })
                                                @Html.Hidden("Table2ID", "", new { @class = "hiddenid" })
                                                @Html.Hidden("Table3ID", "", new { @class = "hiddenid" })
                                                @Html.Hidden("Table4ID", "", new { @class = "hiddenid" })

                                            </div>


                                        </div>
                                        <hr />
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <table style="width: 100%">
                                                    <tr>
                                                        <td rowspan="2"></td>
                                                        <td colspan="2" style="text-align: center;">Opening stocks</td>
                                                        <td colspan="2" style="text-align: center;">Production</td>
                                                        <td colspan="2" style="text-align: center;">Closing stocks</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Quantity</td>
                                                        <td>Metal content/grade</td>
                                                        <td>Quantity</td>
                                                        <td>Metal content/grade</td>
                                                        <td>Quantity</td>
                                                        <td>Metal content/grade</td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="7">A. From Underground workings</td>
                                                    </tr>
                                                    <tr>
                                                        <td>i) From Development</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Development_OS_Qty, new { @class = "form-control dpQty", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeOpeningstocksQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Development_OS_grade, new { @class = "form-control dpGrade" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Development_Production_Qty, new { @class = "form-control dpQty", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeProductionQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Development_Production_grade, new { @class = "form-control dpGrade" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Development_CS_Qty, new { @class = "form-control dpQty", @readonly = "readonly", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeClosingstocksQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Development_CS_grade, new { @class = "form-control dpGrade" })</td>
                                                    </tr>
                                                    <tr>
                                                        <td>ii) From Stoping</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Stoping_OS_Qty, new { @class = "form-control stopQty", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeOpeningstocksQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Stoping_OS_grade, new { @class = "form-control stopGrade" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Stoping_Production_Qty, new { @class = "form-control stopQty", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeProductionQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Stoping_Production_grade, new { @class = "form-control stopGrade" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Stoping_CS_Qty, new { @class = "form-control stopQty", @readonly = "readonly", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeClosingstocksQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Stoping_CS_grade, new { @class = "form-control stopGrade" })</td>
                                                    </tr>
                                                    <tr>
                                                        <td>B. From Opencast workings</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_OS_Qty, new { @class = "form-control opCastQty", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeOpeningstocksQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_OS_grade, new { @class = "form-control opCastGrade" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_Production_Qty, new { @class = "form-control opCastQty", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeProductionQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_Production_grade, new { @class = "form-control opCastGrade" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_CS_Qty, new { @class = "form-control opCastQty", @readonly = "readonly", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeClosingstocksQty()" })</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.OpenCastWork_CS_grade, new { @class = "form-control opCastGrade" })</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Total</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Total_OS_Qty, new { @class = "form-control", @readonly = "readonly" })</td>
                                                        <td>@*@Html.TextBoxFor(m => m.objProduction.Total_OS_grade, new { @class = "form-control1", @readonly = "readonly" })*@</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Total_Production_Qty, new { @class = "form-control", @readonly = "readonly" })</td>
                                                        <td>@*@Html.TextBoxFor(m => m.objProduction.Total_Production_grade, new { @class = "form-control1", @readonly = "readonly" })*@</td>
                                                        <td>@Html.TextBoxFor(m => m.objProduction.Total_CS_Qty, new { @class = "form-control", @readonly = "readonly" })</td>
                                                        <td>@*@Html.TextBoxFor(m => m.objProduction.Total_CS_grade, new { @class = "form-control1", @readonly = "readonly" })*@</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                @Html.Label("2. Ex-mine price of the ore produced (₹ per unit)", "2. Ex-mine price of the ore produced (₹ per unit)")
                                                <hr />
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                @Html.TextBoxFor(m => m.objProduction.ExMinePrice, new { @class = "form-control", @onkeydown = "quantity_Onchange(this,event);", @style = "width:61%;padding:5px;" })
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-sm-12 text-center">
                                                <a id="second-tab" data-toggle="tab" href="#LAD" class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext" role="tab" aria-controls="second" aria-selected="false">Next</a>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="tab-pane fade" id="LAD" role="tabpanel" aria-labelledby="second-tab">


                                    <div class="form-group row">
                                        <div class="col-sm-12">

                                            <h5 class="text-brown font-weight-bold">3.Recoveries at Concentrator/Mill/Plant</h5>

                                        </div>

                                        <a href="javascript:void(0);" class="btn btn-primary btn-md ml-0" data-target="#Addrecoveryconcentrator" data-toggle="modal"
                                           data-target=".alert-modal" onclick="ClearTable1()">Add New Recoveries at Concentrator/Mill/Plant</a>
                                        <div class="col-sm-12">
                                            <div class="table-responsive">
                                                <table id="tblrecoveriesatconcentratot" class="table table-sm table-bordered ROM">
                                                    <thead>
                                                        <tr>
                                                            <th width="30" rowspan="2">Sl#</th>
                                                            <th rowspan="2">Mineral Name</th>
                                                            <th colspan="2">Opening stocks of the Ore at concentrator/plant</th>
                                                            <th colspan="2">Ore received from the mine</th>
                                                            <th colspan="2" class="text-center">Ore treated</th>
                                                            <th colspan="3" class="text-center">Concentrates * Obtained</th>
                                                            <th colspan="2" class="text-center">Tailings</th>
                                                            <th colspan="2" class="text-center">Closing stocks of concentrates at the concentrator/plant</th>

                                                            <th style="width: 15%;" class="noprint" rowspan="2">Actions</th>
                                                        </tr>
                                                        <tr>
                                                            <th>Quantity</th>
                                                            <th>Mineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Value</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                        </tr>
                                                    </thead>

                                                </table>
                                            </div>
                                            <br />

                                            <h9 class="text-brown font-weight-bold">*In case of any leaching method adopted, give quantity recovered and grade contained separately</h9>


                                        </div>


                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">

                                            <a id="second-tab" data-toggle="tab" href="#MD" class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious" role="tab" aria-controls="second" aria-selected="false">Previous</a>


                                            <a id="third-tab" data-toggle="tab" href="#RRP" class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext" role="tab" aria-controls="third" aria-selected="false"> Next</a>
                                        </div>
                                    </div>


                                </div>

                                <div class="tab-pane fade" id="RRP" role="tabpanel" aria-labelledby="third-tab">


                                    <div class="form-group row">
                                        <div class="col-sm-12">

                                            <h5 class="text-brown font-weight-bold">4.Recovery at the Smelter/Mill/Plant</h5>

                                        </div>

                                        <a href="javascript:void(0);" class="btn btn-primary btn-md ml-0" data-target="#Poptable2" data-toggle="modal"
                                           data-target=".alert-modal" onclick="ClearTable1()">Add New Recoveries at Smelter/Mill/Plant</a>
                                        <div class="col-sm-12">
                                            <div class="table-responsive">
                                                <table id="table2" class="table table-sm table-bordered ROM">
                                                    <thead>
                                                        <tr>
                                                            <th width="30" rowspan="2">Sl#</th>
                                                            <th rowspan="2">Mineral Name</th>
                                                            <th colspan="2">Opening stocks of the Ore at Smelter/plant</th>
                                                            <th colspan="2">Concentrates received from concentrator/plant</th>
                                                            <th colspan="2" class="text-center">Concentrates received from other sources (specify)</th>
                                                            <th colspan="2" class="text-center">Concentrates sold (if any)</th>
                                                            <th colspan="2" class="text-center">Concentrates treated</th>
                                                            <th colspan="2" class="text-center">Closing stocks of concentrate at the Smelter/Plant</th>
                                                            <th colspan="3" class="text-center">Metals(*) recovered (specify)</th>
                                                            <th colspan="3" class="text-center">Other by-products, if any,recovered</th>
                                                            <th style="width: 35%;" class="noprint" rowspan="2">Actions</th>
                                                        </tr>
                                                        <tr>
                                                            <th>Quantity</th>
                                                            <th>Mineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>QuMineral Content/Grade</th>
                                                            <th>Quantity</th>
                                                            <th>Grade</th>
                                                            <th>Value</th>
                                                            <th>Quantity</th>
                                                            <th>Grade</th>
                                                            <th>Value</th>
                                                        </tr>
                                                    </thead>

                                                </table>

                                            </div>
                                            <br />

                                            <h9 class="text-brown font-weight-bold">(*) Please give category-wise break-up viz blister, fire refined copper, cathodes, electrolytic copper wire bars, lead ingots, zinc cathodes, zinc dross, gold, tungsten etc</h9>


                                        </div>


                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a id="second-tab" data-toggle="tab" href="#LAD" class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious" role="tab" aria-controls="second" aria-selected="false">Previous</a>
                                            <a id="third-tab" data-toggle="tab" href="#DWM" class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext" role="tab" aria-controls="third" aria-selected="false"> Next</a>
                                        </div>
                                    </div>


                                </div>

                                <div class="tab-pane fade" id="DWM" role="tabpanel" aria-labelledby="Fourth-tab">


                                    <div class="form-group row">
                                        <div class="col-sm-12">

                                            <h5 class="text-brown font-weight-bold">5.Sales during the month</h5>

                                        </div>

                                        <a href="javascript:void(0);" class="btn btn-primary btn-md ml-0" data-target="#Poptable3" data-toggle="modal"
                                           data-target=".alert-modal" onclick="ClearTable3()">Add sales during the month</a>
                                        <div class="col-sm-12">
                                            <div class="table-responsive">
                                                <table id="table3" class="table table-sm table-bordered ROM">
                                                    <thead>
                                                        <tr>
                                                            <th width="30" rowspan="2">Sl#</th>
                                                            <th rowspan="2">Mietal/Products</th>
                                                            <th colspan="2">Opening stocks of Mietal/Products</th>
                                                            <th rowspan="2">Place of Sale</th>
                                                            <th colspan="3" class="text-center">Metal Product Sold(@@)</th>
                                                            <th colspan="2" class="text-center">Closing Stocks of metal/Products</th>

                                                            <th class="noprint" rowspan="2">Actions</th>
                                                        </tr>
                                                        <tr>
                                                            <th>Quantity</th>
                                                            <th>Grade</th>
                                                            <th>Quantity</th>
                                                            <th>Grade</th>

                                                            <th>Value(#)(₹)</th>
                                                            <th>Quantity</th>
                                                            <th>Grade</th>

                                                        </tr>
                                                    </thead>

                                                </table>

                                            </div>
                                            <br />

                                            <h9 class="text-brown font-weight-bold">Note:</h9>
                                            <h9 class="text-brown font-weight-bold">(#) Please give ex-plant sale value</h9><br />
                                            <h9 class="text-brown font-weight-bold">(@@) Please give category-wise break-up of metals and other products sold</h9>


                                        </div>


                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a id="second-tab" data-toggle="tab" href="#RRP" class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious" role="tab" aria-controls="second" aria-selected="false">Previous</a>
                                            <a id="third-tab" data-toggle="tab" href="#ADE" class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext" role="tab" aria-controls="third" aria-selected="false"> Next</a>
                                        </div>
                                    </div>


                                </div>

                                <div id="ADE" class="tab-pane fade">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin: 15px 0;">
                                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                            @Html.HiddenFor(m => m.objDeduction_made.Flag)
                                            @Html.HiddenFor(m => m.objDeduction_made.DeductionMade_Id)

                                            @Html.Label("Captive dispatches sales:")
                                            <input type="radio" id="CExMineSaleYes" name="CExMineSale" value="Yes" style="width: 20px; border-color: black; border: 1px" />Yes
                                            <input type="radio" id="CExMineSaleNo" name="CExMineSale" checked="checked" value="No" style="width: 20px; border-color: black; border: 1px" />No
                                        </div>

                                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                            @Html.Label("Ex-mine sales:")
                                            <input type="radio" id="ex_mineYes" name="ex_mineSale" value="Yes" style="width: 20px; border-color: black; border: 1px" />Yes
                                            <input type="radio" id="ex_mineNo" name="ex_mineSale" value="No" checked="checked" style="width: 20px; border-color: black; border: 1px" />No
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin: 7px 0;">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            @Html.Label("6. Details of deductions made from sale value for computation of Ex-mine price (₹ - Unit)", "6. Details of deductions made from sale value for computation of Ex-mine price (₹ - Unit)")
                                            <hr>
                                            <table style="width: 100%">
                                                <tr>
                                                    <td style="width: 40%">Deduction claimed # </td>
                                                    <td style="width: 30%">Amount ( in ₹ - Unit)</td>
                                                    <td style="width: 30%">Remarks</td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        a)Cost of transportation
                                                        <br />
                                                        (indicate loading station and distance from mine in remarks)
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Amount1, new { @class = "form-control", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeDeductionMade();" })
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Remarks1, new { @class = "form-control" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        b)Loading and unloading charges<br />
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Amount2, new { @class = "form-control", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeDeductionMade();" })
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Remarks2, new { @class = "form-control" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        c)Railway freight, if applicable<br />
                                                        (indicate destination and distance)
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Amount3, new { @class = "form-control", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeDeductionMade();" })
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Remarks3, new { @class = "form-control" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        d)Port handling charges or export duty<br />
                                                        (indicate name of port)
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Amount4, new { @class = "form-control", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeDeductionMade();" })
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Remarks4, new { @class = "form-control" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        e)Charges for sampling and analysis <br />
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Amount5, new { @class = "form-control", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeDeductionMade();" })
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Remarks5, new { @class = "form-control" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        f)Rent for the plot at Stocking yard <br />
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Amount6, new { @class = "form-control", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeDeductionMade();" })
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Remarks6, new { @class = "form-control" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        g) Other charges(specify clearly)@Html.TextBoxFor(m => m.objDeduction_made.Deduction_claimedType7, new { @class = "form-control" })
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Amount7, new { @class = "form-control", @onkeydown = "quantity_Onchange(this,event);", @onchange = "TextChangeDeductionMade();" })
                                                    </td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.Remarks7, new { @class = "form-control" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Total (a) to (g)</td>
                                                    <td>
                                                        @Html.TextBoxFor(m => m.objDeduction_made.TotalAmount, new { @class = "form-control" })
                                                    </td>
                                                    <td></td>
                                                </tr>
                                            </table>
                                            <br />
                                            <p># Not applicable for captive dispatches and ex-mine sales</p>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-sm-12 text-center">
                                                <a id="second-tab" data-toggle="tab" href="#DWM" class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious" role="tab" aria-controls="second" aria-selected="false">Previous</a>
                                                <a id="third-tab" data-toggle="tab" href="#SD" class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext" role="tab" aria-controls="third" aria-selected="false"> Next</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="SD" role="tabpanel" aria-labelledby="Sixth-tab">


                                    <div class="form-group row">
                                        <div class="col-sm-12">

                                            <h5 class="text-brown font-weight-bold">7. Sales/ Dispatches of ore and concentrates effected for Domestic Purposes and for Exports</h5>

                                        </div>

                                        <a href="javascript:void(0);" class="btn btn-primary btn-md ml-0" data-target="#Poptable4" data-toggle="modal"
                                           data-target=".alert-modal" onclick="ClearTable4()">Add sales/Dispatches of ore</a>
                                        <div class="col-sm-12">
                                            <div class="table-responsive">
                                                <table id="table4" class="table table-sm table-bordered ROM">
                                                    <thead>
                                                        <tr>
                                                            <th width="30" rowspan="2">Sl#</th>
                                                            <th rowspan="2">Mineral Grade</th>
                                                            <th rowspan="2">Nature of Despatch (indicate whether Domestic Sale or Domestic Transfer or Captive consumption or Export)</th>
                                                            <th colspan="4">For Domestic Purpose</th>
                                                            <th colspan="3" class="text-center">For Export</th>


                                                            <th class="noprint" rowspan="2">Actions</th>
                                                        </tr>
                                                        <tr>
                                                            <th>Registration No Alloted by IBM</th>
                                                            <th>Consignee Name</th>
                                                            <th>Quantity</th>
                                                            <th>Sale Value (₹)</th>

                                                            <th>Country</th>
                                                            <th>Quantity</th>
                                                            <th>F.O.B Value(₹)</th>

                                                        </tr>
                                                    </thead>

                                                </table>
                                            </div>
                                            <br />


                                            <h9 class="text-brown font-weight-bold">## To indicate separately if more than one buyer</h9><br />
                                            <h9 class="text-brown font-weight-bold">NOTE:- Mine owners are required to substantiate domestic sale value/ FOB value for each grade quoted above with copy of invoices (not to be submitted with the return; to be produced whenever required)</h9>


                                        </div>


                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-12 text-center">
                                            <a id="second-tab" data-toggle="tab" href="#ADE" class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious" role="tab" aria-controls="second" aria-selected="false">Previous</a>
                                            <a id="third-tab" data-toggle="tab" href="#RID" class="btn btn-primary btn-md ml-0 waves-effect waves-light btnNext" role="tab" aria-controls="third" aria-selected="false"> Next</a>
                                        </div>
                                    </div>


                                </div>

                                <div id="RID" class="tab-pane fade">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin: 15px 0;">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                                @Html.HiddenFor(m => m.objReason_Inc_Dec.Flag)
                                                @Html.HiddenFor(m => m.objReason_Inc_Dec.Reason_Inc_Dec_Id)
                                                @Html.HiddenFor(m => m.objReason_Inc_Dec.FinalSubmitFlag)
                                            </div>

                                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                            </div>

                                            <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin: 15px 0;">
                                        <div class="row">
                                            @Html.Label("8. Give reasons for increase/decrease in production/nil production, if any, during the month compared to the previous month", "8. Give reasons for increase/decrease in production/nil production, if any, during the month compared to the previous month")
                                            <hr>
                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                @Html.TextBoxFor(m => m.objReason_Inc_Dec.productionIncrDecResion, new { @class = "form-control" })

                                            </div>
                                        </div>
                                        <div class="row">
                                            @Html.Label("9. Give reasons for increase/decrease in grade wise ex-mine price, if any, during the month compared to the previous month", "9. Give reasons for increase/decrease in grade wise ex-mine price, if any, during the month compared to the previous month")
                                            <hr>
                                            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">

                                                @Html.TextBoxFor(m => m.objReason_Inc_Dec.ex_minepriceIncrDecResion, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <label>
                                                @Html.CheckBoxFor(m => m.objReason_Inc_Dec.certify)
                                                I certify that the information furnished above is correct and complete in all respects
                                            </label>
                                        </div>
                                    </div>
                                    <div class="row">

                                        <div class="col-sm-12 text-center">
                                            <a id="third-tab" data-toggle="tab" href="#SD" class="btn btn-dark btn-md ml-0 waves-effect waves-light btnPrevious" role="tab" aria-controls="third" aria-selected="false"> Previous</a>
                                            <input type="submit" id="btnReasonForInDcSave" value="Save" class="btn btn-success btn-md ml-0 waves-effect waves-light btnsave" onclick="return OnSaveReason_Inc_Dec();">

                                            <input type="submit" value="Update" id="btnUpdateReason_Inc_Dec" style="display: none" class="btn btn-secondary btn-md ml-0 waves-effect waves-light btnsave" onclick="return OnUpdateReason_Inc_Dec();">
                                            <input type="submit" value="Submit" id="btnFinalSubmit" style="display: none" class="btn btn-success btn-md ml-0 waves-effect waves-light btnsave" onclick="return OnSubmit();">
                                        </div>
                                    </div>

                                </div>


                            </div>
                        }
                    </div>
                </section>

            </div>

            <div>

            </div>
        </div>



    </div>
</section>


<div class="modal fade alert-modal" tabindex="-1" role="dialog" aria-labelledby="alertModal" id="Addrecoveryconcentrator" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content" style="width: 800px;">
            <div class="modal-header p-2">
                <h5 class="modal-title m-0">Add Recoveries at Concentrator/Mill/Plant</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Opening stocks of the Ore at concentrator/plant</b>
                    </div>

                    <div class="col-md-6">
                        <b style="color: red;">Ore received from the mine</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OS_qty" name="Obj_RecoveriesModel.OS_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OreReceived_qty" name="OreReceived_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OS_grade" name="OS_grade" type="text">
                    </div>
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OreReceived_grade" name="OreReceived_grade" type="text">
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Concentrates * Obtained</b>
                    </div>

                    <div class="col-md-6">
                        <b style="color: red;">Ore treated</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_qty" name="Concentrates_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OreTreated_qty" name="OreTreated_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_grade" name="Concentrates_grade" type="text">
                    </div>
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OreTreated_grade" name="OreTreated_grade" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Value (₹)<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_Value" name="Concentrates_Value" type="text">
                    </div>

                </div>
                <br />
                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Tailings</b>
                    </div>

                    <div class="col-md-6">
                        <b style="color: red;">Closing stocks of concentrates at the concentrator/plant</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Tailings_Qty" name="Tailings_Qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="CS_qty" name="CS_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Tailing_grade" name="Tailing_grade" " type="text">
                    </div>
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="CS_grade" name="CS_grade" type="text">
                    </div>
                </div>
                <button class="btn btn-primary mb-1" id="btnRecoveriesConcen">Submit</button>
                <button class="btn btn-secondary mb-1" style="display:none" id="UpdRecoveriesConcen">Update</button>

            </div>

        </div>
    </div>
</div>


<!-- alert 1-->

<div class="modal fade alert-modal" tabindex="-1" role="dialog" aria-labelledby="alertModal" id="Poptable2" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content" style="width: 800px;">
            <div class="modal-header p-2">
                <h5 class="modal-title m-0">Add Recoveries at Smelter/Mill/Plant</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Opening Stocks of the concentrates at the smelter /plant</b>
                    </div>

                    <div class="col-md-6">
                        <b style="color: red;">Concentrates received from concentrator/plant</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OS_qtys" name="OS_qtys" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentratesreceived_qty" name="Concentratesreceived_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OS_grades" name="OS_grades" type="text">
                    </div>
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentratesreceived_grade" name="Concentratesreceived_grade" type="text">
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Concentrates received from other sources (specify)</b>
                    </div>

                    <div class="col-md-6">
                        <b style="color: red;">Concentrates sold (if any)</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_othersources_qty" name="Concentrates_othersources_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_sold_qty" name="Concentrates_sold_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_othersources_grade" name="Concentrates_othersources_grade" type="text">
                    </div>
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_sold_grade" name="Concentrates_sold_grade" type="text">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Concentrates treated</b>
                    </div>

                    <div class="col-md-6">
                        <b style="color: red;">Closing stocks of concentrate at the Smelter/Plant</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_treated_qty" name="Concentrates_treated_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="CS_qtys" name="CS_qtys" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Concentrates_treated_grade" name="Concentrates_treated_grade" type="text">
                    </div>
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="CS_grades" name="CS_grades" type="text">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Metals(*) recovered (specify)</b>
                    </div>

                    <div class="col-md-6">
                        <b style="color: red;">Other by-products, if any,recovered</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Metalsrecovered_qty" name="Metalsrecovered_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Other_byproducts_qty" name="Other_byproducts_qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Metalsrecovered_grade" name="Metalsrecovered_grade" type="text">
                    </div>
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Metal content/grade<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Other_byproducts_grade" name="Other_byproducts_grade" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Value (₹)<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Metalsrecovered_Value" name="Metalsrecovered_Value" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Value (₹)<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Other_byproducts_Value" name="Other_byproducts_Value" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <button class="btn btn-primary mb-1" id="btntable2">Submit</button>
                <button class="btn btn-secondary mb-1" style="display:none" id="Updtable2">Update</button>

            </div>

        </div>
    </div>
</div>


<!-- alert 1-->
<div class="modal fade tab4-modal" tabindex="-1" role="dialog" id="Poptable3" aria-labelledby="alertModal" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content" style="width: 800px;">
            <div class="modal-header p-2">
                <h5 class="modal-title m-0">Add sales during the month</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">



                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Metal/Product"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Product" name="Product" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Grade"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        @Html.DropDownListFor(model => model.Obj_SaleProductModel.MineralId6, ViewBag.Grade as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control", autofocus = "autofocus" })
                    </div>
                </div>


                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Opening stocks of Metals/Products</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="OS_Qty" name="OS_Qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>

                </div>


                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Metals/Products sold</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Sold_Qty" name="Sold_Qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                    <div class="col-md-2">
                        @(Html.Label("Value"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="Sold_Value" name="Sold_Value" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label for="Metal_content_grade">Place of sale<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="PlaceOfSale" name="PlaceOfSale" type="text">
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-6">
                        <b style="color: red;">Closing stocks of Metals/Products</b>
                    </div>
                </div>
                <br />

                <div class="row">
                    <div class="col-md-2">
                        @(Html.Label("Quantity"))
                        <span class="text-danger">*</span>
                    </div>
                    <div class="col-md-4" style="padding-bottom: 0.6em;">

                        <input class="form-control" id="CS_Qty" name="CS_Qty" onkeydown="quantity_Onchange(this,event);" type="text">
                    </div>

                </div>

                <button class="btn btn-primary mb-1" id="btntable3">Submit</button>
                <button class="btn btn-secondary mb-1" style="display:none" id="Updtable3">Update</button>

            </div>

        </div>
    </div>
</div>

<!-- alert 1-->
<script>

    function ForExport() {

        var NOD = $("#NatureofDispatch").val();
        if (NOD == "Export") {
            $("#ForExport").show();
            $("#ForDomestic").hide();
            $("#ForDomestic").hide();

            $("#RegistrationNo").val(null);
            $("#PurchaserConsinee").val(null);
            $("#DomesticPurposes_Quantity").val(null);
            $("#SaleValue").val(null);
        }
        else if (NOD == "Domestic Sale" || NOD == "Domestic Transfer" || NOD == "Captive Consumption") {
            $("#ForDomestic").show();
            $("#ForExport").hide();

            $("#Country").val(null);
            $("#Export_Quantity").val(null);
            $("#FOBValue").val(null);
        }
    }
</script>
<div class="modal fade table2-modal" tabindex="-1" role="dialog" id="Poptable4" aria-labelledby="alertModal" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header p-2">
                <h5 class="modal-title m-0">Add Sale / Dispatches of Ore</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label font-weight-bolder">Mineral Form<span class="text-danger">*</span></label>
                            <div class="col-sm-7">
                                @Html.DropDownListFor(model => model.Obj_SalesDispatchOf_OreModel.MineralNatureId, ViewBag.MineralNatureProd as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control", autofocus = "autofocus" })
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label font-weight-bolder">Mineral Grade<span class="text-danger">*</span></label>
                            <div class="col-sm-7">

                                @Html.DropDownListFor(model => model.Obj_SalesDispatchOf_OreModel.MineralGradeId, ViewBag.Grade as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control", autofocus = "autofocus" })
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label font-weight-bolder">Nature of Dispatch <span class="text-danger">*</span></label>
                            <div class="col-sm-7">
                                @Html.DropDownList("NatureofDispatch", ViewBag.NatureofDisp as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control", autofocus = "autofocus", @onchange = "ForExport();" })
                            </div>
                        </div>
                    </div>
                    <div id="ForDomestic">
                        <label>For Domestic Purposes</label><hr />
                        <div class="col-sm-12">
                            <div class="form-group row">
                                <label class="col-sm-4 col-form-label font-weight-bolder">Registration No<span class="text-danger">*</span></label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="RegistrationNo" name="RegistrationNo" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group row">
                                <label class="col-sm-4 col-form-label font-weight-bolder">Consignee name<span class="text-danger">*</span></label>
                                <div class="col-sm-7">
                                    @Html.DropDownList("PurchaserConsinee", ViewBag.PurcConsig as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control", autofocus = "autofocus" })
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group row">
                                <label class="col-sm-4 col-form-label font-weight-bolder">Quantity<span class="text-danger">*</span></label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="DomesticPurposes_Quantity" name="DomesticPurposes_Quantity" onkeypress="MakeNumeric(this)" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group row">
                                <label class="col-sm-4 col-form-label font-weight-bolder">Sale Value (₹)<span class="text-danger">*</span></label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="SaleValue" name="SaleValue" type="text" onkeypress="MakeNumeric(this)">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="ForExport" style="display: none">
                        <label>For export</label><hr />
                        <div class="col-sm-12">
                            <div class="form-group row">
                                <label class="col-sm-4 col-form-label font-weight-bolder"> Country<span class="text-danger">*</span></label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="Country" name="Country" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group row">
                                <label class="col-sm-4 col-form-label font-weight-bolder">Quantity<span class="text-danger">*</span></label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="Export_Quantity" name="Export_Quantity" onkeypress="MakeNumeric(this)" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group row">
                                <label class="col-sm-4 col-form-label font-weight-bolder">F.O.B Value (₹)","F.O.B Value (₹)<span class="text-danger">*</span></label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="FOBValue" name="FOBValue" onkeypress="MakeNumeric(this)" type="text">
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <button class="btn btn-primary mb-1" id="btntable4">Submit</button>
                <button class="btn btn-secondary mb-1" style="display:none" id="Updtable4">Update</button>

            </div>

        </div>
    </div>
</div>

@*Popup Concentratot Added By Debaraj Swain 27-Jun-2021*@
<script>

    $(document).ready(function () {

        tblrecoveriesatconcentratot();

        $("#btnRecoveriesConcen").click(function () {
            debugger;
                 var Mineralid = $('#objProduction_MineralId1').val();
            var monthYear = $('#Month_Year').val();
            var UID = $('#UID').val();

                var OS_qty = $('#OS_qty').val();
                var OreReceived_qty = $('#OreReceived_qty').val();
                var OS_grade = $('#OS_grade').val();
                var OreReceived_grade = $('#OreReceived_grade').val();

                var Concentrates_qty = $('#Concentrates_qty').val();
                var OreTreated_qty = $('#OreTreated_qty').val();
                var Concentrates_grade = $('#Concentrates_grade').val();
                var OreTreated_grade = $('#OreTreated_grade').val();
                var Concentrates_Value = $('#Concentrates_Value').val();

                var Tailings_Qty = $('#Tailings_Qty').val();
                var CS_qty = $('#CS_qty').val();
                var Tailing_grade = $('#Tailing_grade').val();
                var CS_grade = $('#CS_grade').val();



            if (!blankFieldValidation("OS_qty", "Opening Stock Quntity")) {
                return false;
            }
            if (!blankFieldValidation("OreReceived_qty", "Ore Received Quntity")) {
                return false;
            }
            if (!blankFieldValidation("OS_grade", "Opening Mineral Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("OreReceived_grade", "Ore Received Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_qty", "Concentrate Quntity")) {
                return false;
            }
            if (!blankFieldValidation("OreTreated_qty", "Ore treated Quntity")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_grade", "Concentrate Mineral Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("OreTreated_grade", "Ore treated Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_Value", "Concentrate Value")) {
                return false;
            }
            if (!blankFieldValidation("Tailings_Qty", "Tailing Quntity")) {
                return false;
            }
            if (!blankFieldValidation("CS_qty", "Closing Quntity")) {
                return false;
            }
            if (!blankFieldValidation("Tailing_grade", "Tailing Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("CS_grade", "Closing Stock Content/Grade")) {
                return false;
            }


                  $.ajax({
                        type: "POST",
                        url: '@Url.Action("ADDRecoveries_Concentrator", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                      data: { 'MineralId2': Mineralid, 'OS_qty': OS_qty, 'OS_grade': OS_grade, 'OreReceived_qty': OreReceived_qty, 'OreReceived_grade': OreReceived_grade, 'OreTreated_qty': OreTreated_qty, 'OreTreated_grade': OreTreated_grade, 'Concentrates_qty': Concentrates_qty, 'Concentrates_grade': Concentrates_grade, 'Concentrates_Value': Concentrates_Value, 'Tailings_Qty': Tailings_Qty, 'Tailing_grade': Tailing_grade, 'CS_qty': CS_qty, 'CS_grade': CS_grade, 'Month_Year': monthYear, 'UID': UID  },
                        cache: false,
                        datatype: "JSON",
                      success: function (result) {
                          if (result == 1)
                          {
                              swal("","Record Added Successfully", "success");
                              tblrecoveriesatconcentratot();
                              $('#Addrecoveryconcentrator').modal('toggle');
                          }
                          else
                            {
                              swal("", "Some error occred..Please Try again", "warning");
                              tblrecoveriesatconcentratot();
                              $('#Addrecoveryconcentrator').modal('toggle');
                            }


                        }


                    });
        })

        $("#UpdRecoveriesConcen").click(function () {

                var ID = $("#Table1ID").val();
                 var Mineralid = $('#objProduction_MineralId1').val();
            var monthYear = $('#Month_Year').val();
            var UID = $('#UID').val();

                var OS_qty = $('#OS_qty').val();
                var OreReceived_qty = $('#OreReceived_qty').val();
                var OS_grade = $('#OS_grade').val();
                var OreReceived_grade = $('#OreReceived_grade').val();

                var Concentrates_qty = $('#Concentrates_qty').val();
                var OreTreated_qty = $('#OreTreated_qty').val();
                var Concentrates_grade = $('#Concentrates_grade').val();
                var OreTreated_grade = $('#OreTreated_grade').val();
                var Concentrates_Value = $('#Concentrates_Value').val();

                var Tailings_Qty = $('#Tailings_Qty').val();
                var CS_qty = $('#CS_qty').val();
                var Tailing_grade = $('#Tailing_grade').val();
                var CS_grade = $('#CS_grade').val();

            if (!blankFieldValidation("OS_qty", "Opening Stock Quntity")) {
                return false;
            }
            if (!blankFieldValidation("OreReceived_qty", "Ore Received Quntity")) {
                return false;
            }
            if (!blankFieldValidation("OS_grade", "Opening Mineral Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("OreReceived_grade", "Ore Received Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_qty", "Concentrate Quntity")) {
                return false;
            }
            if (!blankFieldValidation("OreTreated_qty", "Ore treated Quntity")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_grade", "Concentrate Mineral Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("OreTreated_grade", "Ore treated Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_Value", "Concentrate Value")) {
                return false;
            }
            if (!blankFieldValidation("Tailings_Qty", "Tailing Quntity")) {
                return false;
            }
            if (!blankFieldValidation("CS_qty", "Closing Quntity")) {
                return false;
            }
            if (!blankFieldValidation("Tailing_grade", "Tailing Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("CS_grade", "Closing Stock Content/Grade")) {
                return false;
            }

                  $.ajax({
                        type: "POST",
                        url: '@Url.Action("UpdateRecoveries_Concentrator", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                      data: { 'id': ID, 'MineralId2': Mineralid, 'OS_qty': OS_qty, 'OS_grade': OS_grade, 'OreReceived_qty': OreReceived_qty, 'OreReceived_grade': OreReceived_grade, 'OreTreated_qty': OreTreated_qty, 'OreTreated_grade': OreTreated_grade, 'Concentrates_qty': Concentrates_qty, 'Concentrates_grade': Concentrates_grade, 'Concentrates_Value': Concentrates_Value, 'Tailings_Qty': Tailings_Qty, 'Tailing_grade': Tailing_grade, 'CS_qty': CS_qty, 'CS_grade': CS_grade, 'Month_Year': monthYear, 'OreReceived_grade': OreReceived_grade, 'UID': UID},
                        cache: false,

                        datatype: "JSON",
                      success: function (result) {
                          if (result == 1)
                          {
                              swal("","Record Updated Successfully" , "success");
                              tblrecoveriesatconcentratot();
                              $('#Addrecoveryconcentrator').modal('toggle');
                          }
                          else
                            {
                              swal("", "Some error occred..Please Try again", "warning");
                              tblrecoveriesatconcentratot();
                              $('#Addrecoveryconcentrator').modal('toggle');
                            }


                        }


                    });
            })



    });

    function ClearTable1() {
        $("#btnRecoveriesConcen").css("display", "block");
        $("#UpdRecoveriesConcen").css("display", "none");
        $("#OS_qty").val('');
        $("#OS_grade").val('');
        $("#OreReceived_qty").val('');
        $("#OreReceived_grade").val('');
        $("#OreTreated_qty").val('');
        $("#OreTreated_grade").val('');
        $("#Concentrates_qty").val('');
        $("#Concentrates_grade").val('');
        $("#Concentrates_Value").val('');
        $("#Tailings_Qty").val('');
        $("#Tailing_grade").val('');
        $("#CS_qty").val('');
        $("#CS_grade").val('');

    }


    function EditTable1(Recoverie_Id, MineralId2, OS_qty, OS_grade, OreReceived_qty, OreReceived_grade, OreTreated_qty, OreTreated_grade, Concentrates_qty, Concentrates_grade, Concentrates_Value, Tailings_Qty, Tailing_grade, CS_qty, CS_grade) {

        $("#Table1ID").val(Recoverie_Id);

        $("#OS_qty").val(OS_qty);
        $("#OS_grade").val(OS_grade);
        $("#OreReceived_qty").val(OreReceived_qty);
        $("#OreReceived_grade").val(OreReceived_grade);
        $("#OreTreated_qty").val(OreTreated_qty);
        $("#OreTreated_grade").val(OreTreated_grade);
        $("#Concentrates_qty").val(Concentrates_qty);
        $("#Concentrates_grade").val(Concentrates_grade);
        $("#Concentrates_Value").val(Concentrates_Value);
        $("#Tailings_Qty").val(Tailings_Qty);
        $("#Tailing_grade").val(Tailing_grade);
        $("#CS_qty").val(CS_qty);
        $("#CS_grade").val(CS_grade);
        $("#btnRecoveriesConcen").css("display", "none");
        $("#UpdRecoveriesConcen").css("display", "block");
    }
    function DeleteRTable1(ID) {
        if (confirm("Are you sure to delete the record?")) {

            var ID = ID;
            var UID = $('#UID').val();
            if (ID == 0 || ID == null) {
                swal("", "Something went wrong ..Please Try Again", "warning");
                return false
            }

            $.ajax({
                type: "POST",
                url: '@Url.Action("DeleteRecoveries", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                data: { 'ID': ID, 'UID': UID },
                cache: false,

                datatype: "JSON",
                success: function (result) {
                    if (result == 1) {
                        swal("","Record Deleted Successfully" , "success");
                        tblrecoveriesatconcentratot();

                    }
                    else {
                        swal("", "Some error occred..Please Try again", "warning");
                        tblrecoveriesatconcentratot();

                    }


                }


            });
        }
        else
        {
            return false;
        }
            }
    function tblrecoveriesatconcentratot()
    {

        var monthYear = $('#Month_Year').val();
        var UID =@TempData["UID"];
         $.ajax({
                        type: "POST",
                        url: '@Url.Action("Get1sttable", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                        data: { 'MonthYear': monthYear, 'UserId': UID},
                        cache: false,

                        datatype: "JSON",
                    success: function (list) {


                        $("#tblrecoveriesatconcentratot > tbody").html("");
                        $('#tblrecoveriesatconcentratot').append('<tbody>');
                        for (var i = 0; i < list.length; i++)
                        {
                            $('#tblrecoveriesatconcentratot').append('<tr><td><input type="hidden" id="recoverie_Id" name="recoverie_Id" value=' + list[i].recoverie_Id + ' />' + (i + 1) + '</td><td>' + list[i].mineralName + '</td><td>' + list[i].oS_qty + '</td><td>' + list[i].oS_grade + '</td> <td>' + list[i].oreReceived_qty + '</td> <td>' + list[i].oreReceived_grade + '</td><td>' + list[i].oreTreated_qty + '</td><td>' + list[i].oreTreated_grade + '</td><td>' + list[i].concentrates_qty + '</td><td>' + list[i].concentrates_grade + '</td><td>' + list[i].concentrates_Value + '</td><td>' + list[i].tailings_Qty + '</td><td>' + list[i].tailing_grade + '</td><td>' + list[i].cS_qty + '</td><td>' + list[i].cS_grade + '</td><td class="noprint"> <a data-toggle="modal" data-target="#Addrecoveryconcentrator" class="btn-floating btn-outline-primary btn-sm" data-toggle="tooltip" data-placement="top" onclick="EditTable1(' + list[i].recoverie_Id + ' ,' + list[i].mineralId2 + ',\'' + list[i].oS_qty + '\',\'' + list[i].oS_grade + '\',\'' + list[i].oreReceived_qty + '\',\'' + list[i].oreReceived_grade + '\',\'' + list[i].oreTreated_qty + '\',\'' + list[i].oreTreated_grade + '\',\'' + list[i].concentrates_qty + '\',\'' + list[i].concentrates_grade + '\',\'' + list[i].concentrates_Value + '\',\'' + list[i].tailings_Qty + '\',\'' + list[i].tailing_grade + '\',\'' + list[i].cS_qty + '\',\'' + list[i].cS_grade + '\')" title="Edit"><i class="icon-pencil-alt-solid"></i></a><a class="btn-floating btn-outline-danger btn-sm"data-toggle="tooltip" onclick="DeleteRTable1(' + list[i].recoverie_Id + ')" data-placement="top" title="Delete"><i class="icon-trash-alt-solid"></i></a>  </td> </tr> ');


                        }
                        $('#tblrecoveriesatconcentratot').append('</tbody>');
                        var count = $('#tblrecoveriesatconcentratot tr').length;
                        $('#Table1len').val(count);
                        //$('#datatable').DataTable();

                        }


         });
        //$('#datatable').DataTable();

    }
</script>
@* End Popup Concentratot Portion*@

@*Popup Smelter Added By Debaraj Swain 28-Jun-2021*@
<script>

    $(document).ready(function () {

        Gettable2();

        $("#btntable2").click(function () {

            var Mineralid = $('#objProduction_MineralId1').val();
            var monthYear = $('#Month_Year').val();
            var UID = $('#UID').val();

            var OS_qty = $('#OS_qtys').val();
            var OS_grade = $('#OS_grades').val();
            var Concentratesreceived_qty = $('#Concentratesreceived_qty').val();
            var Concentratesreceived_grade = $('#Concentratesreceived_grade').val();

            var Concentrates_othersources_qty = $('#Concentrates_othersources_qty').val();
            var Concentrates_othersources_grade = $('#Concentrates_othersources_grade').val();
            var Concentrates_sold_qty = $('#Concentrates_sold_qty').val();
            var Concentrates_sold_grade = $('#Concentrates_sold_grade').val();

            var Concentrates_treated_qty = $('#Concentrates_treated_qty').val();
            var Concentrates_treated_grade = $('#Concentrates_treated_grade').val();
            var CS_qty = $('#CS_qtys').val();
            var CS_grade = $('#CS_grades').val();


            var Metalsrecovered_qty = $('#Metalsrecovered_qty').val();
            var Metalsrecovered_grade = $('#Metalsrecovered_grade').val();
            var Metalsrecovered_Value = $('#Metalsrecovered_Value').val();
            var Other_byproducts_qty = $('#Other_byproducts_qty').val();
            var Other_byproducts_grade = $('#Other_byproducts_grade').val();
            var Other_byproducts_Value = $('#Other_byproducts_Value').val();


            if (!blankFieldValidation("OS_qtys", "Opening Stock Quntity")) {
                return false;
            }
            if (!blankFieldValidation("Concentratesreceived_qty", "Concentrates Received Quntity")) {
                return false;
            }
            if (!blankFieldValidation("OS_grades", "Opening Mineral Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentratesreceived_grade", "Concentrates Received Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_othersources_qty", "Concentrate Other Sourse")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_othersources_grade", "Concentrate Other Sourse grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_sold_qty", "Sold Qty")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_sold_grade", "Sold Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_treated_qty", "Concentrate treated Qty.")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_treated_grade", "Concentrate treated grade")) {
                return false;
            }
            if (!blankFieldValidation("CS_qtys", "Closing Stock Qty.")) {
                return false;
            }
            if (!blankFieldValidation("CS_grades", "Closing Stock grade")) {
                return false;
            }
            if (!blankFieldValidation("Metalsrecovered_qty", "metal recovered Qty")) {
                return false;
            }
            if (!blankFieldValidation("Metalsrecovered_grade", "metal recovered grade")) {
                return false;
            }
            if (!blankFieldValidation("Metalsrecovered_Value", "metal recovered Value")) {
                return false;
            }
            if (!blankFieldValidation("Other_byproducts_qty", "by-products Qty.")) {
                return false;
            }
            if (!blankFieldValidation("Other_byproducts_grade", "by-products grade")) {
                return false;
            }
            if (!blankFieldValidation("Other_byproducts_Value", "by-products Value")) {
                return false;
            }



                  $.ajax({
                        type: "POST",
                        url: '@Url.Action("AddRecoveriesSmelter", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                      data: { 'MineralId3': Mineralid, 'OS_qty': OS_qty, 'OS_grade': OS_grade, 'Concentratesreceived_qty': Concentratesreceived_qty, 'Concentratesreceived_grade': Concentratesreceived_grade, 'Concentrates_othersources_qty': Concentrates_othersources_qty, 'Concentrates_othersources_grade': Concentrates_othersources_grade, 'Concentrates_sold_qty': Concentrates_sold_qty, 'Concentrates_sold_grade': Concentrates_sold_grade, 'Concentrates_treated_qty': Concentrates_treated_qty, 'Concentrates_treated_grade': Concentrates_treated_grade, 'CS_qty': CS_qty, 'CS_grade': CS_grade, 'Metalsrecovered_qty': Metalsrecovered_qty, 'Metalsrecovered_grade': Metalsrecovered_grade, 'Metalsrecovered_Value': Metalsrecovered_Value, 'Other_byproducts_qty': Other_byproducts_qty, 'Other_byproducts_grade': Other_byproducts_grade, 'Other_byproducts_Value': Other_byproducts_Value, 'Month_Year': monthYear, 'UID': UID  },
                        cache: false,
                        datatype: "JSON",
                      success: function (result) {
                          if (result == 1)
                          {
                              swal("","Record Added Successfully" , "success");
                              Gettable2();
                              $('#Poptable2').modal('toggle');
                          }
                          else
                            {
                              swal("", "Some error occred..Please Try again", "warning");
                              Gettable2();
                              $('#Poptable2').modal('toggle');
                            }


                        }


                    });
            })
        $("#Updtable2").click(function () {
            var ID = $("#Table2ID").val();
            var Mineralid = $('#objProduction_MineralId1').val();
            var monthYear = $('#Month_Year').val();
            var UID = $('#UID').val();

            var OS_qty = $('#OS_qtys').val();
            var OS_grade = $('#OS_grades').val();
            var Concentratesreceived_qty = $('#Concentratesreceived_qty').val();
            var Concentratesreceived_grade = $('#Concentratesreceived_grade').val();

            var Concentrates_othersources_qty = $('#Concentrates_othersources_qty').val();
            var Concentrates_othersources_grade = $('#Concentrates_othersources_grade').val();
            var Concentrates_sold_qty = $('#Concentrates_sold_qty').val();
            var Concentrates_sold_grade = $('#Concentrates_sold_grade').val();

            var Concentrates_treated_qty = $('#Concentrates_treated_qty').val();
            var Concentrates_treated_grade = $('#Concentrates_treated_grade').val();
            var CS_qty = $('#CS_qtys').val();
            var CS_grade = $('#CS_grades').val();


            var Metalsrecovered_qty = $('#Metalsrecovered_qty').val();
            var Metalsrecovered_grade = $('#Metalsrecovered_grade').val();
            var Metalsrecovered_Value = $('#Metalsrecovered_Value').val();
            var Other_byproducts_qty = $('#Other_byproducts_qty').val();
            var Other_byproducts_grade = $('#Other_byproducts_grade').val();
            var Other_byproducts_Value = $('#Other_byproducts_Value').val();



            if (!blankFieldValidation("OS_qtys", "Opening Stock Quntity")) {
                return false;
            }
            if (!blankFieldValidation("Concentratesreceived_qty", "Concentrates Received Quntity")) {
                return false;
            }
            if (!blankFieldValidation("OS_grades", "Opening Mineral Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentratesreceived_grade", "Concentrates Received Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_othersources_qty", "Concentrate Other Sourse")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_othersources_grade", "Concentrate Other Sourse grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_sold_qty", "Sold Qty")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_sold_grade", "Sold Content/Grade")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_treated_qty", "Concentrate treated Qty.")) {
                return false;
            }
            if (!blankFieldValidation("Concentrates_treated_grade", "Concentrate treated grade")) {
                return false;
            }
            if (!blankFieldValidation("CS_qtys", "Closing Stock Qty.")) {
                return false;
            }
            if (!blankFieldValidation("CS_grades", "Closing Stock grade")) {
                return false;
            }
            if (!blankFieldValidation("Metalsrecovered_qty", "metal recovered Qty")) {
                return false;
            }
            if (!blankFieldValidation("Metalsrecovered_grade", "metal recovered grade")) {
                return false;
            }
            if (!blankFieldValidation("Metalsrecovered_Value", "metal recovered Value")) {
                return false;
            }
            if (!blankFieldValidation("Other_byproducts_qty", "by-products Qty.")) {
                return false;
            }
            if (!blankFieldValidation("Other_byproducts_grade", "by-products grade")) {
                return false;
            }
            if (!blankFieldValidation("Other_byproducts_Value", "by-products Value")) {
                return false;
            }


                  $.ajax({
                      type: "POST",
                        url: '@Url.Action("UpdateRecoveriesSmelter", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                      data: { 'Recovery_atSmelter_Id': ID,'MineralId3': Mineralid, 'OS_qty': OS_qty, 'OS_grade': OS_grade, 'Concentratesreceived_qty': Concentratesreceived_qty, 'Concentratesreceived_grade': Concentratesreceived_grade, 'Concentrates_othersources_qty': Concentrates_othersources_qty, 'Concentrates_othersources_grade': Concentrates_othersources_grade, 'Concentrates_sold_qty': Concentrates_sold_qty, 'Concentrates_sold_grade': Concentrates_sold_grade, 'Concentrates_treated_qty': Concentrates_treated_qty, 'Concentrates_treated_grade': Concentrates_treated_grade, 'CS_qty': CS_qty, 'CS_grade': CS_grade, 'Metalsrecovered_qty': Metalsrecovered_qty, 'Metalsrecovered_grade': Metalsrecovered_grade, 'Metalsrecovered_Value': Metalsrecovered_Value, 'Other_byproducts_qty': Other_byproducts_qty, 'Other_byproducts_grade': Other_byproducts_grade, 'Other_byproducts_Value': Other_byproducts_Value, 'Month_Year': monthYear, 'UID': UID  },
                        cache: false,

                        datatype: "JSON",
                      success: function (result) {
                          if (result == 1)
                          {
                              swal("","Record Updated Successfully" , "success");
                              Gettable2();
                              $('#Poptable2').modal('toggle');
                          }
                          else
                            {
                              swal("", "Some error occred..Please Try again", "warning");
                              Gettable2();
                              $('#Poptable2').modal('toggle');
                            }


                        }


                    });
            })



    });

    function ClearTable1() {
        $("#btntable2").css("display", "block");
        $("#Updtable2").css("display", "none");
        $("#OS_qtys").val('');
        $("#OS_grades").val('');
        $("#Concentratesreceived_qty").val('');
        $("#Concentratesreceived_grade").val('');
        $("#Concentrates_othersources_qty").val('');
        $("#Concentrates_othersources_grade").val('');
        $("#Concentrates_sold_qty").val('');
        $("#Concentrates_sold_grade").val('');
        $("#Concentrates_treated_qty").val('');
        $("#Concentrates_treated_grade").val('');
        $("#CS_qtys").val('');
        $("#CS_grades").val('');
        $("#Metalsrecovered_qty").val('');
        $("#Metalsrecovered_grade").val('');
        $("#Metalsrecovered_Value").val('');
        $("#Other_byproducts_qty").val('');
        $("#Other_byproducts_grade").val('');
        $("#Other_byproducts_Value").val('');

    }


    function EditTable2(Recoverie_Id, MineralId2, OS_qty, OS_grade, Concentratesreceived_qty, Concentratesreceived_grade, Concentrates_othersources_qty, Concentrates_othersources_grade, Concentrates_sold_qty, Concentrates_sold_grade, Concentrates_treated_qty, Concentrates_treated_grade, CS_qty, CS_grade, Metalsrecovered_qty, Metalsrecovered_grade, Metalsrecovered_Value, Other_byproducts_qty , Other_byproducts_grade , Other_byproducts_Value) {

        $("#Table2ID").val(Recoverie_Id);

        $("#OS_qtys").val(OS_qty);
        $("#OS_grades").val(OS_grade);
        $("#Concentratesreceived_qty").val(Concentratesreceived_qty);
        $("#Concentratesreceived_grade").val(Concentratesreceived_grade);
        $("#Concentrates_othersources_qty").val(Concentrates_othersources_qty);
        $("#Concentrates_othersources_grade").val(Concentrates_othersources_grade);
        $("#Concentrates_sold_qty").val(Concentrates_sold_qty);
        $("#Concentrates_sold_grade").val(Concentrates_sold_grade);
        $("#Concentrates_treated_qty").val(Concentrates_treated_qty);
        $("#Concentrates_treated_grade").val(Concentrates_treated_grade);
        $("#CS_qtys").val(CS_qty);
        $("#CS_grades").val(CS_grade);
        $("#Metalsrecovered_qty").val(Metalsrecovered_qty);
        $("#Metalsrecovered_grade").val(Metalsrecovered_grade);
        $("#Metalsrecovered_Value").val(Metalsrecovered_Value);
        $("#Other_byproducts_qty").val(Other_byproducts_qty);
        $("#Other_byproducts_grade").val(Other_byproducts_grade);
        $("#Other_byproducts_Value").val(Other_byproducts_Value);
        $("#btntable2").css("display", "none");
        $("#Updtable2").css("display", "block");
    }
    function DeleteRTable2(ID) {
        if (confirm("Are you sure to delete the record?")) {

            var ID = ID;
            var UID = $('#UID').val();
            if (ID == 0 || ID == null) {
                swal("", "Something went wrong ..Please Try Again", "warning");
                return false
            }

            $.ajax({
                type: "POST",
                url: '@Url.Action("DeleteRecoveriesSmelter", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                data: { 'ID': ID, 'UID': UID },
                cache: false,

                datatype: "JSON",
                success: function (result) {
                    if (result == 1) {
                        swal("","Record Deleted Successfully", "success");
                        Gettable2();

                    }
                    else {
                        swal("", "Some error occred..Please Try again", "warning");
                        Gettable2();

                    }


                }


            });
        }
        else
        {
            return false;
        }
            }
    function Gettable2()
    {

        var monthYear = $('#Month_Year').val();
        var UID =@TempData["UID"];
         $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetRecoveriesSmelter", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                        data: { 'MonthYear': monthYear, 'UserId': UID},
                        cache: false,

                        datatype: "JSON",
                    success: function (list) {


                        $("#table2 > tbody").html("");
                        $('#table2').append('<tbody>');
                        for (var i = 0; i < list.length; i++)
                        {
                            $('#table2').append('<tr><td><input type="hidden" id="recovery_atSmelter_Id" name="recovery_atSmelter_Id" value=' + list[i].recovery_atSmelter_Id + ' />' + (i + 1) + '</td><td>' + list[i].mineralName + '</td><td>' + list[i].oS_qty + '</td><td>' + list[i].oS_grade + '</td> <td>' + list[i].concentratesreceived_qty + '</td> <td>' + list[i].concentratesreceived_grade + '</td><td>' + list[i].concentrates_othersources_qty + '</td><td>' + list[i].concentrates_othersources_grade + '</td><td>' + list[i].concentrates_sold_qty + '</td><td>' + list[i].concentrates_sold_grade + '</td><td>' + list[i].concentrates_treated_qty + '</td><td>' + list[i].concentrates_treated_grade + '</td><td>' + list[i].cS_qty + '</td><td>' + list[i].cS_grade + '</td><td>' + list[i].metalsrecovered_qty + '</td><td>' + list[i].metalsrecovered_grade + '</td><td>' + list[i].metalsrecovered_Value + '</td><td>' + list[i].other_byproducts_qty + '</td><td>' + list[i].other_byproducts_grade + '</td><td>' + list[i].other_byproducts_Value + '</td><td class="noprint"> <a data-toggle="modal" data-target="#Poptable2" class="btn-floating btn-outline-primary btn-sm" data-toggle="tooltip" data-placement="top" onclick="EditTable2(' + list[i].recovery_atSmelter_Id + ' ,' + list[i].mineralId3 + ',\'' + list[i].oS_qty + '\',\'' + list[i].oS_grade + '\',\'' + list[i].concentratesreceived_qty + '\',\'' + list[i].concentratesreceived_grade + '\',\'' + list[i].concentrates_othersources_qty + '\',\'' + list[i].concentrates_othersources_grade + '\',\'' + list[i].concentrates_sold_qty + '\',\'' + list[i].concentrates_sold_grade + '\',\'' + list[i].concentrates_treated_qty + '\',\'' + list[i].concentrates_treated_grade + '\',\'' + list[i].cS_qty + '\',\'' + list[i].cS_grade + '\',\'' + list[i].metalsrecovered_qty + '\',\'' + list[i].metalsrecovered_grade + '\',\'' + list[i].metalsrecovered_Value + '\',\'' + list[i].other_byproducts_qty + '\',\'' + list[i].other_byproducts_grade + '\',\'' + list[i].other_byproducts_Value + '\')" title="Edit"><i class="icon-pencil-alt-solid"></i></a><a class="btn-floating btn-outline-danger btn-sm"data-toggle="tooltip" onclick="DeleteRTable2(' + list[i].recovery_atSmelter_Id + ')" data-placement="top" title="Delete"><i class="icon-trash-alt-solid"></i></a>  </td> </tr> ');


                        }
                        $('#table2').append('</tbody>');
                        var count = $('#table2 tr').length;
                        $('#Table2len').val(count);
                        //$('#datatable').DataTable();

                        }


         });
        //$('#datatable').DataTable();

    }
</script>
@* End Popup Smelter Portion*@

@*Add New Sale during the month Portion Added By Debaraj Swain 08-Jun-2021*@
<script>


    $(document).ready(function () {
        $("#OS_Qty").focusout(function () {
            var OS = $("#OS_Qty").val();
            var DP = $("#Sold_Qty").val();
            OS = OS || 0;
            DP = DP || 0;
            if (OS) {
                var CS = (parseFloat(OS)) - parseFloat(DP);

                CS = CS || 0;
                if (parseFloat(CS) < 0) {
                    CS = 0;
                    $("#CS_Qty").val(CS.toFixed(2)).change();
                    $("#OS_Qty").val('').change();
                    swal("", "Please enter proper opening stocks of Metals/Products !", "warning");
                    return false;
                }
                $("#CS_Qty").val(CS.toFixed(2)).change();
            }
        });
        $("#Sold_Qty").focusout(function () {
            var OS = $("#OS_Qty").val();
            var DP = $("#Sold_Qty").val();
            OS = OS || 0;
            DP = DP || 0;
            if (OS) {
                var CS = (parseFloat(OS)) - parseFloat(DP);

                CS = CS || 0;
                if (parseFloat(CS) < 0) {
                    CS = 0;
                    $("#CS_Qty").val(CS.toFixed(2)).change();
                    $("#OS_Qty").val('').change();
                    swal("", "Please enter proper opening stocks of Metals/Products !", "warning");
                    return false;
                }
                $("#CS_Qty").val(CS.toFixed(2)).change();
            }
        });
    });
</script>
<script>

    $(document).ready(function () {

        Gettable3();

        $("#btntable3").click(function () {

            var Mineralid = $('#objProduction_MineralId1').val();
            var monthYear = $('#Month_Year').val();
            var UID = $('#UID').val();
            var Product = $('#Product').val();
            var OS_Grade = $("#Obj_SaleProductModel_MineralId6 option:selected").text();
            var OS_Qty = $('#OS_Qty').val();
            var Sold_Qty = $('#Sold_Qty').val();
            var Sold_Value = $('#Sold_Value').val();
            var PlaceOfSale = $('#PlaceOfSale').val();
            var CS_Qty = $('#CS_Qty').val();


            if (!blankFieldValidation("Product", "Product")) {
                return false;
            }
            if (!DropDownValidation("Obj_SaleProductModel_MineralId6", "Grade")) {
                return false;
            }
            if (!blankFieldValidation("OS_Qty", "Opening Stock Quntity")) {
                return false;
            }
            if (!blankFieldValidation("Sold_Qty", "Solid Quantity")) {
                return false;
            }
            if (!blankFieldValidation("Sold_Value", "Solid Value")) {
                return false;
            }
            if (!blankFieldValidation("PlaceOfSale", "Place of Sale")) {
                return false;
            }
            if (!blankFieldValidation("CS_Qty", "Closing Stock Quantity")) {
                return false;
            }

                  $.ajax({
                        type: "POST",
                        url: '@Url.Action("AddSaleProduct", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                      data: { 'MineralId': Mineralid, 'Product': Product, 'OS_Grade': OS_Grade, 'OS_Qty': OS_Qty, 'Sold_Qty': Sold_Qty, 'Sold_Value': Sold_Value, 'PlaceOfSale': PlaceOfSale, 'CS_Qty': CS_Qty, 'Month_Year': monthYear, 'UID': UID  },
                        cache: false,
                        datatype: "JSON",
                      success: function (result) {
                          if (result == 1)
                          {
                              swal("","Record Added Successfully" , "success");
                              Gettable3();
                              $('#Poptable3').modal('toggle');
                          }
                         else if (result == 2) {
                              swal("", "Data already available for the given month and grade", "warning");
                               Gettable3();
                              $('#Poptable3').modal('toggle');
                          }
                          else
                            {
                              swal("", "Some error occred..Please Try again", "warning");
                              Gettable3();
                              $('#Poptable3').modal('toggle');
                            }


                        }


                    });
            })
        $("#Updtable3").click(function () {
            debugger;
            var ID = $("#Table3ID").val();
            var Mineralid = $('#objProduction_MineralId1').val();
            var monthYear = $('#Month_Year').val();
            var UID = $('#UID').val();
            var Product = $('#Product').val();
            var OS_Grade = $("#Obj_SaleProductModel_MineralId6 option:selected").text();
            var OS_Qty = $('#OS_Qty').val();
            var Sold_Qty = $('#Sold_Qty').val();
            var Sold_Value = $('#Sold_Value').val();
            var PlaceOfSale = $('#PlaceOfSale').val();
            var CS_Qty = $('#CS_Qty').val();




            if (!blankFieldValidation("Product", "Product")) {
                return false;
            }
            if (!DropDownValidation("OS_Grade", "Grade")) {
                return false;
            }
            if (!blankFieldValidation("OS_Qty", "Opening Stock Quntity")) {
                return false;
            }
            if (!blankFieldValidation("Sold_Qty", "Solid Quantity")) {
                return false;
            }
            if (!blankFieldValidation("Sold_Value", "Solid Value")) {
                return false;
            }
            if (!blankFieldValidation("PlaceOfSale", "Place of Sale")) {
                return false;
            }
            if (!blankFieldValidation("CS_Qty", "Closing Stock Quantity")) {
                return false;
            }

                  $.ajax({
                      type: "POST",
                        url: '@Url.Action("UpdateSaleProduct", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                      data: { 'Id': ID, 'MineralId': Mineralid, 'Product': Product, 'OS_Qty': OS_Qty, 'OS_Grade': OS_Grade, 'PlaceOfSale': PlaceOfSale, 'Sold_Qty': Sold_Qty,'Sold_Value': Sold_Value, 'CS_Qty': CS_Qty, 'Month_Year': monthYear, 'UID': UID  },
                        cache: false,

                        datatype: "JSON",
                      success: function (result) {
                          if (result == 1)
                          {
                              swal("","Record Updated Successfully" , "success");
                              Gettable3();
                              $('#Poptable3').modal('toggle');
                          }
                          else
                            {
                              swal("", "Some error occred..Please Try again", "warning");
                              Gettable3();
                              $('#Poptable3').modal('toggle');
                            }


                        }


                    });
            })



    });

    function ClearTable3() {
        $("#btntable3").css("display", "block");
        $("#Updtable3").css("display", "none");
        $("#Product").val('');
        $("#Obj_SaleProductModel_MineralId6").val($("#Obj_SaleProductModel_MineralId6 option:first").val());
        $("#OS_Qty").val('');
        $("#Sold_Qty").val('');
        $("#Sold_Value").val('');
        $("#PlaceOfSale").val('');
        $("#CS_Qty").val('');


    }


    function EditTable3(saleProductId, mineralId6, product, oS_Qty, oS_Grade, placeOfSale, sold_Qty, sold_Grade, sold_Value, cS_Qty, cS_Grade) {

        $("#Table3ID").val(saleProductId);

        $("#Product").val(product);
        $("#Obj_SaleProductModel_MineralId6 option:contains('" + oS_Grade + "')").attr('selected', 'selected');
        $("#OS_Qty").val(oS_Qty);
        $("#PlaceOfSale").val(placeOfSale);
        $("#Sold_Qty").val(sold_Qty);
        $("#Sold_Value").val(sold_Value);
        $("#CS_Qty").val(cS_Qty);
        $("#btntable3").css("display", "none");
        $("#Updtable3").css("display", "block");
    }
    function DeleteRTable3(ID) {
        if (confirm("Are you sure to delete the record?")) {

            var ID = ID;
            var UID = $('#UID').val();
            if (ID == 0 || ID == null) {
                swal("", "Something went wrong ..Please Try Again", "warning");
                return false
            }

            $.ajax({
                type: "POST",
                url: '@Url.Action("DeleteSaleProduct", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                data: { 'ID': ID, 'UID': UID },
                cache: false,

                datatype: "JSON",
                success: function (result) {
                    if (result == 1) {
                        swal("","Record Deleted Successfully", "success");
                        Gettable3();

                    }
                    else {
                        swal("", "Some error occred..Please Try again", "warning");
                        Gettable3();

                    }


                }


            });
        }
        else
        {
            return false;
        }
            }
    function Gettable3()
    {

        var monthYear = $('#Month_Year').val();
        var UID =@TempData["UID"];
         $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetSaleProduct", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                        data: { 'MonthYear': monthYear, 'UserId': UID},
                        cache: false,

                        datatype: "JSON",
                    success: function (list) {


                        $("#table3 > tbody").html("");
                        $('#table3').append('<tbody>');
                        for (var i = 0; i < list.length; i++)
                        {

                            $('#table3').append('<tr><td><input type="hidden" id="saleProductId" name="saleProductId" value=' + list[i].saleProductId + ' />' + (i + 1) + '</td><td>' + list[i].product + '</td><td>' + list[i].oS_Qty + '</td><td>' + list[i].oS_Grade + '</td> <td>' + list[i].placeOfSale + '</td> <td>' + list[i].sold_Qty + '</td><td>' + list[i].sold_Grade + '</td><td>' + list[i].sold_Value + '</td><td>' + list[i].cS_Qty + '</td><td>' + list[i].cS_Grade + '</td><td class="noprint"> <a data-toggle="modal" data-target="#Poptable3" class="btn-floating btn-outline-primary btn-sm" data-toggle="tooltip" data-placement="top" onclick="EditTable3(' + list[i].saleProductId + ' ,' + list[i].mineralId6 + ',\'' + list[i].product + '\',\'' + list[i].oS_Qty + '\',\'' + list[i].oS_Grade + '\',\'' + list[i].placeOfSale + '\',\'' + list[i].sold_Qty + '\',\'' + list[i].sold_Grade + '\',\'' + list[i].sold_Value + '\',\'' + list[i].cS_Qty + '\',\'' + list[i].cS_Grade + '\')" title="Edit"><i class="icon-pencil-alt-solid"></i></a><a class="btn-floating btn-outline-danger btn-sm"data-toggle="tooltip" onclick="DeleteRTable3(' + list[i].saleProductId + ')" data-placement="top" title="Delete"><i class="icon-trash-alt-solid"></i></a>  </td> </tr> ');


                        }
                        $('#table3').append('</tbody>');
                        var count = $('#table3 tr').length;
                        $('#Table3len').val(count);

                        }


         });
        //$('#datatable').DataTable();

    }
</script>
@* End Add Sale during the month  Portion*@

@*Add Sale/Despatch of Ore Added By Debaraj Swain 10-Jun-2021*@
<script>

    $(document).ready(function () {

        Gettable4();

        $("#btntable4").click(function () {
            debugger;
            var Mineralid = $('#objProduction_MineralId1').val();
            var monthYear = $('#Month_Year').val();
            var UID = $('#UID').val();
            var MineralForm = $('#Obj_SalesDispatchOf_OreModel_MineralNatureId').val();
            var MineralGrade = $('#Obj_SalesDispatchOf_OreModel_MineralGradeId').val();
            var MineralGradeText = $("#Obj_SalesDispatchOf_OreModel_MineralGradeId option:selected").text();
            var NatureOfDesp = $('#NatureofDispatch').val();
            var RegNo = $('#RegistrationNo').val();
            var PurcConsignee = $("#PurchaserConsinee option:selected").text();
            var Qty = $('#DomesticPurposes_Quantity').val();
            var SaleValue = $('#SaleValue').val();
            var Country = $('#Country').val();
            var ExportQuty = $('#Export_Quantity').val();
            var FOBValue = $('#FOBValue').val();


            if (!DropDownValidation("Obj_SalesDispatchOf_OreModel_MineralNatureId", "Mineral Form")) {
                return false;
            }
            if (!DropDownValidation("Obj_SalesDispatchOf_OreModel_MineralGradeId", "Mineral Grade")) {
                return false;
            }
            if (!DropDownValidation("NatureofDispatch", "Nature of dispatch")) {
                return false;
            }

            if (NatureOfDesp != "Export") {

                if (!blankFieldValidation("RegistrationNo", "Registration No")) {
                    return false;
                }
                if (!DropDownValidation("PurchaserConsinee", "Consignee Name")) {
                    return false;
                }
                if (!blankFieldValidation("DomesticPurposes_Quantity", "Quantity")) {
                    return false;
                }
                if (!blankFieldValidation("SaleValue", "Sale Value")) {
                    return false;
                }
            }
            else
            {
                PurcConsignee = null;

                if (!blankFieldValidation("Country", "Country")) {
                    return false;
                }
                if (!blankFieldValidation("Export_Quantity", "Quantity")) {
                    return false;
                }
                if (!blankFieldValidation("FOBValue", "FOB Value")) {
                    return false;
                }

            }


                  $.ajax({
                        type: "POST",
                        url: '@Url.Action("AddSaleDispatch", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                      data: { 'MineralId9': Mineralid, 'MineralNatureId': MineralForm, 'MineralGradeId': MineralGrade, 'MineralGrade': MineralGradeText, 'NatureofDispatch': NatureOfDesp, 'RegistrationNo': RegNo, 'PurchaserConsinee': PurcConsignee, 'DomesticPurposes_Quantity': Qty, 'SaleValue': SaleValue, 'Country': Country, 'Export_Quantity': ExportQuty, 'FOBValue': FOBValue, 'Month_Year': monthYear, 'UserId': UID  },
                        cache: false,
                        datatype: "JSON",
                      success: function (result) {
                          if (result == 1)
                          {
                              swal("","Record Added Successfully" , "success");
                              Gettable4();
                              $('#Poptable4').modal('toggle');
                          }
                         else if (result == 2) {
                              swal("", "Data already available for the given month and grade", "warning");
                               Gettable4();
                              $('#Poptable4').modal('toggle');
                          }
                          else
                            {
                              swal("", "Some error occred..Please Try again", "warning");
                              Gettable4();
                              $('#Poptable4').modal('toggle');
                            }


                        }


                    });
        })

        $("#Updtable4").click(function () {
            var ID = $("#Table4ID").val();
            var Mineralid = $('#objProduction_MineralId1').val();
            var monthYear = $('#Month_Year').val();
            var UID = $('#UID').val();
            var MineralForm = $('#Obj_SalesDispatchOf_OreModel_MineralNatureId').val();
            var MineralGrade = $('#Obj_SalesDispatchOf_OreModel_MineralGradeId').val();
            var MineralGradeText = $("#Obj_SalesDispatchOf_OreModel_MineralGradeId option:selected").text();
            var NatureOfDesp = $('#NatureofDispatch').val();
            var RegNo = $('#RegistrationNo').val();
            var PurcConsignee = $("#PurchaserConsinee option:selected").text();
            var Qty = $('#DomesticPurposes_Quantity').val();
            var SaleValue = $('#SaleValue').val();
            var Country = $('#Country').val();
            var ExportQuty = $('#Export_Quantity').val();
            var FOBValue = $('#FOBValue').val();


            if (!DropDownValidation("Obj_SalesDispatchOf_OreModel_MineralNatureId", "Mineral Form")) {
                return false;
            }
            if (!DropDownValidation("Obj_SalesDispatchOf_OreModel_MineralGradeId", "Mineral Grade")) {
                return false;
            }
            if (!DropDownValidation("NatureofDispatch", "Nature of dispatch")) {
                return false;
            }

            if (NatureOfDesp != "Export") {

                if (!blankFieldValidation("RegistrationNo", "Registration No")) {
                    return false;
                }
                if (!DropDownValidation("PurchaserConsinee", "Consignee Name")) {
                    return false;
                }
                if (!blankFieldValidation("DomesticPurposes_Quantity", "Quantity")) {
                    return false;
                }
                if (!blankFieldValidation("SaleValue", "Sale Value")) {
                    return false;
                }
            }
            else {
                PurcConsignee = null;

                if (!blankFieldValidation("Country", "Country")) {
                    return false;
                }
                if (!blankFieldValidation("Export_Quantity", "Quantity")) {
                    return false;
                }
                if (!blankFieldValidation("FOBValue", "FOB Value")) {
                    return false;
                }

            }

                  $.ajax({
                      type: "POST",
                        url: '@Url.Action("UpdateSaleDispatch", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                      data: { 'Id': ID, 'MineralId9': Mineralid, 'MineralNatureId': MineralForm, 'MineralGradeId': MineralGrade, 'MineralGrade': MineralGradeText, 'NatureofDispatch': NatureOfDesp, 'RegistrationNo': RegNo, 'PurchaserConsinee': PurcConsignee, 'DomesticPurposes_Quantity': Qty, 'SaleValue': SaleValue, 'Country': Country, 'Export_Quantity': ExportQuty, 'FOBValue': FOBValue, 'Month_Year': monthYear, 'UserId': UID },
                        cache: false,

                        datatype: "JSON",
                      success: function (result) {
                          if (result == 1)
                          {
                              swal("","Record Updated Successfully" , "success");
                              Gettable4();
                              $('#Poptable4').modal('toggle');
                          }
                          else
                            {
                              swal("", "Some error occred..Please Try again", "warning");
                              Gettable4();
                              $('#Poptable4').modal('toggle');
                            }


                        }


                    });
            })

    });

    function ClearTable4() {
        $("#btntable4").css("display", "block");
        $("#Updtable4").css("display", "none");

        $("#Obj_SalesDispatchOf_OreModel_MineralNatureId").val($("#Obj_SalesDispatchOf_OreModel_MineralNatureId option:first").val());
        $("#Obj_SalesDispatchOf_OreModel_MineralGradeId").val($("#Obj_SalesDispatchOf_OreModel_MineralGradeId option:first").val());
        $("#NatureofDispatch").val($("#NatureofDispatch option:first").val());
        $("#RegistrationNo").val('');
        $("#PurchaserConsinee").val($("#PurchaserConsinee option:first").val());
        $("#DomesticPurposes_Quantity").val('');
        $("#SaleValue").val('');
        $("#Country").val('');
        $("#Export_Quantity").val('');
        $("#FOBValue").val('');


    }

    function EditTable4(sale_Dispatch_Id, mineralNatureId, MineralGradeId, natureofDispatch, registrationNo, purchaserConsinee, domesticPurposes_Quantity, saleValue, country, export_Quantity, fobValue) {

        $("#Table4ID").val(sale_Dispatch_Id);

        $("#Obj_SalesDispatchOf_OreModel_MineralNatureId").val(mineralNatureId);
        $("#Obj_SalesDispatchOf_OreModel_MineralGradeId").val(MineralGradeId);
        $("#NatureofDispatch").val(natureofDispatch);
        $("#RegistrationNo").val(registrationNo);
        $("#PurchaserConsinee option:contains('" + purchaserConsinee + "')").attr('selected', 'selected');
        $("#DomesticPurposes_Quantity").val(domesticPurposes_Quantity);
        $("#SaleValue").val(saleValue);
        $("#Country").val(country);
        $("#Export_Quantity").val(export_Quantity);
        $("#FOBValue").val(fobValue);
        var NOD = $("#NatureofDispatch").val();
        if (NOD == "Export") {
            $("#ForExport").show();
            $("#ForDomestic").hide();
            $("#ForDomestic").hide();

            $("#RegistrationNo").val(null);
            $("#PurchaserConsinee").val(null);
            $("#DomesticPurposes_Quantity").val(null);
            $("#SaleValue").val(null);
        }
        else if (NOD == "Domestic Sale" || NOD == "Domestic Transfer" || NOD == "Captive Consumption") {
            $("#ForDomestic").show();
            $("#ForExport").hide();

            $("#Country").val(null);
            $("#Export_Quantity").val(null);
            $("#FOBValue").val(null);
        }
        $("#btntable4").css("display", "none");
        $("#Updtable4").css("display", "block");
    }
    function DeleteRTable4(ID) {
        if (confirm("Are you sure to delete the record?")) {

            var ID = ID;
            var UID = $('#UID').val();
            if (ID == 0 || ID == null) {
                swal("", "Something went wrong ..Please Try Again", "warning");
                return false
            }

            $.ajax({
                type: "POST",
                url: '@Url.Action("DeleteSaleDispatch", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                data: { 'ID': ID, 'UID': UID },
                cache: false,

                datatype: "JSON",
                success: function (result) {
                    if (result == 1) {
                        swal("","Record Deleted Successfully" , "success");

                        Gettable4();

                    }
                    else {
                        swal("", "Some error occred..Please Try again", "warning");
                        Gettable4();

                    }


                }


            });
        }
        else
        {
            return false;
        }
            }
    function Gettable4()
    {

        var monthYear = $('#Month_Year').val();
        var UID =@TempData["UID"];
         $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetSaleDispatch", "eReturmForm2", new { Area = "eReturn_NonCoal" })',
                        data: { 'MonthYear': monthYear, 'UserId': UID},
                        cache: false,

                        datatype: "JSON",
                    success: function (list) {


                        $("#table4 > tbody").html("");
                        $('#table4').append('<tbody>');
                        for (var i = 0; i < list.length; i++)
                        {
                            debugger;
                            $('#table4').append('<tr><td><input type="hidden" id="sale_Dispatch_Id" name="sale_Dispatch_Id" value=' + list[i].sale_Dispatch_Id + ' />' + (i + 1) + '</td><td>' + list[i].mineralGrade + '</td><td>' + list[i].natureofDispatch + '</td><td>' + list[i].registrationNo + '</td> <td>' + list[i].purchaserConsinee + '</td> <td>' + list[i].domesticPurposes_Quantity + '</td><td>' + list[i].saleValue + '</td><td>' + list[i].country + '</td><td>' + list[i].export_Quantity + '</td><td>' + list[i].fobValue + '</td><td class="noprint"> <a data-toggle="modal" data-target="#Poptable4" class="btn-floating btn-outline-primary btn-sm" data-toggle="tooltip" data-placement="top" onclick="EditTable4(' + list[i].sale_Dispatch_Id + ' ,' + list[i].mineralNatureId + ',\'' + list[i].mineralGradeId + '\',\'' + list[i].natureofDispatch + '\',\'' + list[i].registrationNo + '\',\'' + list[i].purchaserConsinee + '\',\'' + list[i].domesticPurposes_Quantity + '\',\'' + list[i].saleValue + '\',\'' + list[i].country + '\',\'' + list[i].export_Quantity + '\',\'' + list[i].fobValue + '\')" title="Edit"><i class="icon-pencil-alt-solid"></i></a><a class="btn-floating btn-outline-danger btn-sm"data-toggle="tooltip" onclick="DeleteRTable4(' + list[i].sale_Dispatch_Id + ')" data-placement="top" title="Delete"><i class="icon-trash-alt-solid"></i></a>  </td> </tr> ');


                        }
                        $('#table4').append('</tbody>');
                        var count = $('#table4 tr').length;
                        $('#Table4len').val(count);
                        //$('#datatable').DataTable();

                        }


         });
        //$('#datatable').DataTable();

    }
</script>
@* End Add Sale/Despatch of Ore Portion*@


<script>

    $(document).ready(function () {
        loadNavigation('MontlyReturnparttwo', 'glereturn', 'plmonret', 'tl', 'E-Return Non-coal', 'Monthly Return iron ore', ' ');
        $('.searchableselect').searchableselect();

        // $('#datatable3').DataTable();
        $('.shorting-lnk').click(function () {
            $('.shorting-lnk i').toggleClass('fa-sort-amount-up-alt fa-sort-amount-down-alt ');
        });
    });
</script>

<script>
    $("#CExMineSaleYes").click(function () {
        $("#objDeduction_made_Amount1").val("N/A");
        $("#objDeduction_made_Amount2").val("N/A");
        $("#objDeduction_made_Amount3").val("N/A");
        $("#objDeduction_made_Amount4").val("N/A");
        $("#objDeduction_made_Amount5").val("N/A");
        $("#objDeduction_made_Amount6").val("N/A");
        $("#objDeduction_made_Amount7").val("N/A");
        $("#objDeduction_made_TotalAmount").val("N/A");

        $("#objDeduction_made_Remarks1").val("");
        $("#objDeduction_made_Remarks2").val("");
        $("#objDeduction_made_Remarks3").val("");
        $("#objDeduction_made_Remarks4").val("");
        $("#objDeduction_made_Remarks5").val("");
        $("#objDeduction_made_Remarks6").val("");
        $("#objDeduction_made_Remarks7").val("");
        $('#objDeduction_made_Amount1').attr('readonly', 'true');
        $('#objDeduction_made_Amount2').attr('readonly', 'true');
        $('#objDeduction_made_Amount3').attr('readonly', 'true');
        $('#objDeduction_made_Amount4').attr('readonly', 'true');
        $('#objDeduction_made_Amount5').attr('readonly', 'true');
        $('#objDeduction_made_Amount6').attr('readonly', 'true');
        $('#objDeduction_made_Amount7').attr('readonly', 'true');
        $("#objDeduction_made_TotalAmount").attr('readonly', 'true');

        $('#objDeduction_made_Remarks1').attr('readonly', 'true');
        $('#objDeduction_made_Remarks2').attr('readonly', 'true');
        $('#objDeduction_made_Remarks3').attr('readonly', 'true');
        $('#objDeduction_made_Remarks4').attr('readonly', 'true');
        $('#objDeduction_made_Remarks5').attr('readonly', 'true');
        $('#objDeduction_made_Remarks6').attr('readonly', 'true');
        $('#objDeduction_made_Remarks7').attr('readonly', 'true');

    })
    $("#ex_mineYes").click(function () {
        $("#objDeduction_made_Amount1").val("N/A");
        $("#objDeduction_made_Amount2").val("N/A");
        $("#objDeduction_made_Amount3").val("N/A");
        $("#objDeduction_made_Amount4").val("N/A");
        $("#objDeduction_made_Amount5").val("N/A");
        $("#objDeduction_made_Amount6").val("N/A");
        $("#objDeduction_made_Amount7").val("N/A");
        $("#objDeduction_made_TotalAmount").val("N/A");

        $("#objDeduction_made_Remarks1").val("");
        $("#objDeduction_made_Remarks2").val("");
        $("#objDeduction_made_Remarks3").val("");
        $("#objDeduction_made_Remarks4").val("");
        $("#objDeduction_made_Remarks5").val("");
        $("#objDeduction_made_Remarks6").val("");
        $("#objDeduction_made_Remarks7").val("");
        $('#objDeduction_made_Amount1').attr('readonly', 'true');
        $('#objDeduction_made_Amount2').attr('readonly', 'true');
        $('#objDeduction_made_Amount3').attr('readonly', 'true');
        $('#objDeduction_made_Amount4').attr('readonly', 'true');
        $('#objDeduction_made_Amount5').attr('readonly', 'true');
        $('#objDeduction_made_Amount6').attr('readonly', 'true');
        $('#objDeduction_made_Amount7').attr('readonly', 'true');
        $("#objDeduction_made_TotalAmount").attr('readonly', 'true');

        $('#objDeduction_made_Remarks1').attr('readonly', 'true');
        $('#objDeduction_made_Remarks2').attr('readonly', 'true');
        $('#objDeduction_made_Remarks3').attr('readonly', 'true');
        $('#objDeduction_made_Remarks4').attr('readonly', 'true');
        $('#objDeduction_made_Remarks5').attr('readonly', 'true');
        $('#objDeduction_made_Remarks6').attr('readonly', 'true');
        $('#objDeduction_made_Remarks7').attr('readonly', 'true');

    })
    $("#CExMineSaleNo").click(function () {
        if ($("input[name='ex_mineSale']:checked").val() == 'Yes') {
            $("#objDeduction_made_Amount1").val("N/A");
            $("#objDeduction_made_Amount2").val("N/A");
            $("#objDeduction_made_Amount3").val("N/A");
            $("#objDeduction_made_Amount4").val("N/A");
            $("#objDeduction_made_Amount5").val("N/A");
            $("#objDeduction_made_Amount6").val("N/A");
            $("#objDeduction_made_Amount7").val("N/A");
            $("#objDeduction_made_TotalAmount").val("N/A");

            $("#objDeduction_made_Remarks1").val("");
            $("#objDeduction_made_Remarks2").val("");
            $("#objDeduction_made_Remarks3").val("");
            $("#objDeduction_made_Remarks4").val("");
            $("#objDeduction_made_Remarks5").val("");
            $("#objDeduction_made_Remarks6").val("");
            $("#objDeduction_made_Remarks7").val("");
            $('#objDeduction_made_Amount1').attr('readonly', 'true');
            $('#objDeduction_made_Amount2').attr('readonly', 'true');
            $('#objDeduction_made_Amount3').attr('readonly', 'true');
            $('#objDeduction_made_Amount4').attr('readonly', 'true');
            $('#objDeduction_made_Amount5').attr('readonly', 'true');
            $('#objDeduction_made_Amount6').attr('readonly', 'true');
            $('#objDeduction_made_Amount7').attr('readonly', 'true');
            $("#objDeduction_made_TotalAmount").attr('readonly', 'true');

            $('#objDeduction_made_Remarks1').attr('readonly', 'true');
            $('#objDeduction_made_Remarks2').attr('readonly', 'true');
            $('#objDeduction_made_Remarks3').attr('readonly', 'true');
            $('#objDeduction_made_Remarks4').attr('readonly', 'true');
            $('#objDeduction_made_Remarks5').attr('readonly', 'true');
            $('#objDeduction_made_Remarks6').attr('readonly', 'true');
            $('#objDeduction_made_Remarks7').attr('readonly', 'true');
        }
        else {
            $("#objDeduction_made_Amount1").val("");
            $("#objDeduction_made_Amount2").val("");
            $("#objDeduction_made_Amount3").val("");
            $("#objDeduction_made_Amount4").val("");
            $("#objDeduction_made_Amount5").val("");
            $("#objDeduction_made_Amount6").val("");
            $("#objDeduction_made_Amount7").val("");
            $("#objDeduction_made_TotalAmount").val("");
            $('#objDeduction_made_Amount1').removeAttr("readonly");
            $('#objDeduction_made_Amount2').removeAttr("readonly");
            $('#objDeduction_made_Amount3').removeAttr("readonly");
            $('#objDeduction_made_Amount4').removeAttr("readonly");
            $('#objDeduction_made_Amount5').removeAttr("readonly");
            $('#objDeduction_made_Amount6').removeAttr("readonly");
            $('#objDeduction_made_Amount7').removeAttr("readonly");

            $('#objDeduction_made_Remarks1').removeAttr("readonly");
            $('#objDeduction_made_Remarks2').removeAttr("readonly");
            $('#objDeduction_made_Remarks3').removeAttr("readonly");
            $('#objDeduction_made_Remarks4').removeAttr("readonly");
            $('#objDeduction_made_Remarks5').removeAttr("readonly");
            $('#objDeduction_made_Remarks6').removeAttr("readonly");
            $('#objDeduction_made_Remarks7').removeAttr("readonly");
        }
    })
    $("#ex_mineNo").click(function () {
        if ($("input[name='CExMineSale']:checked").val() == 'Yes') {
            $("#objDeduction_made_Amount1").val("N/A");
            $("#objDeduction_made_Amount2").val("N/A");
            $("#objDeduction_made_Amount3").val("N/A");
            $("#objDeduction_made_Amount4").val("N/A");
            $("#objDeduction_made_Amount5").val("N/A");
            $("#objDeduction_made_Amount6").val("N/A");
            $("#objDeduction_made_Amount7").val("N/A");
            $("#objDeduction_made_TotalAmount").val("N/A");

            $("#objDeduction_made_Remarks1").val("");
            $("#objDeduction_made_Remarks2").val("");
            $("#objDeduction_made_Remarks3").val("");
            $("#objDeduction_made_Remarks4").val("");
            $("#objDeduction_made_Remarks5").val("");
            $("#objDeduction_made_Remarks6").val("");
            $("#objDeduction_made_Remarks7").val("");
            $('#objDeduction_made_Amount1').attr('readonly', 'true');
            $('#objDeduction_made_Amount2').attr('readonly', 'true');
            $('#objDeduction_made_Amount3').attr('readonly', 'true');
            $('#objDeduction_made_Amount4').attr('readonly', 'true');
            $('#objDeduction_made_Amount5').attr('readonly', 'true');
            $('#objDeduction_made_Amount6').attr('readonly', 'true');
            $('#objDeduction_made_Amount7').attr('readonly', 'true');
            $("#objDeduction_made_TotalAmount").attr('readonly', 'true');

            $('#objDeduction_made_Remarks1').attr('readonly', 'true');
            $('#objDeduction_made_Remarks2').attr('readonly', 'true');
            $('#objDeduction_made_Remarks3').attr('readonly', 'true');
            $('#objDeduction_made_Remarks4').attr('readonly', 'true');
            $('#objDeduction_made_Remarks5').attr('readonly', 'true');
            $('#objDeduction_made_Remarks6').attr('readonly', 'true');
            $('#objDeduction_made_Remarks7').attr('readonly', 'true');
        }
        else {
            $("#objDeduction_made_Amount1").val("");
            $("#objDeduction_made_Amount2").val("");
            $("#objDeduction_made_Amount3").val("");
            $("#objDeduction_made_Amount4").val("");
            $("#objDeduction_made_Amount5").val("");
            $("#objDeduction_made_Amount6").val("");
            $("#objDeduction_made_Amount7").val("");
            $("#objDeduction_made_TotalAmount").val("");
            $('#objDeduction_made_Amount1').removeAttr("readonly");
            $('#objDeduction_made_Amount2').removeAttr("readonly");
            $('#objDeduction_made_Amount3').removeAttr("readonly");
            $('#objDeduction_made_Amount4').removeAttr("readonly");
            $('#objDeduction_made_Amount5').removeAttr("readonly");
            $('#objDeduction_made_Amount6').removeAttr("readonly");
            $('#objDeduction_made_Amount7').removeAttr("readonly");

            $('#objDeduction_made_Remarks1').removeAttr("readonly");
            $('#objDeduction_made_Remarks2').removeAttr("readonly");
            $('#objDeduction_made_Remarks3').removeAttr("readonly");
            $('#objDeduction_made_Remarks4').removeAttr("readonly");
            $('#objDeduction_made_Remarks5').removeAttr("readonly");
            $('#objDeduction_made_Remarks6').removeAttr("readonly");
            $('#objDeduction_made_Remarks7').removeAttr("readonly");
        }
    })


</script>
<script>
    var _MineralGradeText = "";
    function GetOpeningStock() {
        var M_Id = $("#objProduction_MineralId1").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetOpeningStock", "eReturmForm2")',
            data: {
                MineralId: M_Id
            },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                $("#objProduction_Development_OS_grade").val(result.objProduction.Development_OS_grade);
                $('#objProduction_Development_Production_grade').val(result.objProduction.Development_Production_grade);
                $('#objProduction_Development_CS_grade').val(result.objProduction.Development_CS_grade);
                $('#objProduction_Stoping_OS_grade').val(result.objProduction.Stoping_OS_grade);
                $('#objProduction_Stoping_Production_grade').val(result.objProduction.Stoping_Production_grade);
                $('#objProduction_Stoping_CS_grade').val(result.objProduction.Stoping_CS_grade);
                $('#objProduction_OpenCastWork_OS_grade').val(result.objProduction.OpenCastWork_OS_grade);
                $('#objProduction_OpenCastWork_Production_grade').val(result.objProduction.OpenCastWork_Production_grade);
                $('#objProduction_OpenCastWork_CS_grade').val(result.objProduction.OpenCastWork_CS_grade);
                $("#objProduction_Development_OS_Qty").val(result.objProduction.Development_OS_Qty);
                $('#objProduction_Stoping_OS_Qty').val(result.objProduction.Stoping_OS_Qty);
                $('#objProduction_OpenCastWork_OS_Qty').val(result.objProduction.OpenCastWork_OS_Qty);
                $('#objProduction_Total_OS_Qty').val(result.objProduction.Total_OS_Qty);
            }
        });
    }

    $(document).ready(function () {

        $('body').on('change', '#MineralGradeId', function () {
            var source = $("#MineralGradeId").data("kendoComboBox");
            _MineralGradeText = source._prev;
        });

        $("#objProduction_Development_CS_Qty").focusout(function () {
            var OB = $("#objProduction_Development_OS_Qty").val();
            if (OB == "") {
                OB = 0;
            }
            var PRD = $("#objProduction_Development_Production_Qty ").val();
            if (PRD == "") {
                PRD = 0;
            }
            var CB = parseFloat(OB) + parseFloat(PRD);
            var CS = $("#objProduction_Development_CS_Qty").val();
            if (CS > CB) {
                swal("", "Closing stock should be less then or equal to Opening Stock + Production !", "warning");
                $("#objProduction_Development_CS_Qty").val(0);
                $("#objProduction_Total_CS_Qty").val(0);

            }

        })

    });

    $(document).ready(function () {
        $("#objProduction_Stoping_CS_Qty").focusout(function () {
            var OB = $("#objProduction_Stoping_OS_Qty").val();
            if (OB == "") {
                OB = 0;
            }
            var PRD = $("#objProduction_Stoping_Production_Qty ").val();
            if (PRD == "") {
                PRD = 0;
            }
            var CB = parseFloat(OB) + parseFloat(PRD);
            var CS = $("#objProduction_Stoping_CS_Qty").val();
            if (CS > CB) {
                swal("", "Closing stock should be less then or equal to Opening Stock + Production !", "warning");
                $("#objProduction_Stoping_CS_Qty").val(0);
                $("#objProduction_Total_CS_Qty").val(0);
            }

        })

    });

    $(document).ready(function () {
        $("#objProduction_OpenCastWork_CS_Qty").focusout(function () {
            var OB = $("#objProduction_OpenCastWork_OS_Qty").val();
            if (OB == "") {
                OB = 0;
            }
            var PRD = $("#objProduction_OpenCastWork_Production_Qty ").val();
            if (PRD == "") {
                PRD = 0;
            }
            var CB = parseFloat(OB) + parseFloat(PRD);
            var CS = $("#objProduction_OpenCastWork_CS_Qty").val();
            if (CS > CB) {
                swal("", "Closing stock should be less then or equal to Opening Stock + Production !", "warning");
                $("#objProduction_OpenCastWork_CS_Qty").val(0);
                $("#objProduction_Total_CS_Qty").val(0);
            }

        })

    });



    function OnSaveProduction() {

        // Checking Quantity
        debugger;

        var OpeningStockOCW = $("#objProduction_Development_OS_Qty").val();
        var OpeningStockUW = $("#objProduction_Stoping_OS_Qty").val();
        var OpeningStockDW = $("#objProduction_OpenCastWork_OS_Qty").val();

        var productionOCW = $("#objProduction_Development_Production_Qty").val();
        var productionUW = $("#objProduction_Stoping_Production_Qty").val();
        var productionDW = $("#objProduction_OpenCastWork_Production_Qty").val();

        var closingOCW = $("#objProduction_Development_CS_Qty").val();
        var closingUW = $("#objProduction_Stoping_CS_Qty").val();
        var closingDW = $("#objProduction_OpenCastWork_CS_Qty").val();

        // Checking Grade

        var OpeningStockDG = $("#objProduction_Development_OS_grade").val();
        var OpeningStockSG = $("#objProduction_Stoping_OS_grade").val();
        var OpeningStockOCG = $("#objProduction_OpenCastWork_OS_grade").val();

        var ProductionDG = $("#objProduction_Development_Production_grade").val();
        var ProductionSG = $("#objProduction_Stoping_Production_grade").val();
        var ProductionOCG = $("#objProduction_OpenCastWork_Production_grade").val();

        var ClosingStockDG = $("#objProduction_Development_CS_grade").val();
        var ClosingStockSG = $("#objProduction_Stoping_CS_grade").val();
        var ClosingStockOCG = $("#objProduction_OpenCastWork_CS_grade").val();

        var ExMinePrice = $("#objProduction_ExMinePrice").val();

        if ($("#objProduction_Month_Year").val() == "") {
            $("#objProduction_Month_Year").focus();
            alert('Please Select Month_Year!');
            return false;
        }

        if (OpeningStockOCW == "" && OpeningStockUW == "" && OpeningStockDW == "") {
            swal("", "Atleast one category should be filled in Production and Stocks of ROM ore", "warning");
            return false;
        }

        if (OpeningStockOCW != "") {
            if (productionOCW == "" || closingOCW == "" || OpeningStockDG == "" || ProductionDG == "" || ClosingStockDG == "") {
                swal("", "Fill all the Development details", "warning");
                return false;
            }

        }
        if (OpeningStockUW != "") {
            if (productionUW == "" || closingUW == "" || OpeningStockSG == "" || ProductionSG == "" || ClosingStockSG == "") {
                swal("", "Fill all the Stoping details", "warning");
                return false;
            }

        }
        if (OpeningStockDW != "") {
            if (productionDW == "" || closingDW == "" || OpeningStockOCG == "" || ProductionOCG == "" || ClosingStockOCG == "") {
                swal("", "Fill all the Opencast workings details", "warning");
                return false;
            }

        }
        if (ExMinePrice == "") {
            swal("", "Please Enter Ex Mine Price!", "warning");
            return false;
        }
        else {
            $("#objProduction_Flag").val(2);
            return true;
        }
    }

    function OnUpdateProduction() {
        var checkUpdateFlag = 0;

        // Checking Quantity

        var OpeningStockOCW = $("#objProduction_Development_OS_Qty").val();
        var OpeningStockUW = $("#objProduction_Stoping_OS_Qty").val();
        var OpeningStockDW = $("#objProduction_OpenCastWork_OS_Qty").val();

        var productionOCW = $("#objProduction_Development_Production_Qty").val();
        var productionUW = $("#objProduction_Stoping_Production_Qty").val();
        var productionDW = $("#objProduction_OpenCastWork_Production_Qty").val();

        var closingOCW = $("#objProduction_Development_CS_Qty").val();
        var closingUW = $("#objProduction_Stoping_CS_Qty").val();
        var closingDW = $("#objProduction_OpenCastWork_CS_Qty").val();

        // Checking Grade

        var OpeningStockDG = $("#objProduction_Development_OS_grade").val();
        var OpeningStockSG = $("#objProduction_Stoping_OS_grade").val();
        var OpeningStockOCG = $("#objProduction_OpenCastWork_OS_grade").val();

        var ProductionDG = $("#objProduction_Development_Production_grade").val();
        var ProductionSG = $("#objProduction_Stoping_Production_grade").val();
        var ProductionOCG = $("#objProduction_OpenCastWork_Production_grade").val();

        var ClosingStockDG = $("#objProduction_Development_CS_grade").val();
        var ClosingStockSG = $("#objProduction_Stoping_CS_grade").val();
        var ClosingStockOCG = $("#objProduction_OpenCastWork_CS_grade").val();

        var ExMinePrice = $("#objProduction_ExMinePrice").val();

        if ($("#objProduction_Month_Year").val() == "") {
            $("#objProduction_Month_Year").focus();
            swal("", "Please Select Month_Year!", "warning");
            return false;
        }
        else if (ExMinePrice == "") {
            swal("", "Please Enter Ex Mine Price!", "warning");
            checkUpdateFlag = 0;
            return false;
        }
        else if (OpeningStockOCW == "" && OpeningStockUW == "" && OpeningStockDW == "") {
            swal("", "Atleast one category should be filled in Opening Stock", "warning");
            checkUpdateFlag = 0;
            return false;
        }

        if (OpeningStockOCW != "") {
            if (productionOCW == "" || closingOCW == "" || OpeningStockDG == "" || ProductionDG == "" || ClosingStockDG == "") {
                swal("", "Fill all the Development details", "warning");
                checkUpdateFlag = 0;
                return false;
            }
            else {
                $("#objProduction_Flag").val(1);
                checkUpdateFlag = 1;
            }
        }
        if (OpeningStockUW != "") {
            if (productionUW == "" || closingUW == "" || OpeningStockSG == "" || ProductionSG == "" || ClosingStockSG == "") {
                swal("", "Fill all the Stoping details", "warning");
                checkUpdateFlag = 0;
                return false;
            }
            else {
                $("#objProduction_Flag").val(1);
                checkUpdateFlag = 1;
            }
        }
        if (OpeningStockDW != "") {
            if (productionDW == "" || closingDW == "" || OpeningStockOCG == "" || ProductionOCG == "" || ClosingStockOCG == "") {
                swal("", "Fill all the Opencast workings details", "warning");
                checkUpdateFlag = 0;
                return false;
            }
            else {
                $("#objProduction_Flag").val(1);
                checkUpdateFlag = 1;
            }
        }

        if (checkUpdateFlag == 1) {
            return true;
        }
        else {
            return false;
        }
    }

    $(document).ready(function () {
        ViewPart2Production();
        ViewPart2Reason_Inc_Dec();

    })

    function GetMineralGradeByMineralId() {
        var Month_Year = $("#Month_Year").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetMineralGradebyMineralId", "eReturnProcess")',
            data: { Month_Year: Month_Year },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            beforeSend: function () {
                var varValue = 1;
            },
            success: function (data) {
                if (data != null && data != "") {


                }
            }
        });
    }

    function ViewPart2Production() {
        var selectedMonthYear = $("#Month_Year").val();
        if (selectedMonthYear == "") {
            swal("", "Please Select Month_Year!", "warning");
            return false;
        }
        else {
            debugger;
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetProductionandStocks", "eReturmForm2")',
                data: { MonthYear: selectedMonthYear },
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                    var varValue = 1;
                },
                success: function (data) {


                    if (data.productionandStocks_Id != null ) {

                        $("#btnUpdateProduction").show();
                        $("#btnSaveProduction").hide();
                        $("#objProduction_MineralId1").val(data.mineralId1);
                        $('#objProduction_ProductionandStocks_Id').val(data.productionandStocks_Id);
                        $('#objProduction_Development_OS_Qty').val(data.development_OS_Qty);
                        $('#objProduction_Development_OS_grade').val(data.development_OS_grade);
                        $('#objProduction_Development_Production_Qty').val(data.development_Production_Qty);
                        $('#objProduction_Development_Production_grade').val(data.development_Production_grade);
                        $('#objProduction_Development_CS_Qty').val(data.development_CS_Qty);
                        $('#objProduction_Development_CS_grade').val(data.development_CS_grade);
                        $('#objProduction_Stoping_OS_Qty').val(data.stoping_OS_Qty);
                        $('#objProduction_Stoping_OS_grade').val(data.stoping_OS_grade);
                        $('#objProduction_Stoping_Production_Qty').val(data.stoping_Production_Qty);
                        $('#objProduction_Stoping_Production_grade').val(data.stoping_Production_grade);
                        $('#objProduction_Stoping_CS_Qty').val(data.stoping_CS_Qty);
                        $('#objProduction_Stoping_CS_grade').val(data.stoping_CS_grade);
                        $('#objProduction_OpenCastWork_OS_Qty').val(data.openCastWork_OS_Qty);
                        $('#objProduction_OpenCastWork_OS_grade').val(data.openCastWork_OS_grade);
                        $('#objProduction_OpenCastWork_Production_Qty').val(data.openCastWork_Production_Qty);
                        $('#objProduction_OpenCastWork_Production_grade').val(data.openCastWork_Production_grade);
                        $('#objProduction_OpenCastWork_CS_Qty').val(data.openCastWork_CS_Qty);
                        $('#objProduction_OpenCastWork_CS_grade').val(data.openCastWork_CS_grade);
                        $('#objProduction_Total_OS_Qty').val(data.total_OS_Qty);
                        $('#objProduction_Total_OS_grade').val(data.total_OS_grade);
                        $('#objProduction_Total_Production_Qty').val(data.total_Production_Qty);
                        $('#objProduction_Total_Production_grade').val(data.total_Production_grade);
                        $('#objProduction_Total_CS_Qty').val(data.total_CS_Qty);
                        $('#objProduction_Total_CS_grade').val(data.total_CS_grade);
                        $('#objProduction_ExMinePrice').val(data.exMinePrice);

                        if (selectedMonthYear != data.month_Year) {
                            $('#objProduction_Development_OS_Qty').attr("readonly", "readonly");
                        }
                        if (selectedMonthYear != data.month_Year) {
                            $('#objProduction_Stoping_OS_Qty').attr("readonly", "readonly");
                        }
                        if (selectedMonthYear != data.month_Year) {
                            $('#objProduction_OpenCastWork_OS_Qty').attr("readonly", "readonly");
                        }

                        TextChangeOpeningstocksQty();
                        TextChangeProductionQty();
                        TextChangeClosingstocksQty();

                        ViewPart2Deduction_made();

                    }
                    else {
                        $("#btnUpdateProduction").hide();
                        $("#btnSaveProduction").show();
                    }
                }
            });
        }
    }
</script>
<script>
    function TextChangeDeductionMade() {

        var T = $("#objDeduction_made_TotalAmount").val();
        if (T == "") {
            T = 0;
        }
        T = 0;
        for (var i = 1; i <= 7; i++) {
            var amt = "#objDeduction_made_Amount" + i;
            if ($(amt).val() != "") {

                T = Number(T) + Number($(amt).val());
                $("#objDeduction_made_TotalAmount").val(T);
            }
        }


    }

    function TextChangeOpeningstocksQty() {
        var Dev = $("#objProduction_Development_OS_Qty").val();
        if (Dev == "") {
            Dev = 0;
        }
        var Stop = $("#objProduction_Stoping_OS_Qty").val();
        if (Stop == "") {
            Stop = 0;
        }
        var OpenCast = $("#objProduction_OpenCastWork_OS_Qty").val();
        if (OpenCast == "") {
            OpenCast = 0;
        }
        var SUM = Number(Dev) + Number(Stop) + Number(OpenCast);
        $("#objProduction_Total_OS_Qty").val(SUM);
        $("#objProduction_Development_CS_Qty").val(Number(Dev));
        $("#objProduction_Stoping_CS_Qty").val(Number(Stop));
        $("#objProduction_OpenCastWork_CS_Qty").val(Number(OpenCast));

        $("#objProduction_Total_CS_Qty").val(SUM);

        //////////////////////////////////////////////////////////////////////////////

        var DevPRD = $("#objProduction_Development_Production_Qty").val();
        if (DevPRD == "") {
            DevPRD = 0;
        }
        var StopPRD = $("#objProduction_Stoping_Production_Qty").val();
        if (StopPRD == "") {
            StopPRD = 0;
        }
        var OpenCastPRD = $("#objProduction_OpenCastWork_Production_Qty").val();
        if (OpenCastPRD == "") {
            OpenCastPRD = 0;
        }
        var SUMPRD = Number(DevPRD) + Number(StopPRD) + Number(OpenCastPRD);
        $("#objProduction_Total_Production_Qty").val(SUMPRD);

        $("#objProduction_Development_CS_Qty").val(Number(Dev) + Number(DevPRD));
        $("#objProduction_Stoping_CS_Qty").val(Number(Stop) + Number(StopPRD));
        $("#objProduction_OpenCastWork_CS_Qty").val(Number(OpenCast) + Number(OpenCastPRD));

        $("#objProduction_Total_CS_Qty").val(Number(SUM) + Number(SUMPRD));
    }

    function TextChangeProductionQty() {
        var Dev = $("#objProduction_Development_Production_Qty").val();
        if (Dev == "") {
            Dev = 0;
        }
        var Stop = $("#objProduction_Stoping_Production_Qty").val();
        if (Stop == "") {
            Stop = 0;
        }
        var OpenCast = $("#objProduction_OpenCastWork_Production_Qty").val();
        if (OpenCast == "") {
            OpenCast = 0;
        }
        var SUM = Number(Dev) + Number(Stop) + Number(OpenCast);
        $("#objProduction_Total_Production_Qty").val(SUM);

        //////////////////////////////////////////////////////////////////////////////

        var DevOS = $("#objProduction_Development_OS_Qty").val();
        if (DevOS == "") {
            DevOS = 0;
        }
        var StopOS = $("#objProduction_Stoping_OS_Qty").val();
        if (StopOS == "") {
            StopOS = 0;
        }
        var OpenCastOS = $("#objProduction_OpenCastWork_OS_Qty").val();
        if (OpenCastOS == "") {
            OpenCastOS = 0;
        }
        var SUMOS = Number(DevOS) + Number(StopOS) + Number(OpenCastOS);

        $("#objProduction_Development_CS_Qty").val(Number(Dev) + Number(DevOS));
        $("#objProduction_Stoping_CS_Qty").val(Number(Stop) + Number(StopOS));
        $("#objProduction_OpenCastWork_CS_Qty").val(Number(OpenCast) + Number(OpenCastOS));

        $("#objProduction_Total_CS_Qty").val(Number(SUM) + Number(SUMOS));
    }

    function TextChangeClosingstocksQty() {
        var Dev = $("#objProduction_Development_CS_Qty").val();
        if (Dev == "") {
            Dev = 0;
        }
        var Stop = $("#objProduction_Stoping_CS_Qty").val();
        if (Stop == "") {
            Stop = 0;
        }
        var OpenCast = $("#objProduction_OpenCastWork_CS_Qty").val();
        if (OpenCast == "") {
            OpenCast = 0;
        }
        var SUM = Number(Dev) + Number(Stop) + Number(OpenCast);
        $("#objProduction_Total_CS_Qty").val(SUM);
    }

</script>
<script>
    var Count_RecoveriesGrid = 0;

    function onDataBound() {

        var data = this.dataSource.view();
        if (data.length > 0) {
            Count_RecoveriesGrid = 1;
        }
        else {
            Count_RecoveriesGrid = 0;
        }

        var crt = '@(ViewBag.iscreate)';
        var edt = '@(ViewBag.isedit)';
        var dlt = '@(ViewBag.isdelete)';
        if (crt == "False") {

            $("#RecoveriesGrid").find('.k-grid-add').hide();
        }
        if (crt == "True") {
            $("#RecoveriesGrid").find('.k-grid-add').show();
        }

        if (edt == "False") {

            $("#RecoveriesGrid").find('.k-grid-edit').hide();
        }
        if (edt == "True") {
            $("#RecoveriesGrid").find('.k-grid-edit').show();
        }

        if (dlt == "False") {

            $("#RecoveriesGrid").find('.k-grid-delete').hide();
        }
        if (dlt == "True") {
            $("#RecoveriesGrid").find('.k-grid-delete').show();
        }
    }

    function OnRefreshGrid() {
        $("#RecoveriesGrid").data("kendoGrid").dataSource.read();
    }

    function onRequestEnd(e) {
        var MasterTableParameter = "Recoveries at Concentrator/Mill/Plant";
        if (e.response.Data[0] == 2) {
            fn_AlertMessage(e.response.Data[0], "Insert", MasterTableParameter);
            e.preventDefault();
            OnRefreshGrid();
        }
        else {
            if (e.type == "create" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Insert", MasterTableParameter);

            }
            else if (e.type == "update" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Update", MasterTableParameter);

            }
            else if (e.type == "destroy" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Delete", MasterTableParameter);
            }
            if (e.type != "read") {
                OnRefreshGrid();
            }
        }
    }


    function insertPopupCaption(e) {
        var SelectMineral = $("#objProduction_MineralId1").val();

        if (SelectMineral != null && SelectMineral != "") {
            GetMineralGradeByMineralId();
            if (e.model.isNew()) {
                $('.k-window-title').text("Add Recoveries at Concentrator/Mill/Plant");
                $('.k-grid-update').text("Submit");
                $('.k-grid-cancel').text("Cancel");

            }
            else {
                $('.k-window-title').text("Edit Recoveries at Concentrator/Mill/Plant");
                $('.k-grid-update').text("Update");
                $('.k-grid-cancel').text("Cancel");
            }
        }
        else {
            swal("", "Please Select Mineral !", "warning");
            OnRefreshGrid();
        }
    }

    function fnAccessCreateGrade(gridName) {
        DatagridName = gridName;
        var gridElement = $("#" + gridName);
        var headerHeight = $('#NavHdr').height();
        var footerHeight = $('.footer').height();
        var newGridHeight = ($(window).height() - headerHeight - footerHeight - 300);

        if (gridElement != null) {
            gridElement.height(newGridHeight);
        }
    }

    function GetData() {
        var MY = $("#Month_Year").val();
        if (MY == null && MY == "") {
            swal("", "Please Select Month Year", "warning");
            return false;
        }
        else {
            return {
                MonthYear: MY
            };
        }
    }

    function InsertData() {
        var MY = $("#Month_Year").val();
        var SelectMineral = $("#objProduction_MineralId1").val();
        if (MY == null && MY == "") {
            swal("", "Please Select Month Year", "warning");
            return false;
        }
        if (SelectMineral == null && SelectMineral == "") {
            swal("", "Please Select Mineralr", "warning");
            return false;
        }
        else {
            return {
                MonthYear: MY,
                MineralId: SelectMineral

            };
        }
    }
    function GetData1() {
        var MY = $("#Month_Year").val();

        if (MY == null && MY == "") {
            swal("", "Please Select Month Year", "warning");
            return false;
        }
        else {
            return {
                MonthYear: MY
            };
        }
    }
    function InsertData1() {
        var MY = $("#Month_Year").val();
        var SelectMineral = $("#objProduction_MineralId1").val();

        if (MY == null && MY == "") {
            swal("", "Please Select Month Year", "warning");
            return false;
        }
        if (SelectMineral == null && SelectMineral == "") {
            swal("", "lease Select Mineral", "warning");
            return false;
        }
        else {
            return {
                MonthYear: MY,
                MineralId: SelectMineral

            };
        }
    }

    function GetData2() {
        var MY = $("#Month_Year").val();

        if (MY == null && MY == "") {
            swal("", "Please Select Month Year", "warning");
            return false;
        }
        else {
            return {
                MonthYear: MY
            };
        }
    }

    function InsertData2() {
        var MY = $("#Month_Year").val();
        var SelectMineral = $("#objProduction_MineralId1").val();

        if (MY == null && MY == "") {
            swal("", "Please Select Month Year", "warning");
            return false;
        }
        if (SelectMineral == null && SelectMineral == "") {
            swal("", "Please Select Mineral", "warning");
            return false;
        }
        else {
            return {
                MonthYear: MY,
                MineralId: SelectMineral
            };
        }
    }
    function GetDataByParameter() {
        $("#RecoveriesGrid").data("kendoGrid").dataSource.read();
    }
    function GetDataByParameterSmelter() {
        $("#Recoveries_atSmelterGrid").data("kendoGrid").dataSource.read();
    }

    function GetDataByParameterSalesProduct() {
        $("#SalesProductGrid").data("kendoGrid").dataSource.read();
    }
</script>
<script>
    var Count_Recoveries_atSmelterGrid = 0;

    function onDataBound1() {

        var data = this.dataSource.view();

        if (data.length > 0) {
            Count_Recoveries_atSmelterGrid = 1;
        }
        else {
            Count_Recoveries_atSmelterGrid = 0;
        }

        var crt = '@(ViewBag.iscreate)';
        var edt = '@(ViewBag.isedit)';
        var dlt = '@(ViewBag.isdelete)';
        if (crt == "False") {

            $("#Recoveries_atSmelterGrid").find('.k-grid-add').hide();
        }
        if (crt == "True") {
            $("#Recoveries_atSmelterGrid").find('.k-grid-add').show();
        }

        if (edt == "False") {

            $("#Recoveries_atSmelterGrid").find('.k-grid-edit').hide();
        }
        if (edt == "True") {
            $("#Recoveries_atSmelterGrid").find('.k-grid-edit').show();
        }

        if (dlt == "False") {

            $("#Recoveries_atSmelterGrid").find('.k-grid-delete').hide();
        }
        if (dlt == "True") {
            $("#Recoveries_atSmelterGrid").find('.k-grid-delete').show();
        }
    }

    function OnRefreshGrid1() {
        $("#Recoveries_atSmelterGrid").data("kendoGrid").dataSource.read();
    }
    function onRequestEnd1(e) {
        var MasterTableParameter = "Recovery at the Smelter/Mill/Plant";
        if (e.response.Data[0] == 2) {
            fn_AlertMessage(e.response.Data[0], "Insert", MasterTableParameter);
            e.preventDefault();
            OnRefreshGrid1();
        }
        else {
            if (e.type == "create" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Insert", MasterTableParameter);
            }
            else if (e.type == "update" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Update", MasterTableParameter);

            }
            else if (e.type == "destroy" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Delete", MasterTableParameter);
            }
            if (e.type != "read") {
                OnRefreshGrid1();
            }
        }
    }
    function insertPopupCaption1(e) {
        var SelectMineral = $("#objProduction_MineralId1").val();
        if (SelectMineral != null && SelectMineral != "") {
            GetMineralGradeByMineralId();
            if (e.model.isNew()) {
                $('.k-window-title').text("Add Recovery at the Smelter/Mill/Plant");
                $('.k-grid-update').text("Submit");
                $('.k-grid-cancel').text("Cancel");

            }
            else {

                $('.k-window-title').text("Edit Recovery at the Smelter/Mill/Plant");
                $('.k-grid-update').text("Update");
                $('.k-grid-cancel').text("Cancel");
            }
        }
        else {
            swal("", "Please Select Mineral", "warning");

            OnRefreshGrid1();
        }
    }
</script>
<script>
    var Count_SalesProductGrid = 0;
    function onDataBound2() {

        var data = this.dataSource.view();
        if (data.length > 0) {
            Count_SalesProductGrid = 1;
        }
        else {
            Count_SalesProductGrid = 0;
        }

        $("#SalesProductGrid").find(".k-grid-content").css("cssText", "height: 221px !important;");

        var crt = '@(ViewBag.iscreate)';
        var edt = '@(ViewBag.isedit)';
        var dlt = '@(ViewBag.isdelete)';
        if (crt == "False") {

            $("#SalesProductGrid").find('.k-grid-add').hide();
        }
        if (crt == "True") {
            $("#SalesProductGrid").find('.k-grid-add').show();
        }

        if (edt == "False") {

            $("#SalesProductGrid").find('.k-grid-edit').hide();
        }
        if (edt == "True") {
            $("#SalesProductGrid").find('.k-grid-edit').show();
        }

        if (dlt == "False") {

            $("#SalesProductGrid").find('.k-grid-delete').hide();
        }
        if (dlt == "True") {
            $("#SalesProductGrid").find('.k-grid-delete').show();
        }
    }

    function OnRefreshGrid2() {
        $("#SalesProductGrid").data("kendoGrid").dataSource.read();
    }
    function onRequestEnd2(e) {
        var MasterTableParameter = "Sales";
        if (e.response.Data[0] == 2) {
            swal("", "This grade entry already exists !", "warning");
            e.preventDefault();
            OnRefreshGrid2();
        }
        else {
            if (e.type == "create" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Insert", MasterTableParameter);
            }
            else if (e.type == "update" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Update", MasterTableParameter);
            }
            else if (e.type == "destroy" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Delete", MasterTableParameter);
            }
            if (e.type != "read") {
                OnRefreshGrid2();
            }
        }
    }
    function insertPopupCaption2(e) {
        var SelectMineral = $("#objProduction_MineralId1").val();
        if (SelectMineral != null && SelectMineral != "") {
            GetMineralGradeByMineralId();
            if (e.model.isNew()) {
                $('.k-window-title').text("Add Sales during the month");
                $('.k-grid-update').text("Submit");
                $('.k-grid-cancel').text("Cancel");

            }
            else {
                $('.k-window-title').text("Edit Sales during the month");
                $('.k-grid-update').text("Update");
                $('.k-grid-cancel').text("Cancel");
            }
        }
        else {
            swal("", "Please Select Mineral !", "warning");
            OnRefreshGrid2();
        }
    }
</script>

<script>

    function OnSaveDeductions() {
        var selectedVal_CEX = $('input[name=CExMineSale]:checked').val();
        $("#objDeduction_made_CExMineSale").val(selectedVal_CEX);

        var selectedVal_EX = $('input[name=ex_mineSale]:checked').val();
        $("#objDeduction_made_ex_mineSale").val(selectedVal_EX);


        $("#objDeduction_made_Flag").val(2);
        return true;

    }

    function OnUpdateDeductions() {
        var selectedVal_CEX = $('input[name=CExMineSale]:checked').val();
        $("#objDeduction_made_CExMineSale").val(selectedVal_CEX);

        var selectedVal_EX = $('input[name=ex_mineSale]:checked').val();
        $("#objDeduction_made_ex_mineSale").val(selectedVal_EX);

        $("#objDeduction_made_Flag").val(1);
        return true;


    }


    function ViewPart2Deduction_made() {

        var selectedMonthYear = $("#Month_Year").val();
        var SelectMineral = $("#objProduction_MineralId1").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetDetails_of_deductions", "eReturmForm2")',
            data: { MonthYear: selectedMonthYear, MineralId: SelectMineral },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            beforeSend: function () {
                var varValue = 1;
            },
            success: function (data) {

                if (data.deductionMade_Id != null && data.deductionMade_Id != "") {
                    $("#btnUpdateDeductions").show();
                    $("#btnSaveDeductions").hide();
                    $('#objDeduction_made_DeductionMade_Id').val(data.deductionMade_Id);

                    if (data.cExMineSale == "Yes") {
                        $('input:radio[id=CExMineSaleYes]').prop('checked', true);
                    }
                    else {
                        $('input:radio[id=CExMineSaleNo]').prop('checked', true);
                    }

                    var $radios = $('input:radio[name=ex_mineSale]');
                    if (data.ex_mineSale == "Yes") {
                        $('input:radio[id=ex_mineYes]').prop('checked', true);
                    }
                    else {
                        $('input:radio[id=ex_mineNo]').prop('checked', true);
                    }

                    $('#objDeduction_made.Deduction_claimedType1').val(data.odeduction_claimedType1);
                    $('#objDeduction_made_Amount1').val(data.amount1);
                    $('#objDeduction_made_Remarks1').val(data.remarks1);

                    $('#objDeduction_made_Deduction_claimedType2').val(data.deduction_claimedType2);
                    $('#objDeduction_made_Amount2').val(data.amount2);
                    $('#objDeduction_made_Remarks2').val(data.remarks2);

                    $('#objDeduction_made_Deduction_claimedType3').val(data.deduction_claimedType3);
                    $('#objDeduction_made_Amount3').val(data.amount3);
                    $('#objDeduction_made_Remarks3').val(data.remarks3);

                    $('#objDeduction_made_Deduction_claimedType4').val(data.deduction_claimedType4);
                    $('#objDeduction_made_Amount4').val(data.amount4);
                    $('#objDeduction_made_Remarks4').val(data.remarks4);

                    $('#objDeduction_made_Deduction_claimedType5').val(data.deduction_claimedType5);
                    $('#objDeduction_made_Amount5').val(data.amount5);
                    $('#objDeduction_made_Remarks5').val(data.remarks5);

                    $('#objDeduction_made_Deduction_claimedType6').val(data.deduction_claimedType6);
                    $('#objDeduction_made_Amount6').val(data.amount6);
                    $('#objDeduction_made_Remarks6').val(data.remarks6);

                    $('#objDeduction_made_Deduction_claimedType7').val(data.deduction_claimedType7);
                    $('#objDeduction_made_Amount7').val(data.amount7);
                    $('#objDeduction_made_Remarks7').val(data.remarks7);
                    $('#objDeduction_made_TotalAmount').val(data.totalAmount);
                }
                else {
                    $("#btnUpdateDeductions").hide();
                    $("#btnSaveDeductions").show();
                }
            }
        });
    }

</script>

<script>


    function GetDataSalesDispatch() {
        var MY = $("#Month_Year").val();
        if (MY == null && MY == "") {
            swal("", "Please Select Month Year !", "warning");
            return false;
        }

        else {
            return {
                MonthYear: MY

            };
        }
    }

    function InsertData3() {
        var MY = $("#Month_Year").val();
        var SelectMineral = $("#objProduction_MineralId1").val();

        if (MY == null && MY == "") {
            swal("", "Please Select Month Year !", "warning");
            return false;
        }
        if (SelectMineral == null && SelectMineral == "") {
            swal("", "Please Select Mineral !", "warning");
            return false;
        }
        else {
            return {
                MonthYear: MY,
                MineralId: SelectMineral
            };
        }
    }
    function GetNature2() {
        return {
            MineralId: $("#objProduction_MineralId1").val()
        };
    }

    function GetGrade2() {
        return {

            MineralNatureId: $("#MineralNatureId").val()
        };
    }

    function GetDataByParameter_SaleDispatch() {
        $("#SaleDispatchGrid").data("kendoGrid").dataSource.read();
    }

    var Count_SaleDispatchGrid = 0;

    function onDataBound3() {
        var data = this.dataSource.view();
        if (data.length > 0) {
            Count_SaleDispatchGrid = 1;
        }
        else {
            Count_SaleDispatchGrid = 0;
        }

        $("#SaleDispatchGrid").find(".k-grid-content").css("cssText", "height: 163px !important;");

        var crt = '@(ViewBag.iscreate)';
        var edt = '@(ViewBag.isedit)';
        var dlt = '@(ViewBag.isdelete)';
        if (crt == "False") {

            $("#SaleDispatchGrid").find('.k-grid-add').hide();
        }
        if (crt == "True") {
            $("#SaleDispatchGrid").find('.k-grid-add').show();
        }

        if (edt == "False") {

            $("#SaleDispatchGrid").find('.k-grid-edit').hide();
        }
        if (edt == "True") {
            $("#SaleDispatchGrid").find('.k-grid-edit').show();
        }

        if (dlt == "False") {

            $("#SaleDispatchGrid").find('.k-grid-delete').hide();
        }
        if (dlt == "True") {
            $("#SaleDispatchGrid").find('.k-grid-delete').show();
        }
    }

    function OnRefreshGrid3() {
        $("#SaleDispatchGrid").data("kendoGrid").dataSource.read();
    }
    function onRequestEnd3(e) {
        var MasterTableParameter = "SaleDispatch Grid";
        if (e.response.Data[0] == 2) {
            fn_AlertMessage(e.response.Data[0], "Insert", MasterTableParameter);
            e.preventDefault();
            OnRefreshGrid3();
        }
        else {
            if (e.type == "create" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Insert", MasterTableParameter);
            }
            else if (e.type == "update" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Update", MasterTableParameter);

            }
            else if (e.type == "destroy" && !e.response.Errors) {
                fn_AlertMessage(e.response.Data[0], "Delete", MasterTableParameter);
            }
            if (e.type != "read") {
                OnRefreshGrid3();
            }
        }
    }
    function insertPopupCaption3(e) {
        var SelectMineral = $("#objProduction_MineralId1").val();
        if (SelectMineral != null && SelectMineral != "") {
            if (e.model.isNew()) {
                $('.k-window-title').text("Add Sales/ Dispatches of ore");
                $('.k-grid-update').text("Submit").hide();
                $('.k-edit-buttons').prepend("<button type='Submit' class='k-button k-button-icontext k-primary k-grid-update' id='btnSubmit' onclick='return submitSalesDispatch();'>Submit</button>");
                $('.k-grid-cancel').text("Cancel");
            }
            else {
                var NOD = $("#NatureofDispatch").val();
                if (NOD == "Export") {
                    $("#ForExport").show();
                    $("#ForDomestic").hide()
                }
                else if (NOD == "Domestic Sale" || NOD == "Domestic Transfer" || NOD == "Captive Consumption") {
                    $("#ForDomestic").show();
                    $("#ForExport").hide();
                }
                $('.k-window-title').text("Edit Sales/ Dispatches of ore");
                $('.k-grid-update').text("Update").hide();
                $('.k-edit-buttons').prepend("<button type='Submit' class='k-button k-button-icontext k-primary k-grid-update' id='btnUpdate' onclick='return updateSalesDispatch();'>Update</button>");
                $('.k-grid-cancel').text("Cancel");
            }
        }
        else {
            swal("", "Please Select Mineral !", "warning");
            OnRefreshGrid3();
        }
    }

    function CheckValidation() {
        if ($("#MineralNatureId").val() == "" || $("#MineralNatureId").val() == null) {
            alert("Mineral Form Required !");
            return false;
        }
        if ($("#MineralGradeId").val() == "" || $("#MineralGradeId").val() == null) {
            alert("Mineral Grade Required !");
            return false;
        }
        if ($("#NatureofDispatch").val() == "" || $("#NatureofDispatch").val() == null) {
            alert("Nature of Dispatch Required !");
            return false;
        }
        else {
            if ($("#NatureofDispatch").val() == "Export") {
                if ($("#Country").val() == "" || $("#Country").val() == null) {
                    alert("Country Required !");
                    return false;
                }
                if ($("#Export_Quantity").val() == "" || $("#Export_Quantity").val() == null) {
                    alert("Quantity Required !");
                    return false;
                }
                if ($("#FOBValue").val() == "" || $("#FOBValue").val() == null) {
                    alert("F.O.B Value Required !");
                    return false;
                }
            }
            else {
                if ($("#RegistrationNo").val() == "" || $("#RegistrationNo").val() == null) {
                    alert("Registration No allotted by the IBM to the buyer Required !");
                    return false;
                }
                if ($("#PurchaserConsinee").val() == "" || $("#PurchaserConsinee").val() == null) {
                    alert("Consignee name Required !");
                    return false;
                }
                if ($("#DomesticPurposes_Quantity").val() == "" || $("#DomesticPurposes_Quantity").val() == null) {
                    alert("Quantity Required !");
                    return false;
                }
                if ($("#SaleValue").val() == "" || $("#SaleValue").val() == null) {
                    alert("Sale Value Required !");
                    return false;
                }
            }
        }
        return true;
    }


    function submitSalesDispatch(e) {
        if (CheckValidation()) {
            var objModel = {
                MineralNatureId: $("#MineralNatureId").val(),
                MineralGradeId: $("#MineralGradeId").val(),
                NatureofDispatch: $("#NatureofDispatch").val(),
                RegistrationNo: $("#RegistrationNo").val(),
                PurchaserConsinee: $("#PurchaserConsinee").val(),
                DomesticPurposes_Quantity: $("#DomesticPurposes_Quantity").val(),
                SaleValue: $("#SaleValue").val(),
                Country: $("#Country").val(),
                Export_Quantity: $("#Export_Quantity").val(),
                FOBValue: $("#FOBValue").val(),
                Month_Year: $("#Month_Year").val(),
                MineralId9: $("#objProduction_MineralId1").val(),
                MineralGrade: _MineralGradeText
            };

            @*$.post('@Url.Action("ADDSaleDispatch", "eReturnProcess", new { Area = "eReturn" })', objModel, function (res) {
                alert(res);
            });*@

            $.ajax({
                type: "POST",
                url: '@Url.Action("ADDSaleDispatch", "eReturmForm2", new { Area = "eReturn" })',
                data: objModel,
                //contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    if (result == "1") {
                        alert("Record inserted successfully.");
                        //window.location.reload(true);

                        OnRefreshGrid3();

                        //$(e.container).find(".k-grid-cancel").add($(e.container).parent().find(".k-i-close")).click(function (e) {
                        //    $("#SaleDispatchGrid").data("kendoGrid").trigger("dataBound");
                        //});

                        //$("#SaleDispatchGrid").container.data("kendoWindow").bind("deactivate", function () {
                        //    $("#SaleDispatchGrid").container.data("kendoWindow").close();
                        //});
                    }
                    else if (result == "2") {
                        alert("Record already existed !");
                        OnRefreshGrid3();
                    }
                    else if (result == "3") {
                        alert("Something went wrong !");
                        OnRefreshGrid3();
                    }
                }
            });
        }
    }

    function updateSalesDispatch() {
        if (CheckValidation()) {
            var objModel = {
                Sale_Dispatch_Id: $("#Sale_Dispatch_Id").val(),
                MineralNatureId6: $("#MineralNatureId").val(),
                MineralGradeId6: $("#MineralGradeId").val(),
                NatureofDispatch: $("#NatureofDispatch").val(),
                RegistrationNo: $("#RegistrationNo").val(),
                PurchaserConsinee: $("#PurchaserConsinee").val(),
                DomesticPurposes_Quantity: $("#DomesticPurposes_Quantity").val(),
                SaleValue: $("#SaleValue").val(),
                Country: $("#Country").val(),
                Export_Quantity: $("#Export_Quantity").val(),
                FOBValue: $("#FOBValue").val(),
                Month_Year: $("#Month_Year").val(),
                MineralId9: $("#objProduction_MineralId1").val()
            };

            $.ajax({
                type: "POST",
                url: '@Url.Action("UpdateSaleDispatch", "eReturnProcess", new { Area = "eReturn" })',
                data: objModel,
                //contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    if (result == "1") {
                        alert("Record updated successfully.");
                        window.location.reload(true);
                    }
                    else if (result == "2") {
                        alert("Record already existed !");
                    }
                    else if (result == "3") {
                        alert("Something went wrong !");
                    }
                }
            });
        }
    }

</script>

<script>

    function OnSaveReason_Inc_Dec() {

        var Production_Result = OnSaveProduction();
        debugger;
        if (Production_Result) {

            var Deduction_Result = OnSaveDeductions();
            var RecConcen = $('#Table1len').val();
            var RecSmellter = $('#Table2len').val();
            var SaleMonth = $('#Table3len').val();
            var SaleDespMonth = $('#Table4len').val();


            if (Production_Result == true && Deduction_Result == true) {
                if (RecConcen > 2) {
                    if (RecSmellter > 2) {
                        if (SaleMonth > 2) {
                            if (SaleDespMonth > 2) {
                                if ($("#objReason_Inc_Dec_Month_Year").val() == "") {
                                    $("#objReason_Inc_Dec_Month_Year").focus();
                                    swal("", "Please Select Month Year !", "warning");
                                    return false;
                                }
                                else if ($("#objReason_Inc_Dec_MineralId").val() == "") {
                                    $("#objReason_Inc_Dec_MineralId").focus();
                                    swal("", "Please Select Mineral !", "warning");
                                    return false;
                                }
                                else if ($("#objReason_Inc_Dec_certify").prop('checked') == false) {
                                    swal("", "Please Checked Certify Statement!", "warning");
                                    return false;
                                }
                                else {
                                    if (confirm("Are you want to Save Part two ?")) {
                                        $("#objReason_Inc_Dec_Flag").val(2);
                                        $("#FormF2Part2").submit();
                                    }
                                    else {
                                        return false;
                                    }
                                }
                            }
                            else {
                                swal("", "Sales/ Dispatches of ore and concentrates effected for Domestic Purposes and for Exports should be filled", "warning");
                                return false;
                            }
                        }
                        else {
                            swal("", "Sales during the month should be filled", "warning");
                            return false;
                        }
                    }
                    else {
                        swal("", "Recovery at the Smelter/Mill/Plant should be filled", "warning");
                        return false;
                    }
                }
                else {
                    swal("", "Recoveries at Concentrator/Mill/Plant should be filled", "warning");
                    return false;
                }
            }
            else {
                return false;
            }
        }
        else {
            return false;
        }
    }

    function OnUpdateReason_Inc_Dec() {

        var Production_Result = OnUpdateProduction();

        if (Production_Result) {

            var Deduction_Result = OnUpdateDeductions();
            var RecConcen = $('#Table1len').val();
            var RecSmellter = $('#Table2len').val();
            var SaleMonth = $('#Table3len').val();
            var SaleDespMonth = $('#Table4len').val();


            if (Production_Result == true && Deduction_Result == true) {
                if (RecConcen > 2) {
                    if (RecSmellter > 2) {
                        if (SaleMonth > 2) {
                            if (SaleDespMonth > 0) {
                                if ($("#objReason_Inc_Dec_Month_Year").val() == "") {
                                    $("#objReason_Inc_Dec_Month_Year").focus();
                                    swal("", "Please Select Month_Year!", "warning");
                                    return false;
                                }
                                else if ($("#objReason_Inc_Dec_MineralId").val() == "") {
                                    $("#objReason_Inc_Dec_MineralId").focus();
                                    swal("", "Please Select Mineral!", "warning");
                                    return false;
                                }
                                else if ($("#objReason_Inc_Dec_certify").prop('checked') == false) {
                                    swal("", "Please Checked Certify Statement!", "warning");
                                    return false;
                                }
                                else {
                                    $("#objReason_Inc_Dec_Flag").val(1);
                                    $("#FormF2Part2").submit();
                                }
                            }
                            else {
                                swal("", "Sales/ Dispatches of ore and concentrates effected for Domestic Purposes and for Exports should be filled", "warning");
                                return false;
                            }
                        }
                        else {
                            swal("", "Sales during the month should be filled", "warning");
                            return false;
                        }
                    }
                    else {
                        swal("", "Recovery at the Smelter/Mill/Plant should be filled", "warning");
                        return false;
                    }
                }
                else {
                    swal("", "Recoveries at Concentrator/Mill/Plant should be filled", "warning");
                    return false;
                }
            }
            else {
                return false;
            }
        }
        else {
            return false;
        }
    }



    function ViewPart2Reason_Inc_Dec() {
        var selectedMonthYear = $("#Month_Year").val();
        var SelectMineral = $("#objProduction_MineralId1").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetReason_Inc_Dec", "eReturmForm2")',
            data: { MonthYear: selectedMonthYear, MineralId: SelectMineral },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            beforeSend: function () {
                var varValue = 1;
            },
            success: function (data) {
                if (data.reason_Inc_Dec_Id != null && data.reason_Inc_Dec_Id != "") {
                    $("#btnUpdateReason_Inc_Dec").show();
                    $("#btnReasonForInDcSave").hide();
                    $("#btnFinalSubmit").show();
                    $('#objReason_Inc_Dec_Reason_Inc_Dec_Id').val(data.reason_Inc_Dec_Id);
                    $('#objReason_Inc_Dec_productionIncrDecResion').val(data.productionIncrDecResion);
                    $('#objReason_Inc_Dec_ex_minepriceIncrDecResion').val(data.ex_minepriceIncrDecResion);
                    if (data.certify == true) {
                        $("#objReason_Inc_Dec_certify").prop('checked', true);
                    }
                }
                else { $("#btnUpdateReason_Inc_Dec").hide(); $("#btnReasonForInDcSave").show(); $("#btnFinalSubmit").hide(); }
            }
        });
    }



    function OnSubmit() {

        var M_Id = $("#objProduction_MineralId1").val();
        if (M_Id == "") {
            swal("", "Please Select Mineral!", "warning");
            return false;
        }
        else if ($("#Month_Year").val() == "") {
            swal("", "Please Select Month!", "warning");
            return false;
        }
        else {

            var MY = $("#Month_Year").val();

            var RecConcen = $('#Table1len').val();
            var RecSmellter = $('#Table2len').val();
            var SaleMonth = $('#Table3len').val();
            var SaleDespMonth = $('#Table4len').val();
            if (RecConcen > 2) {



                if (RecSmellter > 2) {



                    if (SaleMonth > 2) {



                        if (SaleDespMonth > 2) {
                                                            if (confirm("Are you sure to final submission ?")) {
                                                                $("#objReason_Inc_Dec_FinalSubmitFlag").val(1);
                                                                $("#FormF2Part2").submit();
                                                            }
                                                            else {
                                                                return false;
                                                            }
                                                        }
                                                        else {
                            swal("", "Sales/ Dispatches of ore and concentrates effected for Domestic Purposes and for Exports should be filled", "warning");
                                                            return false;
                                                        }


                                            }
                                            else {
                        swal("", "Sales during the month should be filled", "warning");
                                                return false;
                                            }



                                }
                                else {
                    swal("", "Recovery at the Smelter/Mill/Plant should be filled", "warning");
                                    return false;
                                }

                    }
                    else {

                swal("", "Recoveries at Concentrator/Mill/Plant should be filled", "warning");
                        return false;
                    }


        }
}
</script>

<script>
    $("#MineralNatureId1").change(function () {
        var MNatureId = $("#MineralNatureId1").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetMineralGradeCount", "eReturmForm2")',
            data: {
                MineralNatureId: MNatureId
            },

            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                // data: JSON.stringify(data);
                console.log(data);
                var row = "";
                $.each(data, function (index, item) {
                    row += "<tr id='" + item.MineralGradeId3 + "'><input type='hidden' name='MineralGradeId5' value='" + item.MineralGradeId3
                        + "'/><input type='hidden' name='MineralNatureId' value='" + MNatureId
                        + "'/><td><input type='text' class='form-control1' name='PlantQty' value='" + item.PlantQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='PlantGrade' value='" + item.PlantGrade
                        + "'/></td><td><input type='text' class='form-control1' name='ReceivedQty' value='" + item.ReceivedQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='ReceivedGrade' value='" + item.ReceivedGrade
                        + "'/></td><td><input type='text' class='form-control1' name='TreatedQty' value='" + item.TreatedQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' class='form-control1' name='TreatedGrade' value='"
                        + item.TreatedGrade + "'/></tr>";
                });
                $("#RecoveriesContent").html(row);
            },
            error: function (result) {
                alert("Error");
            }
        });
    })

    $("#MineralNatureId1").change(function () {
        var MNatureId = $("#MineralNatureId1").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetMineralGradeCount", "eReturmForm2")',
            data: {
                MineralNatureId: MNatureId
            },

            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                // data: JSON.stringify(data);
                console.log(data);
                var row = "";
                $.each(data, function (index, item) {
                    row += "<tr id='" + item.MineralGradeId3 + "'><input type='hidden' name='MineralGradeId5' value='" + item.MineralGradeId3
                        + "'/><input type='hidden' name='MineralNatureId' value='" + MNatureId
                        + "'/><td><input type='text' class='form-control1' name='ObtainedQty' value='" + item.ObtainedQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='ObtainedGrade' value='" + item.ObtainedGrade
                        + "'/></td><td><input type='text' class='form-control1' name='ObtainedValue' value='" + item.ObtainedValue
                        + "'/></td><td><input type='text' class='form-control1' name='TailingQty' value='" + item.TailingQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='TailingGrade' value='" + item.TailingGrade
                        + "'/></td><td><input type='text' class='form-control1' name='ClosingStockQty' value='" + item.ClosingStockQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' class='form-control1' name='ClosingStockGrade' value='"
                        + item.ClosingStockGrade + "'/></tr>";
                });
                $("#Concentrates").html(row);
            },
            error: function (result) {
                alert("Error");
            }
        });
    })



    $("#MineralNatureId2").change(function () {
        var MNatureId = $("#MineralNatureId2").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetMineralGradeForSmelter", "eReturmForm2")',
            data: {
                MineralNatureId: MNatureId
            },

            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {


                console.log(data);
                var row = "";
                $.each(data, function (index, item) {
                    row += "<tr id='" + item.MineralGradeId3 + "'><input type='hidden' name='MineralGradeID3' value='" + item.MineralGradeId6
                        + "'/><input type='hidden' name='MineralNatureId' value='" + MNatureId
                        + "'/><td><input type='text' class='form-control1' name='PlantQty' value='" + item.PlantQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='PlantGrade' value='" + item.PlantGrade
                        + "'/></td><td><input type='text' class='form-control1' name='ConcentratesQty' value='" + item.ConcentratesQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='ConcentratesGrade' value='" + item.ConcentratesGrade
                        + "'/></td><td><input type='text' class='form-control1' name='ConcentratesreceivedQty' value='" + item.ConcentratesreceivedQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='ConcentratesreceivedGrade' value='" + item.ConcentratesreceivedGrade
                        + "'/></td><td><input type='text' class='form-control1' name='ConcentratessoldQty' value='" + item.ConcentratessoldQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' class='form-control1' name='ConcentratessoldGrade' value='"
                        + item.ConcentratessoldGrade + "'/></tr>";
                });
                $("#RecoverySmelter").html(row);
            },
            error: function (result) {
                alert("Error");
            }
        });
    })

    $("#MineralNatureId2").change(function () {
        var MNatureId = $("#MineralNatureId2").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetMineralGradeForSmelter", "eReturmForm2")',
            data: {
                MineralNatureId: MNatureId
            },

            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {


                console.log(data);
                var row = "";
                $.each(data, function (index, item) {
                    row += "<tr id='" + item.MineralGradeId3 + "'><input type='hidden' name='MineralGradeID3' value='" + item.MineralGradeId6
                        + "'/><input type='hidden' name='MineralNatureId' value='" + MNatureId
                        + "'/><td><input type='text' class='form-control1' name='treatedQty' value='" + item.treatedQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='treatedGrade' value='" + item.treatedGrade
                        + "'/></td><td><input type='text' class='form-control1' name='ClosingstocksQty' value='" + item.ClosingstocksQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='ClosingstocksGrade' value='" + item.ClosingstocksGrade
                        + "'/></td><td><input type='text' class='form-control1' name='MetalsQty' value='" + item.MetalsQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='MetalsGrade' value='" + item.MetalsGrade
                        + "'/></td><td><input type='text' class='form-control1' name='MetalsValue' value='" + item.MetalsValue
                        + "'/></td><td><input type='text' class='form-control1' name='Otherby_productsQty' value='" + item.Otherby_productsQty
                        + "'/></td><td><input type='text' class='form-control1' name='Otherby_productsGrade' value='" + item.Otherby_productsGrade

                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' class='form-control1' name='Otherby_productsValue' value='"
                        + item.Otherby_productsValue + "'/></tr>";
                });
                $("#RecoverySmelter2").html(row);
            },
            error: function (result) {
                alert("Error");
            }
        });
    })

    $("#MineralNatureId3").change(function () {
        var MNatureId = $("#MineralNatureId3").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetMineralGradeSale", "eReturmForm2")',
            data: {
                MineralNatureId: MNatureId
            },

            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {


                console.log(data);
                var row = "";
                $.each(data, function (index, item) {
                    row += "<tr id='" + item.MineralGradeId3 + "'><input type='hidden' name='MineralGradeID3' value='" + item.MineralGradeId3
                        + "'/><input type='hidden' name='MineralNatureId' value='" + MNatureId
                        + "'/><td><input type='text' class='form-control1' name='Product' value='" + item.Product
                        + "'/></td><td><input type='text' class='form-control1' name='OpeningStockQty' value='" + item.OpeningStockQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='OpeningStockGrade' value='" + item.OpeningStockGrade
                        + "'/></td><td><input type='text' class='form-control1' name='PlaceOfSale' value='" + item.PlaceOfSale
                        + "'/></td><td><input type='text' class='form-control1' name='SoldQty' value='" + item.SoldQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' name='SoldGrade' value='" + item.SoldGrade
                        + "'/></td><td><input type='text' class='form-control1' name='SoldValue' value='" + item.SoldValue
                        + "'/></td><td><input type='text' class='form-control1' name='ClosingStockQty' value='" + item.ClosingStockQty
                        + "'/></td><td><input type='text' class='form-control1' readonly='readonly' class='form-control1' name='ClosingStockGrade' value='"
                        + item.ClosingStockGrade + "'/></tr>";
                });
                $("#SaleofMonth").html(row);
            },
            error: function (result) {
                alert("Error");
            }
        });
    })
     
    $("#MineralNatureId4").change(function () {
        var MNatureId = $("#MineralNatureId4").val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetMineralGradeSaleDispatch", "eReturmForm2")',
            data: {
                MineralNatureId: MNatureId
            },

            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {


                console.log(data);
                var row = "";
                $.each(data, function (index, item) {
                    row += "<tr id='" + item.MineralGradeId3 + "'><input type='hidden' name='MineralGradeID3' value='" + item.MineralGradeId3
                        + "'/><input type='hidden' name='MineralNatureId' value='" + MNatureId
                        + "'/><td>" + item.MineralGrade
                        + "</td><td><input type='text' class='form-control1' name='NatureofDespatch' value='" + item.NatureofDespatch
                        + "'/></td><td><input type='text' class='form-control1' name='RegistrationNo' value='" + item.RegistrationNo
                        + "'/></td><td><input type='text' class='form-control1' name='Consigneename' value='" + item.Consigneename
                        + "'/></td><td><input type='text' class='form-control1' name='Quantity1' value='" + item.Quantity1
                        + "'/></td><td><input type='text' class='form-control1' name='SaleValue' value='" + item.SaleValue
                        + "'/></td><td><input type='text' class='form-control1' name='Country' value='" + item.Country
                        + "'/></td><td><input type='text' class='form-control1' name='Quantity2' value='" + item.Quantity2
                        + "'/></td><td><input type='text' class='form-control1' class='form-control1' name='FOBValue' value='"
                        + item.FOBValue + "'/></tr>";
                });
                $("#contacts").html(row);
            },
            error: function (result) {
                alert("Error");
            }
        });
    })
</script>

<style>
    /*.k-grid {
        height: 363px !important;
    }*/
    .k-grid-content {
        height: 186px !important;
    }

    .k-editable {
        height: 399px !important;
    }

    .k-edit-buttons {
        width: 853px !important;
    }
</style>

<script>

    function quantity_Onchange(dom, event) {
        var domName = dom.id;

        if (event.shiftKey == true) {
            event.preventDefault();
        }

        if ((event.keyCode >= 48 && event.keyCode <= 57) ||
            (event.keyCode >= 96 && event.keyCode <= 105) ||
            event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 ||
            event.keyCode == 39 || event.keyCode == 46 || event.keyCode == 190) {

            var val = $("#" + domName).val();
            if (isNaN(val)) {
                val = val.replace(/[^0-9\.]/g, '');
                if (val.split('.').length > 2) {
                    val = 0;
                    $("#" + domName).val(val);
                    event.preventDefault();
                    return false;
                }
            }
        }
        else {
            event.preventDefault();
        }
        return true;
    }

    function GetDispatche(vvMineralGradeId, TinContent) {
        var G_Id = vvMineralGradeId;
        var M_Y = $("#Month_Year").val();
        var MN_Id = $("#MineralNatureId").val();
        var TinContent = TinContent;

        if (G_Id != "" && M_Y != "" && TinContent != "") {
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetDespatches_MineHead", "eReturmForm2")',
                data: {
                    MineralGradeId: G_Id,
                    MonthYear: M_Y,
                    TinContent: TinContent
                },
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {

                    $("#Sold_Qty").val(result.Dispatche.toFixed(2)).change();
                    if (result.OpeningStock != null && result.OpeningStock != "") {
                        $("#OS_Qty").val(result.OpeningStock.toFixed(2));
                        $("#OS_Qty").trigger("change");
                        $("#OS_Qty").attr("readonly", "readonly");
                    }
                    else {
                        $("#OS_Qty").val('').trigger("change");
                        $("#OS_Qty").removeAttr("readonly");
                    }

                    var OS = $("#OS_Qty").val();
                    var DP = $("#Sold_Qty").val();
                    if (OS) {
                        var CS = (parseFloat(OS)) - parseFloat(DP);
                        if (parseFloat(CS) < 0) {
                            CS = 0;
                            $("#CS_Qty").val(CS.toFixed(2)).change();
                            $("#OS_Qty").val('').change();
                            alert("Please enter proper opening stocks of Metals/Products !");
                            return false;
                        }
                        $("#CS_Qty").val(CS.toFixed(2)).change();
                    }
                    else {
                        $("#CS_Qty").val(0.00).change();
                    }
                }
            });
        }
    }

    var TinContent = 0;
    function OnMineralGradeSelection() {
        var vvMineralGradeId = $("#MineralGradeId6").val();
        if (vvMineralGradeId != "") {
            var dropDown = $("#MineralGradeId6").data("kendoComboBox");
            var ddData = dropDown.dataSource.view()[dropDown.select()];
            TinContent = ddData.TINCONTENT;
            $("#OS_Grade").val(ddData.MineralGrade).trigger('change');
            $("#Sold_Grade").val(ddData.MineralGrade).trigger('change');
            $("#CS_Grade").val(ddData.MineralGrade).trigger('change');
            $("#TinContent").val(ddData.TINCONTENT).trigger('change');

            GetDispatche(vvMineralGradeId, TinContent);
        }
    }

</script>




































