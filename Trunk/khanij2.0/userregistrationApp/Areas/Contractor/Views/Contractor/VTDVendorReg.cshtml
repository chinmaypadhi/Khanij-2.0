
@{
    ViewData["Title"] = "VTDVendorReg";
    Layout = "~/Views/Shared/_WebHeaderLayout.cshtml";
}
@using userregistrationEF;
@inject Microsoft.Extensions.Options.IOptions<userregistrationEF.KeyList> metaOptions
@{
    var options = metaOptions.Value;
}

<style>
    .refesh-btn {
        position: absolute;
        right: 59%;
        top: 2px;
        font-size: 25px;
        border: 1px solid #ddd;
        padding: 1px 10px;
        background-color: #dddddd6e;
        border-radius: 5px;
    }
</style>
<div class="inner-naviagtion">
    <div class="container">
        <nav aria-label="breadcrumb mb-0">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="@options.HomeUrl"><span class="fas fa-home"></span></a></li>
                <li class="breadcrumb-item text-white" aria-current="page">Registrations</li>
                <li class="breadcrumb-item text-white" aria-current="page">VTD Vendor</li>
            </ol>
        </nav>
    </div>
</div>

<div class="inner-content">
    <div class="container">
        <h3 class="heading">VTD <small>(Vehicle tracking device)</small>Vendor Registration</h3>
        @using (Html.BeginForm("VTDVendorReg", "Contractor", FormMethod.Post, new { AUTOCOMPLETE = "Off", id = "form1", enctype = "multipart/form-data" }))
        {
            <div class="row">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Company Name <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        @*<input type="text" id="CompanyName" name="CompanyName" class="form-control">*@
                                        <select id="CompanyId" name="CompanyId" class="form-control">
                                            <option value="">Select</option>
                                        </select>
                                        <input type="hidden" id="CompanyName" name="CompanyName" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">GST <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input type="text" id="GST" name="GST" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*<div class="col-lg-12">
                                <div class="row">
                                    <div class="col-lg-7 col-md-7 col-12">
                                        <div class="form-group">
                                            <table id="datatable" class="table table-sm table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th>Model</th>
                                                        <th>PortNo</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>*@

                        <div class="mt-4 col-lg-12"><h4 class="text-primary">Company's Corporate Address</h4><hr></div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Address <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <textarea id="Company_Corp_Address" name="Company_Corp_Address" class="form-control" rows="2" maxlength="500"></textarea>
                                        <small class="text-danger">Maximum <strong>500</strong> characters</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">State <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <select id="Company_Corp_State" name="Company_Corp_State" type="text" class="form-control">
                                            <option value="">Select</option>
                                            @{
                                                List<CommonAddressDetails> lstcommonAddressDetailsCorp = (List<CommonAddressDetails>)ViewData["StateDetails"];
                                                if (lstcommonAddressDetailsCorp != null)
                                                {
                                                    foreach (var item in lstcommonAddressDetailsCorp)
                                                    {
                                                        if (item.StateID != 7)
                                                        {
                                                            <option value="@item.StateID">@item.StateName</option>
                                                        }
                                                    }
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">District <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <select id="Company_Corp_District" name="Company_Corp_District" type="text" class="form-control">
                                            <option value="">Select</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>


                        @*<div class="col-lg-6">
                                <div class="row">
                                    <label class="col-lg-5 col-md-5 col-12 col-form-label ">Block <span class="text-danger">*</span></label>
                                    <div class="col-lg-7 col-md-7 col-12">
                                        <div class="form-group">
                                            <input id="Company_Corp_Block" name="Company_Corp_Block" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>*@

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Pin Code <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="Company_Corp_PinCode" name="Company_Corp_PinCode" type="text" maxlength="6" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 col-lg-12"><h4 class="text-primary">Company's Local Address</h4><hr></div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Address <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <textarea id="Company_Local_Address" name="Company_Local_Address" class="form-control" rows="2" maxlength="500"></textarea>
                                        <small class="text-danger">Maximum <strong>500</strong> characters</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">State <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <select id="Company_Local_State" name="Company_Local_State" class="form-control">
                                            <option value="">Select</option>
                                            @{
                                                List<CommonAddressDetails> lstcommonAddressDetails = (List<CommonAddressDetails>)ViewData["StateDetails"];
                                                if (lstcommonAddressDetails != null)
                                                {
                                                    foreach (var item in lstcommonAddressDetails)
                                                    {
                                                        if (item.StateID == 7)
                                                        {
                                                            <option value="@item.StateID">@item.StateName</option>
                                                        }
                                                    }
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">District <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <select id="Company_Local_District" name="Company_Local_District" class="form-control">
                                            <option value="">Select</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Block <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <select id="Company_Local_Block" name="Company_Local_Block" class="form-control">
                                            <option value="">Select</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Pin Code <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="Company_Local_PinCode" name="Company_Local_PinCode" type="text" maxlength="6" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        @*<div class="mt-4 col-lg-12"><h4 class="text-primary">Contact Person Details</h4><hr></div>*@
                        <div class="mt-4 col-lg-12"><h4 class="text-primary">Primary Contact Details</h4><hr></div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label "> Name <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="Contact_Person_Name" name="Contact_Person_Name" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">
                                    Mobile Number <span class="text-danger">*</span>
                                    <a href="javascript:void(0)" class="extra-information" data-toggle="tooltip" data-placement="top" title="OTP will be sent on your mobile number">
                                        <i class="fas fa-info-circle"></i>
                                    </a>
                                </label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="Contact_Person_MobileNo" onkeypress="return isNumber(event)" name="Contact_Person_MobileNo" maxlength="10" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">
                                    Email Id <span class="text-danger">*</span>
                                    <a href="javascript:void(0)" class="extra-information" data-toggle="tooltip" data-placement="top" title="OTP will be sent on your Email Id">
                                        <i class="fas fa-info-circle"></i>
                                    </a>
                                </label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input onkeypress="nospace(event)" id="Contact_Person_EmailId" name="Contact_Person_EmailId" type="email" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Designation <span class="text-danger">*</span> </label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="Contact_Person_Designation" name="Contact_Person_Designation" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 col-lg-12"><h4 class="text-primary">Secondary Contact Details</h4><hr></div>
                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label "> Name <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="Secondary_Contact_Person_Name" name="Secondary_Contact_Person_Name" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">
                                    Mobile Number <span class="text-danger">*</span>
                                    @*<a href="javascript:void(0)" class="extra-information" data-toggle="tooltip" data-placement="top" title="OTP will be sent on your mobile number">
                                            <i class="fas fa-info-circle"></i>
                                        </a>*@
                                </label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input onkeypress="return isNumber(event)" id="Secondary_Contact_Person_MobileNo" name="Secondary_Contact_Person_MobileNo" maxlength="10" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Email Id <span class="text-danger">*</span> </label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input onkeypress="nospace(event)" id="Secondary_Contact_Person_EmailId" name="Secondary_Contact_Person_EmailId" type="email" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Designation <span class="text-danger">*</span> </label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="Secondary_Designation" name="Secondary_Designation" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Transport Department Approval Letter <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <div class="custom-file">
                                            <input type="file" class="custom-file-input" id="ApprovalLetter" name="ApprovalLetter">
                                            <label class="custom-file-label" for="ApprovalLetter">Choose Files</label>
                                        </div>
                                        <small class="text-danger">Only <strong> jpg, jpeg, png, pdf</strong> file types size Max. <strong>2 MB </strong></small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6"></div>
                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Enter Captcha <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="VTDCaptcha" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group row">
                                <div class="col-sm-4">
                                    <div class="input-group">

                                        <div id="capt1" class="form-control" ondrag="return false" oncopy="return false" onselectstart="return false" oncut="return false"></div>
                                        <label class="input-group-text" for="inputDate1"> <a href="javascript:;" onclick="updateCaptcha();"><i class="fas fa-sync-alt"></i></a> </label>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <label class="col-lg-5 col-md-5 col-12 col-form-label ">Enter OTP <span class="text-danger">*</span></label>
                                <div class="col-lg-7 col-md-7 col-12">
                                    <div class="form-group">
                                        <input id="VTDOTP" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <input type="button" class="btn btn-success" id="btnsendOtp" value="Send OTP">
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group row">
                                <div class="custom-control custom-checkbox ml-2">
                                    <input type="checkbox" class="custom-control-input" name="chkIagree" id="chkIagree">
                                    <label class="custom-control-label  text-danger" for="chkIagree">
                                        Declaration - I declare that all the information given above is true as per my knowledge and belief. I am aware that if any of the above information is found to be false or untrue, there may be penalty / penalty under the appropriate rules.
                                        The Department of Mineral Resources will not be responsible for authenticating any of the above information.
                                    </label>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="row mt-3" id="divButtons">
                        <div class="col-lg-12">
                            <button id="btnSaveVTD" type="button" class="btn btn-success btn-lg mr-2">Apply</button>
                            <a href="/Contractor/Contractor/VTDVendorReg" class="btn btn-danger btn-lg">Reset</a>
                        </div>
                    </div>

                </div>

            </div>
        }
    </div>
</div>
@{
    if (ViewBag.SuccessMessage != null)
    {
        <script>
            swal("", "You have successfully applied for Registration with Khanij Online Portal. Your Registration Number is @ViewBag.SuccessMessage. Approval is Pending at Directorate of Geology and Mining, Chhattisgarh. Please check your e-mail for more details.", "success");
        @*swal("", "You have successfully applied for Registration with Khanij Online Portal. @ViewBag.SuccessMessage. Please check your e-mail for details of registration.", "success");*@
        </script>
    }
}
<script>
    $(document).ready(function () {
        updateCaptcha();
        CompanyDetails();
        //--------------------------
        if ($('input[name="chkIagree"]:checked').length > 0) {
            $('#divButtons').show();
            $(this).attr('checked', true);
        }
        else {
            $('#divButtons').hide();
            $(this).attr('checked', false);
        }
        //--------------------------------
        $("#Company_Corp_PinCode").keydown(function (e) {
            // Allow: backspace, delete, tab, escape, enter and .
            if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
                // Allow: Ctrl+A, Command+A
                (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                // Allow: home, end, left, right, down, up
                (e.keyCode >= 35 && e.keyCode <= 40)) {
                // let it happen, don't do anything
                return;
            }
            // Ensure that it is a number and stop the keypress
            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                e.preventDefault();
            }
        });

        $("#Company_Local_PinCode").keydown(function (e) {
            // Allow: backspace, delete, tab, escape, enter and .
            if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
                // Allow: Ctrl+A, Command+A
                (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                // Allow: home, end, left, right, down, up
                (e.keyCode >= 35 && e.keyCode <= 40)) {
                // let it happen, don't do anything
                return;
            }
            // Ensure that it is a number and stop the keypress
            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                e.preventDefault();
            }
        });

        $("#Contact_Person_MobileNo").keydown(function (e) {
            // Allow: backspace, delete, tab, escape, enter and .
            if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
                // Allow: Ctrl+A, Command+A
                (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                // Allow: home, end, left, right, down, up
                (e.keyCode >= 35 && e.keyCode <= 40)) {
                // let it happen, don't do anything
                return;
            }
            // Ensure that it is a number and stop the keypress
            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                e.preventDefault();
            }
        });

        $('#ApprovalLetter').on('change', function () {
            debugger;
            var fileExtension = ['jpg', 'jpeg', 'png', 'pdf', 'tif'];
            if ($.inArray($(this).val().split('.').pop().toLowerCase(), fileExtension) == -1) {
                swal("", "Only formats are allowed : " + fileExtension.join(', '), "warning");
                $(this).focus();
                return false;
            }

            if (Number(this.files[0].size) > 2097152) {
                swal("", 'Try to upload file less than 2 MB!', "warning");
                $(this).val('');
                $(this).focus();
                return false;
            }
            else {
                var fileName = $(this).val().split("\\").pop();
                $(this).next('.custom-file-label').html(fileName);
            }

        });
    });

    function updateCaptcha() {
        debugger;
        $.ajax({
            url: '/VehicleOwner/VehicleOwner/CaptchaImage',
            data: {},
            dataType: 'json',
            type: 'post',
            success: function (data) {
                $("#capt1").html(data);
            },
            error: function (err) {
                swal("", err.responseText, "warning");
            }
        });
    }

    $('#btnSaveVTD').click(function () {
        if (ValidateVTDVendor()) {
            $('#form1').submit();
        }
        else {
            return false;
        }
    });

    function ValidateVTDVendor() {

        if ($('#CompanyId').val() == "") {
            swal("", "Please Select Company", "warning");
            $("#CompanyId").focus();
            return false;
        }

        //if ($('#datatable tbody tr').length <= 0) {
        //    swal("", "Model and PortNo Details Required", "warning");
        //    return false;
        //}

        if ($('#GST').val() == "") {
            swal("", "Please Enter GST Number", "warning");
            $("#CompanyName").focus();
            return false;
        }

        if (CheckSpaceAtFirstPlaceAndLastPlace($('#GST').val()) == false) {
            swal("", "Please Check GST Number For Spaces at Beginning And End Place", "warning");
            $("#GST").focus();
            return false;
        }

        if ($("#GST").val() != "") {
            if ($("#GST").val().length != 15) {
                swal("", "Please Enter Valid GST Number !", "warning");
                $("#GST").focus();
                return false;
            }
        }

        if ($('#Company_Corp_Address').val() == "") {
            swal("", "Please Enter Corporate Address", "warning");
            $("#Company_Corp_Address").focus();
            return false;
        }

        if (CheckSpaceAtFirstPlaceAndLastPlace($('#Company_Corp_Address').val()) == false) {
            swal("", "Please Check Corporate Address For Spaces at Beginning And End Place", "warning");
            $("#Company_Corp_Address").focus();
            return false;
        }

        if ($('#Company_Corp_State').val() == "") {
            swal("", "Please Select Corporate State", "warning");
            $("#Company_Corp_State").focus();
            return false;
        }

        if ($('#Company_Corp_District').val() == "") {
            swal("", "Please Select Corporate District", "warning");
            $("#Company_Corp_District").focus();
            return false;
        }

        //if ($('#Company_Corp_Block').val() == "") {
        //    swal("", "Please Enter Corporate Block", "warning");
        //    $("#Company_Corp_Block").focus();
        //    return false;
        //}

        //if (CheckSpaceAtFirstPlaceAndLastPlace($('#Company_Corp_Block').val()) == false) {
        //    swal("", "Please Check Corporate Block For Spaces at Beginning And End Place", "warning");
        //    $("#Company_Corp_Block").focus();
        //    return false;
        //}

        if ($('#Company_Corp_PinCode').val() == "") {
            swal("", "Please Enter Corporate Pin", "warning");
            $("#Company_Corp_PinCode").focus();
            return false;
        }

        if ($('#Company_Local_Address').val() == "") {
            swal("", "Please Enter Local Address", "warning");
            $("#Company_Local_Address").focus();
            return false;
        }

        if (CheckSpaceAtFirstPlaceAndLastPlace($('#Company_Local_Address').val()) == false) {
            swal("", "Please Check Local Address For Spaces at Beginning And End Place", "warning");
            $("#Company_Local_Address").focus();
            return false;
        }

        if ($('#Company_Local_State').val() == "") {
            swal("", "Please Select Local State", "warning");
            $("#Company_Local_State").focus();
            return false;
        }

        if ($('#Company_Local_District').val() == "") {
            swal("", "Please Select Local District", "warning");
            $("#Company_Local_District").focus();
            return false;
        }

        if ($('#Company_Local_Block').val() == "") {
            swal("", "Please Select Local Block", "warning");
            $("#Company_Local_Block").focus();
            return false;
        }

        if ($('#Company_Local_PinCode').val() == "") {
            swal("", "Please Enter Local Pin", "warning");
            $("#Company_Local_PinCode").focus();
            return false;
        }

        if ($('#Contact_Person_Name').val() == "") {
            swal("", "Please Enter Primary Contact Name", "warning");
            $("#Contact_Person_Name").focus();
            return false;
        }

        if (CheckSpaceAtFirstPlaceAndLastPlace($('#Contact_Person_Name').val()) == false) {
            swal("", "Please Check Primary Contact Name For Spaces at Beginning And End Place", "warning");
            $("#Contact_Person_Name").focus();
            return false;
        }

        if ($('#Contact_Person_MobileNo').val() == "") {
            swal("", "Please Enter Primary Mobile Number", "warning");
            $("#Contact_Person_MobileNo").focus();
            return false;
        }

        if ($('#Contact_Person_MobileNo').val() != "") {
            if ($('#Contact_Person_MobileNo').val().length != 10) {
                swal("", "Please Enter Primary Valid Mobile Number", "warning");
                $("#Contact_Person_MobileNo").focus();
                return false;
            };
        }

        if ($("#Contact_Person_EmailId").val() == "") {
            swal("", "Please Enter Primary EmailId", "warning");
            $("#Contact_Person_EmailId").focus();
            return false;
        }

        if (ValidateEmailAddress(document.getElementById("Contact_Person_EmailId")) == false) {
            swal("", "Please Enter Valid Primary EmailId", "warning");
            $("#Contact_Person_EmailId").focus();
            return false;
        }

        if ($('#Contact_Person_Designation').val() == "") {
            swal("", "Please Enter Primary Designation", "warning");
            $("#Contact_Person_Designation").focus();
            return false;
        }

        if (CheckSpaceAtFirstPlaceAndLastPlace($('#Contact_Person_Designation').val()) == false) {
            swal("", "Please Check Primary Designation For Spaces at Beginning And End Place", "warning");
            $("#Contact_Person_Designation").focus();
            return false;
        }

        if ($('#Secondary_Contact_Person_Name').val() == "") {
            swal("", "Please Enter Secondary Contact Name", "warning");
            $("#Secondary_Contact_Person_Name").focus();
            return false;
        }

        if (CheckSpaceAtFirstPlaceAndLastPlace($('#Secondary_Contact_Person_Name').val()) == false) {
            swal("", "Please Check Secondary Contact Name For Spaces at Beginning And End Place", "warning");
            $("#Secondary_Contact_Person_Name").focus();
            return false;
        }

        if ($('#Secondary_Contact_Person_MobileNo').val() == "") {
            swal("", "Please Enter Secondary Mobile Number", "warning");
            $("#Secondary_Contact_Person_MobileNo").focus();
            return false;
        }

        if ($('#Secondary_Contact_Person_MobileNo').val() != "") {
            if ($('#Secondary_Contact_Person_MobileNo').val().length != 10) {
                swal("", "Please Enter Secondary Valid Mobile Number", "warning");
                $("#Secondary_Contact_Person_MobileNo").focus();
                return false;
            };
        }

        if ($("#Secondary_Contact_Person_EmailId").val() == "") {
            swal("", "Please Enter Secondary EmailId", "warning");
            $("#Secondary_Contact_Person_EmailId").focus();
            return false;
        }

        if (ValidateEmailAddress(document.getElementById("Secondary_Contact_Person_EmailId")) == false) {
            swal("", "Please Enter Valid Secondary EmailId", "warning");
            $("#Secondary_Contact_Person_EmailId").focus();
            return false;
        }

        if ($('#Secondary_Designation').val() == "") {
            swal("", "Please Enter Secondary Designation", "warning");
            $("#Secondary_Designation").focus();
            return false;
        }

        if (CheckSpaceAtFirstPlaceAndLastPlace($('#Secondary_Designation').val()) == false) {
            swal("", "Please Check Secondary Designation For Spaces at Beginning And End Place", "warning");
            $("#Secondary_Designation").focus();
            return false;
        }

        if ($('#ApprovalLetter').val() == "") {
            swal("", "Please Choose Transport Department Approval Letter", "warning");
            $("#ApprovalLetter").focus();
            return false;
        }

        if ($('#VTDCaptcha').val() == "") {
            swal("", "Please Enter Captcha", "warning");
            $("#VTDCaptcha").focus();
            return false;
        }

        if ($("#capt1").html() != $('#VTDCaptcha').val()) {
            swal("", "Please Enter Valid Captcha", "warning");
            $("#VTDCaptcha").focus();
            updateCaptcha();
            return false;
        }

        //if ($('#VTDOTP').val() == "") {
        //    swal("", "Please Enter OTP", "warning");
        //    $("#VTDOTP").focus();
        //    return false;
        //}

        return true;
    }

    $('#Company_Local_State').change(function () {
        debugger;
        if ($(this).val() != "") {
            $.ajax({
                url: "/Contractor/Contractor/GetDistrictByStateId",
                data: { 'StateId': $(this).val() },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    debugger;
                    $('#Company_Local_District').html('');
                    $('#Company_Local_District').append("<option value=''>Select</option>");
                    $.each(data, function (ind, item) {
                        $('#Company_Local_District').append("<option value='" + item.districtID + "'>" + item.districtName + "</option>");
                    });
                },
                error: function (err) {

                }
            });
        }
        else {
            $('#Company_Local_District').html('');
            $('#Company_Local_District').append("<option value=''>Select</option>");
            $('#Company_Local_Block').html('');
            $('#Company_Local_Block').append("<option value=''>Select</option>");
        }
    });

    $('#Company_Local_District').change(function () {
        debugger;
        if ($(this).val() != "") {
            $.ajax({
                url: "/Contractor/Contractor/GetBlockByDistrictId",
                data: { 'DistrictId': $(this).val() },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    debugger;
                    $('#Company_Local_Block').html('');
                    $('#Company_Local_Block').append("<option value=''>Select</option>");
                    $.each(data, function (ind, item) {
                        $('#Company_Local_Block').append("<option value='" + item.blockId + "'>" + item.blockName + "</option>");
                    });
                },
                error: function (err) {

                }
            });
        }
        else {
            $('#Company_Local_Block').html('');
            $('#Company_Local_Block').append("<option value=''>Select</option>");
        }
    });

    $("#btnsendOtp").click(function () {
        debugger;
        if (ValidateVTDVendor()) {
            var mobileNumber = $("#Contact_Person_MobileNo").val();
            var EmailID = $("#Contact_Person_EmailId").val();

            if (mobileNumber == "") {
                swal("", "Please enter mobile number", "warning");
                $('#Contact_Person_MobileNo').focus();
                return false;
            }
            else {
                $('#btnsendOtp').attr('readonly', 'readonly');

                $.ajax({
                    url: '/VehicleOwner/VehicleOwner/SendOTP',
                    dataType: "",
                    type: "POST",
                    data: {
                        MobileNumber: mobileNumber,
                        EmailID: EmailID
                    },
                    success: function (data) {
                        debugger;
                        console.log(data);
                        if (data != null) {
                            $('#btnsendOtp').removeAttr('readonly');
                            if (data == "SUCCESS") {
                                swal("", "Enter Verification Code received on submitted Mobile/Email Id", "success");
                            }
                            else {
                                swal("", data, "warning");
                            }
                        }
                    }
                })
            }
        }
    });

    $('#chkIagree').click(function () {
        debugger;
        if (ValidateVTDVendor()) {
            if ($('#VTDOTP').val() != "") {
                $.ajax({
                    url: '/VehicleOwner/VehicleOwner/VerifyOTP',
                    data: {
                        OTP: $('#VTDOTP').val(),
                        MobileNumber: $("#Contact_Person_MobileNo").val(),
                        EmailID: $("#Contact_Person_EmailId").val()
                    },
                    success: function (result) {
                        if (result == "SUCCESS") {
                            if ($('input[name="chkIagree"]:checked').length > 0) {
                                $('#divButtons').show();
                                $(this).attr('checked', 'checked');

                            }

                            else {
                                $('#divButtons').hide();
                                ChangeCheckBoxStatus();
                            }
                        }
                        else if (result == "REQUIRED") {
                            swal("", "Please enter mobile number and e-mail and OTP !", "warning");
                            $('#divButtons').hide();
                            ChangeCheckBoxStatus();
                        }
                        else {
                            swal("", "This is an invalid OTP.Please send another OTP and try again !", "warning");
                            $('#divButtons').hide();
                            ChangeCheckBoxStatus();
                        }
                    },
                    error: function (result) {
                        swal("", "OTP Verification failed.Please try again !", "warning");
                        $('#divButtons').hide();
                        ChangeCheckBoxStatus();
                    }
                });
            }
            else {
                $('#chkIagree').prop('checked', false);
                swal("", "Please Enter OTP", "warning");
                $("#VTDOTP").focus();
                $('#divButtons').hide();
                return false;
            }
        }
        else {

            ChangeCheckBoxStatus();
            $('#divButtons').hide();
        }

    });

    function ChangeCheckBoxStatus() {
        if ($('input[type="checkbox"]').is(':checked') == true) {
            $('input[type="checkbox"]').prop('checked', false);
        }
    }

    $('#Company_Corp_State').change(function () {
        debugger;
        if ($(this).val() != "") {
            $.ajax({
                url: "/Contractor/Contractor/GetDistrictByStateId",
                data: { 'StateId': $(this).val() },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    debugger;
                    $('#Company_Corp_District').html('');
                    $('#Company_Corp_District').append("<option value=''>Select</option>");
                    $.each(data, function (ind, item) {
                        $('#Company_Corp_District').append("<option value='" + item.districtID + "'>" + item.districtName + "</option>");
                    });
                },
                error: function (err) {

                }
            });
        }
        else {
            $('#Company_Corp_District').html('');
            $('#Company_Corp_District').append("<option value=''>Select</option>");
        }
    });

    $('#CompanyId').change(function () {
        if ($(this).val() != "") {
            $('#CompanyName').val($("#CompanyId option:selected").text());
            $.ajax({
                url: "https://vtsapi.infotracktelematics.com/v1.0/api/devicetype/Types?",
                data: { "Manufacturer": $("#CompanyId option:selected").text() },
                dataType: "json",
                type: "get",
                success: function (data) {
                    //if (data.length > 0) {
                    //    $('#datatable tbody').html('');
                    //    var count = 0;
                    //    $.each(data, function (ind, item) {
                    //        $('#datatable tbody').append('<tr> <td><input type="text" readonly name="VTDUserModelPortDetails[' + count + '].ModelName" value="' + item.device_Type + '" /></td> <td><input type="text" readonly name="VTDUserModelPortDetails[' + count + '].PortNo" value="' + item.device_Port + '" /></td> </tr>')
                    //        count++;
                    //    });
                    //}
                },
                error: function (err) {

                }
            });
        }
        else {
            $('#CompanyId').html('');
            $('#CompanyId').append("<option value=''>Select</option>");
            /* $('#datatable tbody').html('');*/
            CompanyDetails();
        }
    });

    function CompanyDetails() {
        $.ajax({
            url: "https://vtsapi.infotracktelematics.com/v1.0/api/devicetype",
            data: {},
            dataType: "json",
            type: "get",
            success: function (data) {
                if (data.length > 0) {
                    $('#CompanyId').html('');
                    $('#CompanyId').append("<option value=''>Select</option>");
                    $.each(data, function (ind, item) {
                        $('#CompanyId').append("<option value='" + item.deviceTypeId + "'>" + item.manufacturer + "</option>");
                    });
                }
            },
            error: function (err) {

            }
        });
    }

    function CheckSpaceAtFirstPlaceAndLastPlace(str) {
        var regex = /^(?!\s)(?![\s\S]*\s$)[a-zA-Z0-9\s()-]+$/;
        return regex.test(str);
    }

    $("#Contact_Person_EmailId").keydown(function (evt) {
        debugger;
        evt = (evt) ? evt : window.event;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode == 32) {
            return false;
        }
        return true;

    });

    $("#Secondary_Contact_Person_EmailId").keydown(function (evt) {
        debugger;
        evt = (evt) ? evt : window.event;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode == 32) {
            return false;
        }
        return true;

    });

    function ValidateEmailAddress(inputText) {
        debugger;
        var mailformat = /^\w+([\.-]?\w+)@@\w+([\.-]?\w+)(\.\w{2,3})+$/;
        if (inputText.value.match(mailformat)) {
            inputText.focus();
            return true;
        }
        else {
            return false;
        }
    }

    function isNumber(evt) {
        evt = (evt) ? evt : window.event;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
        return true;
    }
</script>




