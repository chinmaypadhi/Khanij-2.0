@model PermitEF.ePermitModel
@{
    ViewData["Title"] = "ePermitApplication";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<section class="wrapper main-wrapper row">
    <div class="col-12">
        @Html.Partial("_navigation")

        <!-- MAIN CONTENT AREA STARTS -->
        <div class="row">
            <div class="col-12">
                <div class="main-tab">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" href="javascript:void(0);">
                                Dynamic Payment Configuration
                            </a>
                        </li>

                    </ul>
                    @Html.Partial("_util")
                </div>

                <section class="box form-container">
                    <div class="content-body">
                        @using (Html.BeginForm("PaymentConfiguration", "PaymentConfig", FormMethod.Post, new { AUTOCOMPLETE = "Off", id = "form1" }))
                        {
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="inputName" class="col-sm-4 col-form-label font-weight-bold">Mines Type <span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownList("MinesType", new List<SelectListItem>
{
    new SelectListItem{ Text="Select Mines Type", Value = "1" },
    new SelectListItem{ Text="Auction Mines", Value = "2" },
    new SelectListItem{ Text="Non-Auction Mines", Value = "3" },
 }, new { @class = "form-control searchableselect" })

                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="dropdownUserType" class="col-sm-4 col-form-label font-weight-bold">Captive Type <span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownList("Captive", new List<SelectListItem>
{
    new SelectListItem{ Text="Select Captive Type", Value = "1" },
    new SelectListItem{ Text="Captive", Value = "2" },
    new SelectListItem{ Text="Non-Captive", Value = "3" },
 }, new { @class = "form-control searchableselect" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="dropdownUserType" class="col-sm-4 col-form-label font-weight-bold">Company Type <span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownList("Company", new List<SelectListItem>
{
    new SelectListItem{ Text="Select Company Type", Value = "1" },
    new SelectListItem{ Text="Gov.", Value = "2" },
    new SelectListItem{ Text="copration", Value = "3" },
    new SelectListItem{ Text="Others", Value = "4" },
 }, new { @class = "form-control searchableselect" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="dropdownUserType" class="col-sm-4 col-form-label font-weight-bold">Lease Extend <span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownList("Lease", new List<SelectListItem>
{
    new SelectListItem{ Text="Select Lease Type", Value = "1" },
    new SelectListItem{ Text="Yes", Value = "2" },
    new SelectListItem{ Text="No", Value = "3" },
 }, new { @class = "form-control searchableselect" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="dropdownUserType" class="col-sm-4 col-form-label font-weight-bold">Mineral Name<span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownListFor(model => model.MineralId, ViewBag.ViewMineralList as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control form-group", autofocus = "autofocus" })
                                        @(Html.HiddenFor(model => model.MineralId))
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="dropdownUserType" class="col-sm-4 col-form-label font-weight-bold">Mineral Form<span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownListFor(model => model.MineralNatureId, ViewBag.ViewMineralNatureList as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control form-group", autofocus = "autofocus" })

                                        @(Html.HiddenFor(model => model.MineralNatureId))
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="dropdownUserType" class="col-sm-4 col-form-label font-weight-bold">Mineral Grade<span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownListFor(model => model.MineralGradeId, Enumerable.Empty<SelectListItem>(), "--Select--", new { @class = "form-control form-group", autofocus = "autofocus" })
                                        @(Html.HiddenFor(model => model.MineralGradeId))
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6" id="Primium" style="display:none">
                                <div class="form-group row">
                                    <label for="dropdownDepart" class="col-sm-4 col-form-label font-weight-bold">Premium Amt.<span class="text-danger">*</span></label>
                                    <div class="col-sm-7">

                                        @Html.DropDownList("Premium", new List<SelectListItem>
{
    new SelectListItem{ Text="Select Lease Type", Value = "1" },
    new SelectListItem{ Text="Yes", Value = "2" },
    new SelectListItem{ Text="No", Value = "3" },
 }, new { @class = "form-control searchableselect" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12" id="CaptiveMines" style="display:none">
                                <div class="form-group row">
                                    <label for="dropdownDesign" class="col-sm-8 col-form-label font-weight-bold">
                                        Sale of Mineral more than 25% and up to 50% of annual production
                                        <span class="text-danger">*</span>
                                    </label>
                                    <div class="col-sm-4">
                                        @Html.RadioButton("CaptiveMines", "1") Equivalent to 50% royalty payable

                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6" id="Fifth" style="display: none">
                                <div class="form-group row">
                                    <label for="dropdownUserType" class="col-sm-4 col-form-label font-weight-bold">Fifth Schedule<span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownListFor(model => model.FifthSchId, ViewBag.ViewFifthList as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control form-group", autofocus = "autofocus" })
                                        @*@Html.RadioButton("Fifth", "1") Equivalent to 150% of the royalty
                    <br />
                    @Html.RadioButton("Fifth", "2")Equivalent to 50% of the royalty
                    <br />
                    @Html.RadioButton("Fifth", "3")Equivalent to the royalty
                    <br />*@

                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6" id="Sixth" style="display: none">
                                <div class="form-group row">
                                    <label for="inputPassword" class="col-sm-4 col-form-label font-weight-bold">Sixth Schedule<span class="text-danger">*</span></label>
                                    <div class="col-sm-7">
                                        @Html.DropDownListFor(model => model.SixthSchId, ViewBag.ViewSixthList as IEnumerable<SelectListItem>, "--Select--", new { @class = "form-control form-group", autofocus = "autofocus" })
                                        @*@Html.RadioButton("Sixth", "1") Equivalent to 500% of the royalty
                    <br />
                    @Html.RadioButton("Sixth", "2") Equivalent to 250% of the royalty
                    <br />
                    @Html.RadioButton("Sixth", "3") Equivalent to 200% of the royalty
                    <br />
                    @Html.RadioButton("Sixth", "4") Equivalent to 150% of the royalty
                    <br />
                    @Html.RadioButton("Sixth", "5")Equivalent to 50% of the royalty
                    <br />
                    @Html.RadioButton("Sixth", "6")Equivalent to the royalty
                    <br />*@
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 offset-sm-2">
                                <input type="submit" value='Submit' class="btn btn-primary btn-md ml-0" name="Submit" id="Submit" />


                                <a href="#" class="btn btn-danger btn-md">Reset</a>
                            </div>
                        </div>
                        }
                    </div>
                </section>
            </div>
        </div>
    </div>
    <!-- MAIN CONTENT AREA ENDS -->
</section>
<uc1:footer runat="server" ID="footer" />



<script>
    indicateMe = "yes"
    $(document).ready(function () {
        loadNavigation('Add', 'glhelpdesk', 'plraiseticket', 'tl', 'E-Permit', 'Payment Config', ' ');
        $('.datetime').datetimepicker({
            format: "DD/MM/YYYY"
        }).keydown(false);
    });

    if ('@ViewBag.Message' != null || '@ViewBag.Message' != '' || '@ViewBag.Message' != 'abcd') {

        if ('@ViewBag.Message' == 'abcd') {
            $("#spMessage").css("display", "none");
            $("#divMsg").css("display", "none");
        }

        else {
            alert('@ViewBag.Message');
            $("#spMessage").css("display", "block");
            $("#divMsg").css("display", "block");
        }

    }
</script>
<script>
    $(document).ready(function () {
        $("#MinesType").change(function () {
            if ($('#MinesType').val() == "2" ) {
                $("#Primium").show();
            }
            else {
                $("#Primium").hide();
            }
        });
        $("#MinesType").change(function () {
            if ($('#MinesType').val() == "2" && $('#Captive').val() == '2' && $('#MineralId').val() != '15' && $('#MineralId').val() != '') {
                $("#CaptiveMines").show();
                $("#Sixth").hide();
            } else if ($('#MinesType').val() == "3" && $('#Captive').val() == '2' && $('#MineralId').val() != '15' && $('#MineralId').val() != '') {
                $("#Sixth").show();
                $("#CaptiveMines").hide();
            }
            else {
                $("#Sixth").hide();
                $("#CaptiveMines").hide();
            }
        });
        $("#Captive").change(function () {
            if ($('#MinesType').val() == "2" && $('#Captive').val() == '2' && $('#MineralId').val() != '15' && $('#MineralId').val() != '') {
                $("#CaptiveMines").show();
                $("#Sixth").hide();
            }
            else if ($('#MinesType').val() == "3" && $('#Captive').val() == '2' && $('#MineralId').val() != '15' && $('#MineralId').val() != '') {
                $("#Sixth").show();
                $("#CaptiveMines").hide();
            }
            else {
                $("#Sixth").hide();
                $("#CaptiveMines").hide();
            }
        });
        $("#MineralId").change(function () {
            if ($('#MinesType').val() == "2" && $('#Captive').val() == '2' && $('#MineralId').val() != '15' && $('#MineralId').val() != '') {
                $("#CaptiveMines").show();
                $("#Sixth").hide();
            } else if ($('#MinesType').val() == "3" && $('#Captive').val() == '2' && $('#MineralId').val() != '15' && $('#MineralId').val() != '') {
                $("#Sixth").show();
                $("#CaptiveMines").hide();
            }
            else {
                $("#Sixth").hide();
                $("#CaptiveMines").hide();
            }
        });
        $("#Company").change(function () {
            if (($('#Company').val() == "2" || $('#Company').val() == '3') && $('#Lease').val() == '2' ) {
                $("#Fifth").show();
            }
            else {
                $("#Fifth").hide();

            }
        });
        $("#Lease").change(function () {
            if (($('#Company').val() == "2" || $('#Company').val() == '3') && $('#Lease').val() == '2') {
                $("#Fifth").show();
            }
            else {
                $("#Fifth").hide();

            }
        });
    });
</script>
<script>
    $(document).ready(function () {
        function BindMineralForm() {
            var MineralId = $('#MineralId').val();
            if (MineralId == "") {
                MineralId = 0;
            }
            //alert(RoleTypeId.toString());
            $('#MineralNatureId').empty();
            var v = "";
            if (MineralId != 0) {

                $.ajax({
                    type: "POST",
                    url: "/Permit/PaymentConfig/GetMineralForm",
                    data: { 'MineralId': MineralId },
                    cache: false,
                    //contentType: "application/json",
                    datatype: "JSON",
                    success: function (SList) {
                        var opt = new Option('--Select--', 0);
                        $('#MineralNatureId').append(opt).selectpicker('refresh');
                        $.each(SList, function (i, item) {

                            // console.log(item);
                            var opt = new Option(item.MineralNature, item.MineralNatureId);
                            $('#MineralNatureId').append(opt).selectpicker('refresh');
                            //$('#ddlUserName').append('<option value="' + item[" UserID"] + '"> ' + item["ApplicantName"] + ' </option>' );
                            // v += "<option value='" + item.userID.toString() + "'>" + item.applicantName + "</option>";
                            // alert(v);
                        });

                    }
                });
            }
            else {
                $('#MineralNatureId').val("");
                alert('Select Mineral Name');
            }
        }
        $("#MineralId").change(function () {

            BindMineralForm();

        });
    });

</script>
<script>
    $(document).ready(function () {
        $("#MineralNatureId").change(function () {
            var MineralId = $('#MineralId').val();
            var NatureID = $('#MineralNatureId').val();
            if (NatureID == "") {
                NatureID = 0;
            }
            //alert(RoleTypeId.toString());
            $('#MineralGradeId').empty();
            var v = "";
            if (NatureID != 0) {

                $.ajax({
                    type: "POST",
                    url: "/Permit/PaymentConfig/GetMineralGrade",
                    data: { 'NatureID': NatureID, 'MineralId': MineralId },
                    cache: false,
                    //contentType: "application/json",
                    datatype: "JSON",
                    success: function (SList) {
                        var opt = new Option('--Select--', 0);
                        $('#MineralGradeId').append(opt).selectpicker('refresh');
                        $.each(SList, function (i, item) {

                            // console.log(item);
                            var opt = new Option(item.MineralGrade, item.MineralGradeId);
                            $('#MineralGradeId').append(opt).selectpicker('refresh');
                            //$('#ddlUserName').append('<option value="' + item[" UserID"] + '"> ' + item["ApplicantName"] + ' </option>' );
                            // v += "<option value='" + item.userID.toString() + "'>" + item.applicantName + "</option>";
                            // alert(v);
                        });

                    }
                });
            }
            else {
                $('#MineralGradeId').val("");
                alert('Select Mineral Form');
            }

        });
    });
</script>

