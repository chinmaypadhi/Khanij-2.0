@*// *********************************************************************************************************
    //  View Name                : FORM II
    //  Desciption               : To Print Form II
    //  Created By               : Akshaya Dalei
    //  Created On               : 08 Nov 2021
    // ********************************************************************************************************
*@
@model ReturnEF.CoalMonthlyViewModel
@{
    ViewData["Title"] = "Print FORM II";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="wrapper main-wrapper row">

    <div class="col-12">
        @Html.Partial("_CMSnavigation")
        <!-- MAIN CONTENT AREA STARTS -->
        <div class="row">
            <div class="col-12">
                <div class="main-tab">
                    <ul class="nav nav-tabs">
                        <a class="nav-link active" href="javascript:void(0);">Print</a>
                    </ul>
                    @Html.Partial("_CMSutil")
                </div>

                <section class="box form-container">
                    @if (Model != null && !string.IsNullOrEmpty(Model.objMine.DSCFilePath))
                    {
                        <span id="lblGenerate">Download FORM</span>
                        <a target="_blank" class="btn btn-primary" href='@ViewBag.ServerPath@Model.objMine.DSCFilePath'>Download</a>
                    }
                    else
                    {
                        <h1>
                            Print
                            <img src="~/img/1475779253_BT_printer.ico" style="height:40px;width:40px;cursor:pointer;" onclick="getPDF()" />
                        </h1>
                    }
                    <div class="content-body">
                        @using (Html.BeginForm("", "", FormMethod.Post, new { id = "__FIRSTSCHEDULEFORMIIAntiForgeryForm", @class = "form-horizontal bordered-row" }))
                        {
                            <div class="table-responsive" id="viewtable">
                                @Html.HiddenFor(e => e.objMine.Coal_Monthly_Id)
                                <input type="hidden" value="@ViewBag.EncryptData" name="Month_Year" id="Month_Year" />
                                <input type="hidden" value="@ViewBag.UserId" name="UserId" id="UserId" />

                                <div id="eReturnMonthly" class="container-fluid  pdf-page size-a4" style="min-height: 4000px">
                                    <p class="text-center"><b>FIRST SCHEDULE</b></p>
                                    <p class="text-center">FORM II</p>
                                    <p class="text-center"><b>(See Regulation 4)</b></p>
                                    <h4><p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;Monthly Return for the Month of <b> @ViewBag.Month_Year</b></p> <br /></h4>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;1. Name of mine:<b> @Html.DisplayFor(m => m.objMine.Name_of_mine)</b></p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;postal address of mine:<b> @Html.DisplayFor(m => m.objMine.postal_address_of_mine)</b></p>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;2. Situation of Mine : <b>@Html.DisplayFor(m => m.objMine.Situation_of_Mine)</b>&nbsp;&nbsp;&nbsp;&nbsp; Place :<b>@Html.DisplayFor(m => m.objMine.Tahsil)</b>&nbsp;&nbsp;&nbsp;&nbsp; District:<b>@Html.DisplayFor(m => m.objMine.District)</b></p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;State : <b>@Html.DisplayFor(m => m.objMine.State)</b></p>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;3. Name of Owner :<b>@Html.DisplayFor(m => m.objMine.Name_of_Owner)</b></p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;Postal address of owner :<b>@Html.DisplayFor(m => m.objMine.Postal_address_of_owner)</b></p>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;4. Name of managing agents, if any :<b>@Html.DisplayFor(m => m.objMine.Name_of_agents)</b></p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;Postal address of managing agents, :<b>@Html.DisplayFor(m => m.objMine.Address_of_agents)</b></p>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;5. Name of agent, if any:<b>@Html.DisplayFor(m => m.objMine.agent_name)</b></p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;Postal address of agent :<b>@Html.DisplayFor(m => m.objMine.agent_address)</b></p>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;6. Name of manager :<b>@Html.DisplayFor(m => m.objMine.Name_of_manager)</b></p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;Postal address of manager :<b>@Html.DisplayFor(m => m.objMine.Address_of_manager)</b></p>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;7. Tables A to C duly filled in, are attached.
                                    <p>
                                        @Html.CheckBoxFor(m => m.objMine.Certify)
                                        Certified that the information given above and in Tables A to C below is correct to the best of my knowledge.
                                    </p>
                                    <br />
                                    <p class="text-right">Yours faithfully,</p>
                                    <p class="text-right">Signature …………………………</p>
                                    <p class="text-right">Designation : Owner/Agent/Manager</p>
                                    <span class="page-break"></span>
                                    <br />

                                    <p class="text-center"><b>TABLE A : RAISINGS, DESPATCHES AND STOCK (IN TONNES) 8</b></p>
                                    <br />

                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;1. Name of colliery siding or loading point :<label id="Name_OF_Colliery_SidingP">@Model.listTABLE_A_Model.ElementAt(0).Name_OF_Colliery_Siding</label> @Html.DisplayFor(m => m.objMine.Name_OF_Colliery_SidingP)</p>
                                    <div class="row">
                                        <div class="col-sm-12">

                                            <table id="tbl_TABLEA" border="1">
                                                <tr>
                                                    <th rowspan="3">
                                                        <center>Grade of Coal</center>
                                                    </th>
                                                    <th rowspan="3">
                                                        <center>Size<br /> of<br /> coal</center>
                                                    </th>
                                                    <th rowspan="3">
                                                        <center>Stock at the beginning of month</center>
                                                    </th>
                                                    <th colspan="3">
                                                        <center>Coal Raised</center>
                                                    </th>
                                                    <th rowspan="3">
                                                        <center>Colliery<br /> consumption<br /> (Boilers,<br />Domesticetc)</center>
                                                    </th>
                                                    <th rowspan="3">
                                                        <center>Coal used in making coke in colliery</center>
                                                    </th>
                                                    <th rowspan="3">
                                                        <center>Coke produced</center>
                                                    </th>
                                                    <th colspan="4">
                                                        <center>Coal Despatched</center>
                                                    </th>
                                                </tr>

                                                <tr>
                                                    <th rowspan="2">Open cast working</th>
                                                    <th colspan="2">Workings below ground</th>
                                                    <th rowspan="2">By Rail</th>
                                                    <th rowspan="2">By Road</th>
                                                    <th rowspan="2">By other means</th>
                                                    <th rowspan="2">Stock at the end of month</th>
                                                </tr>
                                                <tr>
                                                    <th>Development districts</th>
                                                    <th>Depillaring district</th>
                                                </tr>
                                                @{
                                                    foreach (var item in Model.listTABLE_A_Model)
                                                    {
                                                        <tr>
                                                            <td style="width: 12%;"> @item.MineralGrade</td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.Size_Of_Coal</td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.Opening_Stock</td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.OpenCW </td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.Below_GW_DevelopmentDistricts</td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.Below_GW_DepillaringDistricts </td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.CollieryConsumption</td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.Coalused_Makingcoke_Colliery </td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.CokeProduced </td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.CoalDespatched_ByRail</td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.CoalDespatched_ByRoad</td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.CoalDespatched_ByOther</td>
                                                            <td style="width: 8%; text-align: left; border-left: 1px solid #70ADD6;">@item.Closing_Stock</td>'
                                                        </tr>
                                                    }
                                                }

                                            </table>
                                        </div>
                                    </div>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp; Instructions :</p>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;1. A SEPARATE RETURN SHOULD BE SUBMITTED IN RESPECT OF EACH GRADE OF COAL PRODUCED.</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;2. Figures relating to despatches of coal should be given separately in respect of each loading point from which coal was despatched.</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;3. All figures should be rounded upto the nearest tonne.</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;4. Columns 3, 4 and 5 should include all coal brought to the surface, irrespective of the use of which it may be put.</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;5. Column 6 should include all coal consumed at or about the colliery in connection with colliery operations (including domestic use and coal taken home by the workers).</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;6. Column 7 should include all coal used at the colliery for the purpose of making coke irrespective of the method used.</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;7. Adjustment in stocks made, if any, should be clearly indicated by means of footnotes.</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;8. Substituted vide G.S.R. No.1473, dated 22.9.1967.</p>
                                    <span class="page-break"></span>
                                    <br />
                                    <p class="text-center"><b>TABLE B : MACHINERY</b></p>
                                    <br />
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table id="tbl_TABLEB" style="width: 100%" border="1">
                                                <tr>
                                                    <th rowspan="2"></th>
                                                    <th colspan="4">Coal-cutting machines</th>
                                                    <th colspan="3">Mechanical Loaders</th>
                                                    <th colspan="3">Conveyors</th>
                                                </tr>
                                                <tr>
                                                    <th>Number in use</th>
                                                    <th>Type</th>
                                                    <th>Square metres cut</th>
                                                    <th>Coal cut (tonnes)</th>
                                                    <th>Number in use</th>
                                                    <th>Type</th>
                                                    <th>Coal loaded (tonnes)</th>
                                                    <th>Type</th>
                                                    <th>Length (metres)</th>
                                                    <th>Coal conveyed (tonnes)</th>
                                                </tr>
                                                @{
                                                    var count = 0;
                                                    foreach (var item in Model.listTABLE_B_Model)
                                                    {
                                                        count++;
                                                        <tr>
                                                            <td style="width: 10%;"> @count.&nbsp;&nbsp;&nbsp;&nbsp;@item.WorkingsBG_Type</td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.Coal_Cutting_No_In_Use </td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.Coal_Cutting_Type</td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.Square_Metres_Cut </td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.Coal_cut</td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.MechanicalLoaders_NoInUse </td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.MechanicalLoaders_Type</td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.MechanicalLoaders_Coalloaded </td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.Conveyors_Type</td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.Conveyors_Length</td>
                                                            <td style="width: 9%; text-align: left; border-left: 1px solid #70ADD6;">@item.Coal_conveyed</td>
                                                        </tr>
                                                    }
                                                }
                                            </table>
                                        </div>
                                    </div>
                                    <br />
                                    <p class="text-center"><b>TABLE C : NUMBER OF MAN-DAYS, ETC.</b></p>
                                    <br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;Maximum number of persons employed on any one day during the month</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;(i) in workings belowground on &nbsp;&nbsp;&nbsp;&nbsp; <b>@Html.DisplayFor(m => m.objWork.Belowground_on_str)</b>(a): &nbsp;&nbsp;&nbsp;&nbsp;No. of employee &nbsp;&nbsp;&nbsp;&nbsp; <b>@Html.DisplayFor(m => m.objWork.Belowground_No_Employee)</b></p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;(ii) in all in the mine on &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  <b>@Html.DisplayFor(x => x.objWork.Mine_on_str)</b>(a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No. of employee &nbsp;&nbsp;&nbsp;&nbsp; <b>@Html.DisplayFor(m => m.objWork.Mine_No_Employee)</b></p>

                                    <br />
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table style="width: 100%" border="1">
                                                <tr>
                                                    <th style="width: 23%" rowspan="2"></th>
                                                    <th style="width: 22%" colspan="2">Aggregate number of mandays worked (b)(c)</th>
                                                    <th style="width: 55%" colspan="5">Aggregate number of man-days lost on account of absence (d)(e)</th>
                                                </tr>
                                                <tr>
                                                    <th style="width: 11%">Men</th>
                                                    <th style="width: 11%">Women</th>
                                                    <th style="width: 11%">Sickness</th>
                                                    <th style="width: 11%">Accident</th>
                                                    <th style="width: 11%">Leave</th>
                                                    <th style="width: 11%">Other cause</th>
                                                    <th style="width: 11%">Total</th>
                                                </tr>
                                                <tr>
                                                    <td style="width: 23%">
                                                        Belowground :<br />
                                                        (i) Mines & Loaders<br />
                                                        (ii) Others
                                                    </td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.BG_Mine_Loader_Men)<br />@Html.DisplayFor(m => m.objWork.BG_Other_Men)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.BG_Mine_Loader_Women)<br />@Html.DisplayFor(m => m.objWork.BG_Other_Women)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.BG_Sickness)<br />@Html.DisplayFor(m => m.objWork.BG_Other_Sickness)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.BG_Accident)<br />@Html.DisplayFor(m => m.objWork.BG_Other_Accident)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.BG_Leave)<br />@Html.DisplayFor(m => m.objWork.BG_Other_Leave)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.BG_OtherCause)<br />@Html.DisplayFor(m => m.objWork.BG_Other_OtherCause)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.BG_Total)<br />@Html.DisplayFor(m => m.objWork.BG_Other_Total)</td>
                                                </tr>
                                                <tr>
                                                    <td style="width: 23%">
                                                        Opencast Workings:<br />
                                                        (i) Mines & Loaders<br />
                                                        (ii) Others
                                                    </td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.OC_Mine_Loader_Men)<br />@Html.DisplayFor(m => m.objWork.OC_Other_Men)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.OC_Mine_Loader_Women)<br />@Html.DisplayFor(m => m.objWork.OC_Other_Women)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.OC_Sickness)<br />@Html.DisplayFor(m => m.objWork.OC_Other_Sickness)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.OC_Accident)<br />@Html.DisplayFor(m => m.objWork.OC_Other_Accident)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.OC_Leave)<br />@Html.DisplayFor(m => m.objWork.OC_Other_Leave)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.OC_OtherCause)<br />@Html.DisplayFor(m => m.objWork.OC_Other_OtherCause)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.OC_Total)<br />@Html.DisplayFor(m => m.objWork.OC_Other_Total)</td>
                                                </tr>
                                                <tr>
                                                    <td style="width: 23%">Aboveground :</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.AG_Men)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.AG_Women)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.AG_Sickness)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.AG_Accident)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.AG_Leave)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.AG_OtherCause)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.AG_Total)</td>
                                                </tr>
                                                <tr>
                                                    <td style="width: 23%">Total :</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.Total_Men)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.Total_Women)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.Total_Sickness)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.Total_Accident)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.Total_Leave)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.Total_OtherCause)</td>
                                                    <td style="width: 11%">@Html.DisplayFor(m => m.objWork.Total_All)</td>
                                                </tr>
                                            </table>

                                        </div>
                                    </div>
                                    <br />

                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp; If there is any marked increase or decrease in attendance or absence, please account for it.</p>
                                    <p class="text-center">INSTRUCTIONS</p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;(a) Give day of the week and the date and month.</p>
                                    <p class="text-left">
                                        &nbsp;&nbsp;&nbsp;&nbsp;(b) The information should cover all persons “employed” in the mine as defined in clause (h)
                                        of Section 2 of the Mines Act, 1952 including clerical and subordinate supervisory staff.
                                    </p>
                                    <p class="text-left">
                                        &nbsp;&nbsp;&nbsp;&nbsp;(c) Total number of man-days worked should be obtained by adding the daily attendance for
                                        the whole month.
                                    </p>
                                    <p class="text-left">
                                        &nbsp;&nbsp;&nbsp;&nbsp;(d) Total number of man-days lost by absence should be obtained by adding the daily
                                        absences for the whole month.
                                    </p>
                                    <p class="text-left">
                                        &nbsp;&nbsp;&nbsp;&nbsp;(e) Absences should include all cases in which a person is “scheduled to work” or is
                                        expected to turn up for work, but does not. All permanent employees are to be treated as
                                        “scheduled” to work. So far as temporary or casual employees are concerned, a person
                                        who attended work during the preceding week should be considered as scheduled to
                                        work during the week under consideration unless (i) he has reported his intention to quit,
                                        or (ii) his services have been terminated by the management, or (iii) he does not turn up
                                        for work during the whole week. A person who has not worked during the preceding
                                        week, should be considered as “scheduled to work” only from the day on which he joins
                                        work during the week under consideration. Absence due to strike, lockout, lay-off or
                                        maternity leave should not be included as absence here.
                                    </p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;(f) Persons employed in the removal of overburden should be included amongst “Others” and not among “Miners and Loaders”.</p>
                                    <span class="page-break"></span>
                                    <br />
                                    <br />
                                    <p class="text-center"><b>TABLE D : HOURS OF WORK AND EARNING</b></p>
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp; Information should be furnished in respect of one complete working week during the last month of the quarter(a).</p><br />
                                    <p class="text-left">&nbsp;&nbsp;&nbsp;&nbsp;1. Attendance, man-hours worked and cash earnings.</p>

                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table style="width: 100%" border="1">
                                                <tr>
                                                    <th rowspan="2"></th>
                                                    <th rowspan="2">Average attendance during the week (b)</th>
                                                    <th rowspan="2">Aggregate number of manhours worked during the week(c)</th>
                                                    <th colspan="4">Total Average daily cash payments for work done during the week (d)</th>
                                                </tr>
                                                <tr>
                                                    <th>Basic wages</th>
                                                    <th>Dearness allowance</th>
                                                    <th>Other cash payments (e)</th>
                                                    <th>Total</th>
                                                </tr>
                                                <tr>
                                                    <td>1</td>
                                                    <td>2</td>
                                                    <td>3</td>
                                                    <td>4</td>
                                                    <td>5</td>
                                                    <td>6</td>
                                                    <td>7</td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>₹.</td>
                                                    <td>₹.</td>
                                                    <td>₹.</td>
                                                    <td>₹.</td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Below Ground:<br />
                                                        (i)Overman and
                                                        Sirdars<br />
                                                        (ii)Miners and
                                                        Loaders<br />
                                                        (iii)Others
                                                    </td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.BG_OS_Average_att)<br />@Html.DisplayFor(m => m.objEarn.BG_ML_Average_att)<br />@Html.DisplayFor(m => m.objEarn.BG_Other_Average_att)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.BG_OS_Aggregate_No)<br />@Html.DisplayFor(m => m.objEarn.BG_ML_Aggregate_No)<br />@Html.DisplayFor(m => m.objEarn.BG_Other_Aggregate_No)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.BG_OS_Basic_wages)<br />@Html.DisplayFor(m => m.objEarn.BG_ML_Basic_wages)<br />@Html.DisplayFor(m => m.objEarn.BG_Other_Basic_wages)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.BG_OS_Dearness_allowance)<br />@Html.DisplayFor(m => m.objEarn.BG_ML_Dearness_allowance)<br />@Html.DisplayFor(m => m.objEarn.BG_Other_Dearness_allowance)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.BG_OS_cash)<br />@Html.DisplayFor(m => m.objEarn.BG_ML_cash)<br />@Html.DisplayFor(m => m.objEarn.BG_Other_cash)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.BG_OS_Total)<br />@Html.DisplayFor(m => m.objEarn.BG_ML_Total)<br />@Html.DisplayFor(m => m.objEarn.BG_Other_Total)</td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Opencast Workings<br />
                                                        (i)Overman and
                                                        Sirdars<br />
                                                        (ii)Miners and
                                                        Loaders<br />
                                                        (iii)Others (f)
                                                    </td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.OC_OS_Average_att)<br />@Html.DisplayFor(m => m.objEarn.OC_ML_Average_att)<br />@Html.DisplayFor(m => m.objEarn.OC_Other_Average_att)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.OC_OS_Aggregate_No)<br />@Html.DisplayFor(m => m.objEarn.OC_ML_Aggregate_No)<br />@Html.DisplayFor(m => m.objEarn.OC_Other_Aggregate_No)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.OC_OS_Basic_wages)<br />@Html.DisplayFor(m => m.objEarn.OC_ML_Basic_wages)<br />@Html.DisplayFor(m => m.objEarn.OC_Other_Basic_wages)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.OC_OS_Dearness_allowance)<br />@Html.DisplayFor(m => m.objEarn.OC_ML_Dearness_allowance)<br />@Html.DisplayFor(m => m.objEarn.OC_Other_Dearness_allowance)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.OC_OS_cash)<br />@Html.DisplayFor(m => m.objEarn.OC_ML_cash)<br />@Html.DisplayFor(m => m.objEarn.OC_Other_cash)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.OC_OS_Total)<br />@Html.DisplayFor(m => m.objEarn.OC_ML_Total)<br />@Html.DisplayFor(m => m.objEarn.OC_Other_Total)</td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Above Ground:<br />
                                                        (i) Clerical and
                                                        Supervisory staff <br />
                                                        (ii) Others - men
                                                        women
                                                    </td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.AG_CSS_Average_att)<br />@Html.DisplayFor(m => m.objEarn.AG_Other_Average_att)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.AG_CSS_Aggregate_No)<br />@Html.DisplayFor(m => m.objEarn.AG_Other_Aggregate_No)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.AG_CSS_Basic_wages)<br />@Html.DisplayFor(m => m.objEarn.AG_Other_Basic_wages)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.AG_CSS_Dearness_allowance)<br />@Html.DisplayFor(m => m.objEarn.AG_Other_Dearness_allowance)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.AG_CSS_cash)<br />@Html.DisplayFor(m => m.objEarn.AG_Other_cash)</td>
                                                    <td><br />@Html.DisplayFor(m => m.objEarn.AG_CSS_Total)<br />@Html.DisplayFor(m => m.objEarn.AG_Other_Total)</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="7">2. Total estimated value of concessions in kind (g) given during the week : ₹. @Html.DisplayFor(m => m.objEarn.Total_Estimated_Value)</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="7">3. Normal hours of production shifts : @Html.DisplayFor(m => m.objEarn.Normal_hrs_production_shifts)</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="7">
                                                        1ST Shift : @Html.DisplayFor(m => m.objEarn.First_Shift)<br />
                                                        2nd Shift : @Html.DisplayFor(m => m.objEarn.Second_Shift)<br />
                                                        3rd Shift : @Html.DisplayFor(m => m.objEarn.Third_Shift)
                                                    </td>
                                                </tr>
                                            </table>
                                            <p class="text-left">
                                                &nbsp;&nbsp;&nbsp;&nbsp;4. If there is any major change in wages or hours of work as compared to the preceding
                                                month please account for the change.
                                            </p>
                                        </div>
                                    </div>

                                    <p class="text-center"><b>INSTRUCTIONS</b></p>

                                    <p class="text-left">
                                        (a) The information should cover all persons “employed” as in Table C. Particulars relating to
                                        payments etc., to monthly paid staff should be included on a pro-rata basis.
                                        (b) Average daily attendance should be obtained by dividing the aggregate number of
                                        attendance on all the shifts on all days during the week by the number of working days. Any
                                        day on which the mine did not work, for any cause whatsoever, should not be treated as a
                                        working day.
                                        (c) Aggregate number of man-hours worked during the week should be obtained by adding
                                        for the whole week, the number of man-hours worked every day. The number of man-hours
                                        worked on a day is obtained by summing up the number of hours worked by each person
                                        attending work on each of the shifts during the day, including overtime worked, if any.
                                        (d) Total cash payments should include all remuneration payable (and paid) for work done
                                        during the week before making deductions, if any, towards fines, provident fund contributions,
                                        etc., Employer’s contributions to the provident fund or on account of welfare provisions should
                                        not be included. Bonuses not payable for every pay-period should also not be included.
                                        (e) Including over-time payments.
                                        (f) Persons employed in the removal of overburden should be included among “Others” and
                                        not among “Miners and Loaders”.
                                        (g) Concessions in kind (such as supply of food-stuff etc. Free or at subsidized prices) should
                                        be estimated in terms of the difference between the monetary value of the food stuffs, etc. at
                                        cost price and the value realised by sale at confessional price.
                                    </p>
                                </div>


                                <input id="fName" type="hidden" />
                                <input id="fid" type="hidden" />
                            </div>
                        }
                    </div>

                </section>
            </div>
        </div>
    </div>
</section>

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.3/jspdf.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
<script>
    indicateMe = "yes"

    $(document).ready(function () {
        loadNavigation('MontlyReturnCoal', 'glereturncoal', 'plmonretcoal', 'tl', 'E-Return Coal', 'Print Coal First Schedule FORM II', ' ');

    });

    function getPDF() {
        debugger;
        var HTML_Width = $("#eReturnMonthly").width();
        var HTML_Height = $("#eReturnMonthly").height();
        var top_left_margin = 15;
        var PDF_Width = HTML_Width + (top_left_margin * 2);
        var PDF_Height = (PDF_Width * 1.5) + (top_left_margin * 2);
        var canvas_image_width = HTML_Width;
        var canvas_image_height = HTML_Height;

        var totalPDFPages = Math.ceil(HTML_Height / PDF_Height) - 1;


        html2canvas($("#eReturnMonthly")[0], { allowTaint: true }).then(function (canvas) {
            debugger;
            canvas.getContext('2d');

            console.log(canvas.height + "  " + canvas.width);

           // var data = canvas.toDataURL();
            var data = canvas.toDataURL("image/JPEG", 1.0);
            var pdf = new jsPDF('p', 'pt', [PDF_Width, PDF_Height]);
            pdf.addImage(data, 'JPEG', top_left_margin, top_left_margin, canvas_image_width, canvas_image_height);


            for (var i = 1; i <= totalPDFPages; i++) {
                pdf.addPage(PDF_Width, PDF_Height);
                pdf.addImage(data, 'JPEG', top_left_margin, -(PDF_Height * i) + (top_left_margin * 4), canvas_image_width, canvas_image_height);
            }
            //data = data.replace('data:image/png;base64,', '');
            data = pdf.output("datauristring").replace('data:application/pdf;base64,', '');

             //-----------------
                     try {

                         var dt = new Date();
                         var FNID = $('#objMine_Coal_Monthly_Id').val();
                         var FileName = FNID + "CoalMonthlyReturn" + dt.getDate() + "" + (dt.getMonth() + 1) + "" + dt.getFullYear() + "_" + dt.getHours() + "_" + dt.getMinutes() + "_" + dt.getSeconds() + ".pdf";
                         $("#fName").val(FileName).change();


                          $.ajax({
                              url: "/EReturnCoal/EReturnCoal/SaveNormalPdfFile",
                              type: "POST",
                              async: false,
                              data: { base64BinaryStr: data, fileName: $("#fName").val(), ID: $('#objMine_Coal_Monthly_Id').val(), UpdateIn: "CoalMonthlyReturn" },
                              success: function (msg) {
                                  debugger;
                                  if (msg == "SUCCESS") {

                                      var FPath = '@ViewBag.DSCReadFilePath' + $("#fName").val();
                                      var OutPath = "";
                                      var Postdata = 'action=signpdf' + "\n" + 'datatosign=' + FPath + '' + "\n" + 'signaction=2' + "\n" + 'outputpath=' + OutPath + '' + "\n" + 'signtype=sign' + "\n" + 'expirycheck=true' + "\n" + 'coordinate=400,100,1000,50' + "\n" + 'issuername=' + "\n" + 'certtype=ALL' + "\n" + 'certclass=0';
                                      connection.send(Postdata);
                                      connection.onerror = function (error) {
                                          debugger;
                                          alert('Please check the server connection: ' + error);
                                          alert(error);
                                      };

                                      connection.onmessage = function (e) { // when DSC is success then following function executed.
                                          debugger;
                                          if (e.data.indexOf("subProtocol") == -1) {
                                              $("#DSCResponse").val(e.data).change();
                                              $.ajax(
                                              {
                                                  url: "/EReturnCoal/EReturnCoal/CheckVerifyResponse",
                                                      type: "POST",
                                                  data: { contentType: "pkcs7", signDataBase64Encoded: e.data, responseType: "plain" },
                                                  async: false,
                                                      success: function (msg) {
                                                          debugger;
                                                      if (msg == "SUCCESS") {

                                                          var FNID = $("#fName").val();
                                                          var Month_Year = $("#Month_Year").val();
                                                          var LicenseAppId = $("#objMine_Coal_Monthly_Id").val();
                                                          var signData = e.data;
                                                          $.ajax({
                                                              url:"/EReturnCoal/EReturnCoal/SavePdfFile",
                                                              type: "POST",
                                                              async: false,
                                                              data: { base64BinaryStr: e.data, fileName: FNID, ID: LicenseAppId, UpdateIn: "CoalMonthlyReturn" },
                                                              success: function (msg) {

                                                                  if (msg == "SUCCESS") {
                                                                      // window.location.reload();
                                                                      window.location.href = "/EReturnCoal/EReturnCoal/PrintCoalFIRSTSCHEDULE_FORMII?Month_Year=" + Month_Year;

                                                                  }
                                                                  else {
                                                                      alert(msg);
                                                                  }
                                                              }
                                                          });
                                                      }
                                                  }
                                              });
                                          }
                                          else {
                                              alert(e.data);
                                          }
                                      };
                                  }
                                  else {
                                      alert(msg);

                                  }
                              }
                          });
                      }
                      catch (e) {
                          alert("Your DSC Connection is not working. Please try after some time.");
                      }
                    //-------------------------
           // pdf.save("HTML-Document.pdf");
        });
    };


    //following code is for DSC Signature
    try {
        var connection = new WebSocket('wss://localhost.emudhra.com:8080');

        connection.onopen = function () {
            console.log('Connection Opened');
        };
        connection.onerror = function (error) {
            //  alert('Please check the DSC connection: ' + error);
        };
        connection.onmessage = function (e) {
            if (e.data.indexOf("subProtocol") == -1) {
                //  alert(e.data);
            }
        };
    }
    catch (e) {
        alert("No DSC Connection Found");
    }
    //-----------------------------
</script>

